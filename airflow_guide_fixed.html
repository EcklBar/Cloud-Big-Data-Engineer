<!DOCTYPE html>
<html lang="en" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>מדריך Apache Airflow מקיף</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            direction: rtl;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .header h1 {
            color: #4a5568;
            font-size: 3rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #3182ce, #9f7aea);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .airflow-logo {
            width: 80px;
            height: 80px;
            margin: 20px auto;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            animation: rotate 10s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .nav-tabs {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .nav-tab {
            background: rgba(255, 255, 255, 0.9);
            border: none;
            padding: 15px 20px;
            border-radius: 15px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .nav-tab:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        .nav-tab.active {
            background: linear-gradient(45deg, #3182ce, #9f7aea);
            color: white;
            transform: translateY(-3px);
        }

        .content-section {
            display: none;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            animation: fadeIn 0.5s ease-in;
        }

        .content-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-title {
            color: #2d3748;
            font-size: 2.5rem;
            margin-bottom: 30px;
            text-align: center;
            position: relative;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 4px;
            background: linear-gradient(45deg, #3182ce, #9f7aea);
            border-radius: 2px;
        }

        .concept-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }

        .concept-card {
            background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
            padding: 25px;
            border-radius: 15px;
            border-right: 5px solid #3182ce;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .concept-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            border-right-color: #9f7aea;
        }

        .concept-card h3 {
            color: #2d3748;
            margin-bottom: 15px;
            font-size: 1.4rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .concept-card p {
            color: #4a5568;
            line-height: 1.6;
        }

        .code-snippet {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', Monaco, monospace;
            font-size: 0.9rem;
            overflow-x: auto;
            margin: 20px 0;
            direction: ltr;
            text-align: left;
        }

        .highlight-box {
            background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            color: #2d3748;
            border-right: 5px solid #38a169;
        }

        .warning-box {
            background: linear-gradient(135deg, #fed7d7 0%, #feb2b2 100%);
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            color: #742a2a;
            border-right: 5px solid #e53e3e;
        }

        .interactive-demo {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            margin: 30px 0;
        }

        .demo-button {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid white;
            color: white;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            margin: 10px;
        }

        .demo-button:hover {
            background: white;
            color: #f5576c;
            transform: translateY(-2px);
        }

        .executor-comparison {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .executor-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .executor-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        }

        .executor-card h3 {
            color: #3182ce;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .pros-cons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .pros, .cons {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .pros {
            border-right: 4px solid #38a169;
        }

        .cons {
            border-right: 4px solid #e53e3e;
        }

        .pros h4 {
            color: #38a169;
            margin-bottom: 10px;
        }

        .cons h4 {
            color: #e53e3e;
            margin-bottom: 10px;
        }

        .timeline {
            position: relative;
            padding: 20px 0;
            margin: 30px 0;
        }

        .timeline::before {
            content: '';
            position: absolute;
            right: 50%;
            transform: translateX(50%);
            width: 4px;
            height: 100%;
            background: linear-gradient(to bottom, #3182ce, #9f7aea);
            border-radius: 2px;
        }

        .timeline-item {
            display: flex;
            align-items: center;
            margin: 30px 0;
            position: relative;
        }

        .timeline-item:nth-child(odd) {
            flex-direction: row-reverse;
        }

        .timeline-content {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            width: 45%;
            position: relative;
        }

        .timeline-marker {
            width: 20px;
            height: 20px;
            background: #3182ce;
            border-radius: 50%;
            position: absolute;
            right: 50%;
            transform: translateX(50%);
            z-index: 10;
        }

        .command-demo {
            background: #1a202c;
            color: #68d391;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', Monaco, monospace;
            margin: 20px 0;
            direction: ltr;
            text-align: left;
        }

        .command-demo::before {
            content: '$ ';
            color: #4fd1c7;
            font-weight: bold;
        }

        .tabs-container {
            margin: 30px 0;
        }

        .sub-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .sub-tab {
            background: #e2e8f0;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .sub-tab.active {
            background: #3182ce;
            color: white;
        }

        .sub-content {
            display: none;
        }

        .sub-content.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }

        .troubleshooting-list {
            counter-reset: step-counter;
        }

        .troubleshooting-item {
            counter-increment: step-counter;
            background: white;
            margin: 15px 0;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: relative;
        }

        .troubleshooting-item::before {
            content: counter(step-counter);
            position: absolute;
            right: -15px;
            top: -15px;
            background: #3182ce;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .template-example {
            background: linear-gradient(135deg, #e6fffa 0%, #b2f5ea 100%);
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            border-right: 4px solid #319795;
        }

        .branch-demo {
            background: linear-gradient(135deg, #fef5e7 0%, #fed7aa 100%);
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
        }

        .branch-button {
            background: #ed8936;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s ease;
        }

        .branch-button:hover {
            background: #c05621;
            transform: translateY(-2px);
        }

        .hidden-content {
            display: none;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #e2e8f0;
        }

        .hidden-content ul {
            margin: 10px 0;
            padding-right: 20px;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .nav-tabs {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                gap: 10px;
            }
            
            .nav-tab {
                padding: 10px 15px;
                font-size: 0.9rem;
            }
            
            .content-section {
                padding: 20px;
            }
            
            .concept-grid {
                grid-template-columns: 1fr;
            }
            
            .timeline::before {
                right: 20px;
            }
            
            .timeline-item {
                flex-direction: row !important;
                padding-right: 50px;
            }
            
            .timeline-content {
                width: 100%;
            }
            
            .timeline-marker {
                right: 20px;
                transform: translateX(50%);
            }

            .pros-cons {
                grid-template-columns: 1fr;
            }
        }

        .floating-elements {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .floating-element {
            position: absolute;
            width: 20px;
            height: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }
    </style>
</head>
<body>
    <div class="floating-elements"></div>
    
    <div class="container">
        <div class="header">
            <h1>Apache Airflow</h1>
            <div class="airflow-logo">🌀</div>
            <p style="font-size: 1.3rem; color: #4a5568; margin: 15px 0;">
                פלטפורמה לניהול, תזמון ומעקב אחר זרימות עבודה
            </p>
            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 15px; border-radius: 10px; margin-top: 20px;">
                <strong>מדריך מקיף ואינטראקטיבי ל-Apache Airflow</strong>
            </div>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showSection('basics')">יסודות Airflow</button>
            <button class="nav-tab" onclick="showSection('dags')">DAGs וזרימות עבודה</button>
            <button class="nav-tab" onclick="showSection('operators')">אופרטורים ומשימות</button>
            <button class="nav-tab" onclick="showSection('scheduling')">תזמון ומעקב</button>
            <button class="nav-tab" onclick="showSection('sensors')">חיישנים</button>
            <button class="nav-tab" onclick="showSection('executors')">מבצעים</button>
            <button class="nav-tab" onclick="showSection('templates')">תבניות ומשתנים</button>
            <button class="nav-tab" onclick="showSection('branching')">הסתעפות</button>
            <button class="nav-tab" onclick="showSection('troubleshooting')">פתרון בעיות</button>
            <button class="nav-tab" onclick="showSection('advanced')">נושאים מתקדמים</button>
        </div>

        <!-- Basics Section -->
        <div id="basics" class="content-section active">
            <h2 class="section-title">יסודות Apache Airflow</h2>
            
            <div class="concept-grid">
                <div class="concept-card" onclick="expandCard(this)">
                    <h3>🔄 מה זה Workflow?</h3>
                    <p>סט של שלבים לביצוע משימת הנדסת נתונים נתונה, כמו: הורדת קבצים, העתקת נתונים, סינון מידע, כתיבה למסד נתונים.</p>
                    <div class="hidden-content">
                        <strong>דוגמאות לזרימות עבודה:</strong>
                        <ul>
                            <li>עיבוד נתונים יומי</li>
                            <li>יצירת דוחות</li>
                            <li>גיבוי מסדי נתונים</li>
                            <li>סנכרון בין מערכות</li>
                        </ul>
                    </div>
                </div>
                
                <div class="concept-card" onclick="expandCard(this)">
                    <h3>🌟 מה זה Airflow?</h3>
                    <p>Airflow הוא פלטפורמה לתכנות זרימות עבודה, כולל: יצירה, תזמון ומעקב.</p>
                    <div class="hidden-content">
                        <strong>יכולות עיקריות:</strong>
                        <ul>
                            <li>יצירת זרימות עבודה מורכבות</li>
                            <li>תזמון אוטומטי</li>
                            <li>מעקב בזמן אמת</li>
                            <li>ממשק משתמש אינטואיטיבי</li>
                        </ul>
                    </div>
                </div>
                
                <div class="concept-card" onclick="expandCard(this)">
                    <h3>📊 מה זה DAG?</h3>
                    <p>DAG מייצג Directed Acyclic Graph - גרף מכוון ללא מעגלים המגדיר את סדר ביצוע המשימות.</p>
                    <div class="hidden-content">
                        <strong>מאפייני DAG:</strong>
                        <ul>
                            <li><strong>Directed:</strong> יש כיוון מובנה המייצג תלויות</li>
                            <li><strong>Acyclic:</strong> ללא לולאות או מעגלים</li>
                            <li><strong>Graph:</strong> הסט בפועל של הרכיבים</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="highlight-box">
                <h3>🎯 למה לבחור ב-Airflow?</h3>
                <p><strong>Airflow מספק פתרון מקיף לניהול זרימות עבודה:</strong></p>
                <ul style="margin: 15px 0; padding-right: 20px;">
                    <li>תזמון גמיש ומתקדם</li>
                    <li>מעקב וניטור בזמן אמת</li>
                    <li>קהילה פעילה ותמיכה רחבה</li>
                    <li>אינטגרציה עם כלים רבים</li>
                </ul>
            </div>

            <div class="command-demo">
                <p>הרצת משימה בסיסית ב-Airflow:</p>
                <code>airflow tasks test example_etl download_file 2024-01-10</code>
            </div>

            <div class="interactive-demo">
                <h3>🚀 נסה את Airflow</h3>
                <p>הכר את הפקודות הבסיסיות של Airflow</p>
                <button class="demo-button" onclick="showCommand('list')">רשימת DAGs</button>
                <button class="demo-button" onclick="showCommand('webserver')">הפעלת שרת אינטרנט</button>
                <button class="demo-button" onclick="showCommand('scheduler')">הפעלת מתזמן</button>
                
                <div id="command-output" style="display: none; margin-top: 20px; padding: 20px; background: rgba(255,255,255,0.2); border-radius: 10px; direction: ltr; text-align: left;">
                    <code id="command-text"></code>
                </div>
            </div>
        </div>

        <!-- DAGs Section -->
        <div id="dags" class="content-section">
            <h2 class="section-title">DAGs וזרימות עבודה</h2>
            
            <div class="concept-card">
                <h3>📝 הגדרת DAG בסיסי</h3>
                <p>בואו נלמד איך ליצור DAG פשוט ב-Airflow:</p>
            </div>

            <div class="code-snippet">
<pre># יבוא אובייקט ה-DAG
from airflow import DAG
from datetime import datetime

# הגדרת הארגומנטים ברירת המחדל
default_args = {
    'owner': 'dsmith',
    'start_date': datetime(2023, 1, 14),
    'retries': 2
}

# יצירת אובייקט ה-DAG
with DAG('example_etl', default_args=default_args) as etl_dag:
    pass</pre>
            </div>

            <div class="concept-grid">
                <div class="concept-card">
                    <h3>⚙️ רכיבי DAG</h3>
                    <p><strong>dag_id:</strong> מזהה יוניק ל-DAG<br>
                    <strong>default_args:</strong> ארגומנטים ברירת מחדל לכל המשימות<br>
                    <strong>schedule_interval:</strong> תדירות ההרצה</p>
                </div>
                
                <div class="concept-card">
                    <h3>📅 תזמון DAG</h3>
                    <p><strong>start_date:</strong> תאריך התחלה<br>
                    <strong>end_date:</strong> תאריך סיום (אופציונלי)<br>
                    <strong>max_tries:</strong> מספר ניסיונות מקסימלי</p>
                </div>
            </div>

            <div class="template-example">
                <h3>🔍 בדיקת DAGs במערכת</h3>
                <div class="command-demo">
                    airflow dags list
                </div>
                <p>פקודה זו מציגה את כל ה-DAGs הזמינים במערכת Airflow</p>
            </div>

            <div class="timeline">
                <h3 style="text-align: center; margin-bottom: 30px;">מחזור חיים של DAG</h3>
                <div class="timeline-item">
                    <div class="timeline-marker"></div>
                    <div class="timeline-content">
                        <h4>יצירה</h4>
                        <p>הגדרת המשימות והתלויות ביניהן</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-marker"></div>
                    <div class="timeline-content">
                        <h4>תזמון</h4>
                        <p>קביעת מועדי הרצה לפי לוח זמנים</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-marker"></div>
                    <div class="timeline-content">
                        <h4>ביצוע</h4>
                        <p>הרצת המשימות לפי הסדר הנדרש</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-marker"></div>
                    <div class="timeline-content">
                        <h4>מעקב</h4>
                        <p>ניטור התקדמות ותוצאות</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Operators Section -->
        <div id="operators" class="content-section">
            <h2 class="section-title">אופרטורים ומשימות</h2>
            
            <div class="concept-grid">
                <div class="concept-card">
                    <h3>🔧 מה זה אופרטור?</h3>
                    <p>אופרטור מייצג משימה יחידה בזרימת העבודה. הוא פועל באופן עצמאי ובדרך כלל לא חולק מידע עם אופרטורים אחרים.</p>
                </div>
                
                <div class="concept-card">
                    <h3>📋 מה זה Task?</h3>
                    <p>Task הוא מופע של אופרטור. בדרך כלל מוקצה למשתנה ב-Python ומזוהה על ידי task_id בכלי Airflow.</p>
                </div>
            </div>

            <div class="tabs-container">
                <div class="sub-tabs">
                    <button class="sub-tab active" onclick="showSubContent('bash-operator')">BashOperator</button>
                    <button class="sub-tab" onclick="showSubContent('python-operator')">PythonOperator</button>
                    <button class="sub-tab" onclick="showSubContent('email-operator')">EmailOperator</button>
                </div>

                <div id="bash-operator" class="sub-content active">
                    <div class="concept-card">
                        <h3>💻 BashOperator</h3>
                        <p>מבצע פקודת Bash או סקריפט נתון. רץ בתיקייה זמנית ויכול להגדיר משתני סביבה.</p>
                    </div>
                    
                    <div class="code-snippet">
<pre>from airflow.operators.bash import BashOperator

bash_task = BashOperator(
    task_id='print_date',
    bash_command='date',
    dag=my_dag
)</pre>
                    </div>
                </div>

                <div id="python-operator" class="sub-content">
                    <div class="concept-card">
                        <h3>🐍 PythonOperator</h3>
                        <p>מבצע פונקציית Python. דומה ל-BashOperator אבל עם אפשרויות נוספות והעברת ארגומנטים.</p>
                    </div>
                    
                    <div class="code-snippet">
<pre>from airflow.operators.python import PythonOperator

def my_function(**kwargs):
    print("Hello from Python!")
    return "Success"

python_task = PythonOperator(
    task_id='python_task',
    python_callable=my_function,
    provide_context=True,
    dag=my_dag
)</pre>
                    </div>
                    
                    <div class="highlight-box">
                        <strong>העברת פרמטרים:</strong>
                        <ul style="margin: 10px 0; padding-right: 20px;">
                            <li><strong>op_args:</strong> רשימת ארגומנטים פוזיציונליים</li>
                            <li><strong>op_kwargs:</strong> מילון של ארגומנטים עם שמות</li>
                        </ul>
                    </div>
                </div>

                <div id="email-operator" class="sub-content">
                    <div class="concept-card">
                        <h3>📧 EmailOperator</h3>
                        <p>שולח אימייל. יכול להכיל תוכן HTML וקבצים מצורפים. דורש הגדרת שרת מייל במערכת Airflow.</p>
                    </div>
                    
                    <div class="code-snippet">
<pre>from airflow.operators.email import EmailOperator

email_task = EmailOperator(
    task_id='send_email',
    to=['user@example.com'],
    subject='Airflow Report',
    html_content='<h1>Task Completed</h1>',
    dag=my_dag
)</pre>
                    </div>
                </div>
            </div>

            <div class="concept-card">
                <h3>🔗 תלויות בין משימות</h3>
                <p>תלויות מגדירות את סדר ביצוע המשימות. אמנם לא נדרשות בכל זרימה, אבל קיימות ברובן.</p>
            </div>

            <div class="code-snippet">
<pre># הגדרת תלויות
task_a >> task_b  # task_b יתבצע אחרי task_a
task_c << task_d  # task_c יתבצע לפני task_d

# תלויות מורכבות
task_a >> [task_b, task_c] >> task_d</pre>
            </div>

            <div class="interactive-demo">
                <h3>🎯 הדגמת תלויות</h3>
                <p>לחץ לראות איך תלויות משפיעות על סדר הביצוע</p>
                <button class="demo-button" onclick="showDependencyDemo()">הצג תלויות</button>
                
                <div id="dependency-demo" style="display: none; margin-top: 20px; padding: 20px; background: rgba(255,255,255,0.2); border-radius: 10px;">
                    <div style="text-align: center;">
                        <div style="display: inline-block; margin: 10px; padding: 10px 20px; background: #4fd1c7; border-radius: 10px;">Task A</div>
                        <div style="margin: 10px;">↓</div>
                        <div style="display: inline-block; margin: 10px; padding: 10px 20px; background: #63b3ed; border-radius: 10px;">Task B</div>
                        <div style="display: inline-block; margin: 10px; padding: 10px 20px; background: #63b3ed; border-radius: 10px;">Task C</div>
                        <div style="margin: 10px;">↓</div>
                        <div style="display: inline-block; margin: 10px; padding: 10px 20px; background: #68d391; border-radius: 10px;">Task D</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Scheduling Section -->
        <div id="scheduling" class="content-section">
            <h2 class="section-title">תזמון ומעקב</h2>
            
            <div class="concept-grid">
                <div class="concept-card">
                    <h3>📅 DAG Runs</h3>
                    <p>מופע ספציפי של זרימת עבודה בנקודת זמן מסוימת. יכול לרוץ ידנית או לפי לוח זמנים.</p>
                </div>
                
                <div class="concept-card">
                    <h3>⏰ מאפייני תזמון</h3>
                    <p><strong>start_date:</strong> תאריך התחלת התזמון<br>
                    <strong>schedule_interval:</strong> תדירות הרצה<br>
                    <strong>end_date:</strong> תאריך סיום (אופציונלי)</p>
                </div>
            </div>

            <div class="template-example">
                <h3>🕐 דוגמאות לתזמון</h3>
                <div class="code-snippet">
<pre># תזמון יומי
schedule_interval='@daily'

# תזמון שבועי
schedule_interval='@weekly'

# תזמון מותאם אישית (כל יום ב-6:30 בבוקר)
schedule_interval='30 6 * * *'

# ללא תזמון - הרצה ידנית בלבד
schedule_interval=None

# הרצה חד פעמית בלבד
schedule_interval='@once'</pre>
                </div>
            </div>

            <div class="concept-card">
                <h3>📊 מצבי הרצה</h3>
                <div style="margin: 15px 0;">
                    <div style="display: inline-block; margin: 5px; padding: 8px 15px; background: #fed7aa; border-radius: 15px; color: #9c4221;">🟡 Running</div>
                    <div style="display: inline-block; margin: 5px; padding: 8px 15px; background: #fed7d7; border-radius: 15px; color: #742a2a;">🔴 Failed</div>
                    <div style="display: inline-block; margin: 5px; padding: 8px 15px; background: #c6f6d5; border-radius: 15px; color: #22543d;">🟢 Success</div>
                </div>
            </div>

            <div class="highlight-box">
                <h3>⚙️ הפעלת שרת האינטרנט</h3>
                <div class="command-demo">
                    airflow webserver -p 9090
                </div>
                <p>פקודה זו מפעילה את ממשק המשתמש של Airflow על פורט 9090</p>
            </div>

            <div class="interactive-demo">
                <h3>🌐 ממשק האינטרנט של Airflow</h3>
                <p>המרכז לניהול ומעקב אחר זרימות העבודה</p>
                <button class="demo-button" onclick="showWebInterface()">הצג ממשק</button>
                
                <div id="web-interface" style="display: none; margin-top: 20px;">
                    <div style="background: rgba(255,255,255,0.9); padding: 20px; border-radius: 10px; color: #2d3748;">
                        <h4>תכונות הממשק:</h4>
                        <ul style="padding-right: 20px; margin: 10px 0;">
                            <li><strong>DAGs:</strong> סטטוס מהיר של מספר ה-DAGs הזמינים</li>
                            <li><strong>Owner:</strong> בעל ה-DAG</li>
                            <li><strong>Runs:</strong> הרצות האחרונות</li>
                            <li><strong>Schedule:</strong> לוח הזמנים</li>
                            <li><strong>Recent Tasks:</strong> המשימות האחרונות</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sensors Section -->
        <div id="sensors" class="content-section">
            <h2 class="section-title">חיישנים (Sensors)</h2>
            
            <div class="concept-card">
                <h3>🔍 מה זה חיישן?</h3>
                <p>אופרטור שמחכה לתנאי מסוים להתמלא - כמו יצירת קובץ, העלאת רשומה למסד נתונים או תגובה מסוימת מבקשת אינטרנט.</p>
            </div>

            <div class="concept-grid">
                <div class="concept-card">
                    <h3>⚙️ מאפייני חיישן</h3>
                    <p><strong>mode:</strong> אופן בדיקת התנאי<br>
                    <strong>poke_interval:</strong> זמן המתנה בין בדיקות<br>
                    <strong>timeout:</strong> זמן מקסימלי לפני כישלון</p>
                </div>
                
                <div class="concept-card">
                    <h3>📁 FileSensor</h3>
                    <p>בודק קיומו של קובץ במיקום מסוים. יכול גם לבדוק אם יש קבצים בתיקייה.</p>
                </div>
            </div>

            <div class="code-snippet">
<pre>from airflow.sensors.filesystem import FileSensor

file_sensor = FileSensor(
    task_id='check_file',
    filepath='/path/to/file.txt',
    poke_interval=60,  # בדיקה כל 60 שניות
    timeout=300,       # כישלון אחרי 5 דקות
    dag=my_dag
)</pre>
            </div>

            <div class="concept-grid">
                <div class="concept-card">
                    <h3>🌐 HttpSensor</h3>
                    <p>בודק תגובה מ-URL ספציפי</p>
                </div>
                
                <div class="concept-card">
                    <h3>🗄️ SqlSensor</h3>
                    <p>מריץ שאילתת SQL לבדיקת תוכן</p>
                </div>
                
                <div class="concept-card">
                    <h3>🔗 ExternalTaskSensor</h3>
                    <p>ממתין למשימה ב-DAG אחר להשלים</p>
                </div>
            </div>

            <div class="template-example">
                <h3>📚 מתי להשתמש בחיישנים?</h3>
                <div class="pros-cons">
                    <div class="pros">
                        <h4>כדאי להשתמש כשיש:</h4>
                        <ul style="padding-right: 20px;">
                            <li>אי ודאות לגבי זמן התנאי</li>
                            <li>אין רצון בכישלון מיידי</li>
                            <li>צורך בחזרה על משימה ללא לולאות</li>
                        </ul>
                    </div>
                    <div class="cons">
                        <h4>חסרונות אפשריים:</h4>
                        <ul style="padding-right: 20px;">
                            <li>צריכת משאבים במהלך ההמתנה</li>
                            <li>מורכבות נוספת בתזמון</li>
                            <li>קושי בהגדרת timeout מתאים</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="interactive-demo">
                <h3>🎮 סימולציית חיישן</h3>
                <p>ראה איך חיישן עובד במציאות</p>
                <button class="demo-button" onclick="simulateSensor()">הפעל חיישן</button>
                
                <div id="sensor-simulation" style="display: none; margin-top: 20px; padding: 20px; background: rgba(255,255,255,0.2); border-radius: 10px;">
                    <div id="sensor-status">🔍 מחפש קובץ...</div>
                    <div style="width: 100%; height: 10px; background: rgba(255,255,255,0.3); border-radius: 5px; margin: 10px 0;">
                        <div id="sensor-progress" style="height: 100%; background: #4fd1c7; border-radius: 5px; width: 0%; transition: width 1s ease;"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Executors Section -->
        <div id="executors" class="content-section">
            <h2 class="section-title">מבצעים (Executors)</h2>
            
            <div class="concept-card">
                <h3>⚡ מה זה מבצע?</h3>
                <p>מבצעים אחראים להרצת המשימות. מבצעים שונים מטפלים בהרצת המשימות באופנים שונים.</p>
            </div>

            <div class="executor-comparison">
                <div class="executor-card">
                    <h3>🔄 SequentialExecutor</h3>
                    <p><strong>מבצע ברירת המחדל של Airflow</strong></p>
                    <div class="pros-cons">
                        <div class="pros">
                            <h4>יתרונות:</h4>
                            <ul style="padding-right: 15px; font-size: 0.9rem;">
                                <li>פשוט להגדרה</li>
                                <li>טוב לדיבוג</li>
                                <li>לא דורש תלויות חיצוניות</li>
                            </ul>
                        </div>
                        <div class="cons">
                            <h4>חסרונות:</h4>
                            <ul style="padding-right: 15px; font-size: 0.9rem;">
                                <li>רק משימה אחת בכל פעם</li>
                                <li>לא מומלץ לייצור</li>
                                <li>ביצועים איטיים</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="executor-card">
                    <h3>🏠 LocalExecutor</h3>
                    <p><strong>רץ על מערכת יחידה</strong></p>
                    <div class="pros-cons">
                        <div class="pros">
                            <h4>יתרונות:</h4>
                            <ul style="padding-right: 15px; font-size: 0.9rem;">
                                <li>תמיכה במקביליות</li>
                                <li>כשיר לייצור</li>
                                <li>ניצול מלא של המשאבים</li>
                            </ul>
                        </div>
                        <div class="cons">
                            <h4>חסרונות:</h4>
                            <ul style="padding-right: 15px; font-size: 0.9rem;">
                                <li>מוגבל למכונה אחת</li>
                                <li>דורש מסד נתונים חיצוני</li>
                                <li>הרחבה מוגבלת</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="executor-card">
                    <h3>☸️ KubernetesExecutor</h3>
                    <p><strong>מערכת תזמור קונטיינרים</strong></p>
                    <div class="pros-cons">
                        <div class="pros">
                            <h4>יתרונות:</h4>
                            <ul style="padding-right: 15px; font-size: 0.9rem;">
                                <li>הרחבה דינמית</li>
                                <li>עמיד לכשלים</li>
                                <li>ביזול משאבים</li>
                            </ul>
                        </div>
                        <div class="cons">
                            <h4>חסרונות:</h4>
                            <ul style="padding-right: 15px; font-size: 0.9rem;">
                                <li>מורכבות הגדרה גבוהה</li>
                                <li>דורש ידע ב-Kubernetes</li>
                                <li>עלויות תשתית</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div class="interactive-demo">
                <h3>🔄 השוואת מבצעים</h3>
                <p>בחר מבצע לראות מאפיינים מפורטים</p>
                <button class="demo-button" onclick="showExecutorDetails('sequential')">Sequential</button>
                <button class="demo-button" onclick="showExecutorDetails('local')">Local</button>
                <button class="demo-button" onclick="showExecutorDetails('kubernetes')">Kubernetes</button>
                
                <div id="executor-details" style="display: none; margin-top: 20px; padding: 20px; background: rgba(255,255,255,0.9); border-radius: 10px; color: #2d3748;">
                    <div id="executor-info"></div>
                </div>
            </div>
        </div>

        <!-- Templates Section -->
        <div id="templates" class="content-section">
            <h2 class="section-title">תבניות ומשתנים</h2>
            
            <div class="concept-card">
                <h3>📝 מה זה תבניות?</h3>
                <p>תבניות מאפשרות החלפת מידע במהלך הרצת DAG ומספקות גמישות נוספת בהגדרת משימות. נוצרות באמצעות שפת התבניות Jinja.</p>
            </div>

            <div class="template-example">
                <h3>🔄 דוגמה ללא תבנית</h3>
                <div class="code-snippet">
<pre>list_files_task = BashOperator(
    task_id='list_files',
    bash_command='ls /data/files/',
    dag=my_dag
)</pre>
                </div>
            </div>

            <div class="template-example">
                <h3>✨ דוגמה עם תבנית</h3>
                <div class="code-snippet">
<pre>templated_command = """
bash cleandata.sh {{ ds_nodash }} {{ params.filename }}
"""

clean_task = BashOperator(
    task_id='cleandata_task',
    bash_command=templated_command,
    params={'filename': 'salesdata.txt'},
    dag=cleandata_dag
)</pre>
                </div>
            </div>

            <div class="concept-grid">
                <div class="concept-card">
                    <h3>📅 משתני זמן</h3>
                    <p><strong>{{ ds }}:</strong> תאריך הרצה (YYYY-MM-DD)<br>
                    <strong>{{ ds_nodash }}:</strong> תאריך ללא קווים<br>
                    <strong>{{ yesterday_ds }}:</strong> אתמול</p>
                </div>
                
                <div class="concept-card">
                    <h3>🔧 Macros</h3>
                    <p><strong>{{ macros.datetime }}:</strong> אובייקט datetime<br>
                    <strong>{{ macros.timedelta }}:</strong> אובייקט timedelta<br>
                    <strong>{{ macros.ds_add() }}:</strong> הוספת ימים לתאריך</p>
                </div>
            </div>

            <div class="code-snippet">
<pre># דוגמה מתקדמת לתבניות
filelist = [f'file{x}.txt' for x in range(30)]

templated_command = """
<% for filename in params.filenames %>
bash cleandata.sh {{ ds_nodash }} {{ filename }};
<% endfor %>
"""

clean_task = BashOperator(
    task_id='cleandata_task',
    bash_command=templated_command,
    params={'filenames': filelist},
    dag=cleandata_dag
)</pre>
            </div>

            <div class="highlight-box">
                <h3>🎯 משתנים מובנים</h3>
                <ul style="padding-right: 20px; margin: 10px 0;">
                    <li><strong>{{ dag }}:</strong> האובייקט DAG הנוכחי</li>
                    <li><strong>{{ task }}:</strong> האובייקט Task הנוכחי</li>
                    <li><strong>{{ ti }}:</strong> מופע המשימה (TaskInstance)</li>
                    <li><strong>{{ params }}:</strong> פרמטרים שהועברו למשימה</li>
                </ul>
            </div>
        </div>

        <!-- Branching Section -->
        <div id="branching" class="content-section">
            <h2 class="section-title">הסתעפות (Branching)</h2>
            
            <div class="concept-card">
                <h3>🌿 מה זה הסתעפות?</h3>
                <p>הסתעפות מספקת לוגיקה תנאית ב-Airflow באמצעות BranchPythonOperator שמחזיר את מזהה המשימה הבאה (או רשימת מזהים) לביצוע.</p>
            </div>

            <div class="code-snippet">
<pre>from airflow.operators.python import BranchPythonOperator

# יצירת פונקציה לקבלת החלטה
def year_check(**kwargs):
    current_year = int(kwargs['ds_nodash'][0:4])
    previous_year = int(kwargs['prev_ds_nodash'][0:4])
    
    if current_year == previous_year:
        return 'current_year_task'
    else:
        return 'new_year_task'

# הגדרת BranchPythonOperator
branch_task = BranchPythonOperator(
    task_id='branch_task',
    dag=branch_dag,
    python_callable=year_check,
    provide_context=True
)

# הגדרת התלויות
branch_task >> current_year_task
branch_task >> new_year_task</pre>
            </div>

            <div class="branch-demo">
                <h3>🎯 הדגמת הסתעפות</h3>
                <p>לחץ לראות איך הסתעפות עובדת</p>
                <button class="branch-button" onclick="simulateBranch('year')">בדיקת שנה</button>
                <button class="branch-button" onclick="simulateBranch('data')">בדיקת נתונים</button>
                
                <div id="branch-result" style="display: none; margin-top: 20px; padding: 20px; background: rgba(255,255,255,0.9); border-radius: 10px; color: #2d3748;">
                    <div id="branch-flow"></div>
                </div>
            </div>

            <div class="concept-grid">
                <div class="concept-card">
                    <h3>✅ מתי להשתמש בהסתעפות</h3>
                    <p>כאשר יש צורך בביצוע משימות שונות בהתאם לתנאים או נתונים זמינים.</p>
                </div>
                
                <div class="concept-card">
                    <h3>⚠️ דברים לזכור</h3>
                    <p>הפונקציה חייבת להחזיר task_id תקף, והמשימות שלא נבחרו יסומנו כ-"skipped".</p>
                </div>
            </div>
        </div>

        <!-- Troubleshooting Section -->
        <div id="troubleshooting" class="content-section">
            <h2 class="section-title">פתרון בעיות נפוצות</h2>
            
            <div class="troubleshooting-list">
                <div class="troubleshooting-item">
                    <h3>DAG לא רץ לפי לוח הזמנים</h3>
                    <p><strong>פתרונות אפשריים:</strong></p>
                    <ul style="padding-right: 20px; margin: 10px 0;">
                        <li>הרץ את <code>airflow scheduler</code> מהטרמינל</li>
                        <li>וודא שחלף לפחות schedule_interval אחד</li>
                        <li>בדוק שיש מספיק משימות פנויות במבצע</li>
                    </ul>
                </div>

                <div class="troubleshooting-item">
                    <h3>DAG לא נטען</h3>
                    <p><strong>סימנים:</strong> DAG לא מופיע בממשק האינטרנט או ב-<code>airflow dags list</code></p>
                    <p><strong>פתרונות:</strong></p>
                    <ul style="padding-right: 20px; margin: 10px 0;">
                        <li>ודא שהקובץ נמצא בתיקיית ה-DAGs הנכונה</li>
                        <li>בדוק את הגדרות airflow.cfg</li>
                        <li>וודא שהנתיב הוא נתיב מוחלט</li>
                    </ul>
                </div>

                <div class="troubleshooting-item">
                    <h3>שגיאות תחביר</h3>
                    <p><strong>הסיבה הנפוצה ביותר לכך שקובץ DAG לא מופיע</strong></p>
                    <p><strong>שיטות בדיקה:</strong></p>
                    <div class="command-demo">
                        airflow dags list-import-errors
                    </div>
                    <div class="command-demo">
                        python3 dagfile.py
                    </div>
                </div>
            </div>

            <div class="warning-box">
                <h3>⚠️ עצות חשובות לפתרון בעיות</h3>
                <ul style="padding-right: 20px; margin: 10px 0;">
                    <li>בדוק תמיד את הלוגים למידע מפורט על שגיאות</li>
                    <li>ודא שכל התלויות מותקנות</li>
                    <li>השתמש בסביבת פיתוח לבדיקת קוד לפני העלאה לייצור</li>
                    <li>שמור גיבויים של DAGs עובדים</li>
                </ul>
            </div>

            <div class="interactive-demo">
                <h3>🔧 כלי אבחון</h3>
                <p>בדוק את מצב המערכת</p>
                <button class="demo-button" onclick="runDiagnostic('dags')">בדוק DAGs</button>
                <button class="demo-button" onclick="runDiagnostic('scheduler')">בדוק מתזמן</button>
                <button class="demo-button" onclick="runDiagnostic('webserver')">בדוק שרת אינטרנט</button>
                
                <div id="diagnostic-result" style="display: none; margin-top: 20px; padding: 20px; background: rgba(255,255,255,0.9); border-radius: 10px; color: #2d3748;">
                    <div id="diagnostic-output"></div>
                </div>
            </div>
        </div>

        <!-- Advanced Section -->
        <div id="advanced" class="content-section">
            <h2 class="section-title">נושאים מתקדמים</h2>
            
            <div class="concept-grid">
                <div class="concept-card">
                    <h3>🔐 אבטחה ב-Airflow</h3>
                    <p>הגדרת הרשאות, חיבורים בטוחים, הצפנת נתונים וניהול סודות.</p>
                </div>
                
                <div class="concept-card">
                    <h3>📈 מעקב וניטור</h3>
                    <p>אינטגרציה עם כלי ניטור, התראות, מטריקות וביצועים.</p>
                </div>
                
                <div class="concept-card">
                    <h3>🔄 אינטגרציה עם מערכות</h3>
                    <p>חיבור למסדי נתונים, כלי BI, מערכות אחסון ושירותי ענן.</p>
                </div>
            </div>

            <div class="code-snippet">
<pre># דוגמה להגדרת Connection למסד נתונים
from airflow.providers.postgres.operators.postgres import PostgresOperator

db_task = PostgresOperator(
    task_id='run_sql',
    postgres_conn_id='my_postgres_connection',
    sql="""
    SELECT * FROM sales_data 
    WHERE date = '{{ ds }}'
    """,
    dag=my_dag
)</pre>
            </div>

            <div class="highlight-box">
                <h3>🎯 טיפים לייצור</h3>
                <ul style="padding-right: 20px; margin: 10px 0;">
                    <li>השתמש ב-LocalExecutor או KubernetesExecutor</li>
                    <li>הגדר מסד נתונים חיצוני (PostgreSQL/MySQL)</li>
                    <li>הפעל מעקב ולוגים מרכזיים</li>
                    <li>הגדר גיבויים קבועים</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // Navigation functions
        function showSection(sectionId) {
            // Hide all sections
            const sections = document.querySelectorAll('.content-section');
            sections.forEach(section => section.classList.remove('active'));
            
            // Hide all nav tabs
            const tabs = document.querySelectorAll('.nav-tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // Show selected section
            document.getElementById(sectionId).classList.add('active');
            
            // Highlight selected tab
            event.target.classList.add('active');
        }

        // Sub-tab navigation
        function showSubContent(contentId) {
            // Hide all sub-content
            const subContents = document.querySelectorAll('.sub-content');
            subContents.forEach(content => content.classList.remove('active'));
            
            // Remove active class from all sub-tabs
            const subTabs = document.querySelectorAll('.sub-tab');
            subTabs.forEach(tab => tab.classList.remove('active'));
            
            // Show selected content
            document.getElementById(contentId).classList.add('active');
            
            // Highlight selected sub-tab
            event.target.classList.add('active');
        }

        // Expand concept cards
        function expandCard(card) {
            const hiddenContent = card.querySelector('.hidden-content');
            if (hiddenContent) {
                if (hiddenContent.style.display === 'none' || hiddenContent.style.display === '') {
                    hiddenContent.style.display = 'block';
                    card.style.backgroundColor = '#e6fffa';
                } else {
                    hiddenContent.style.display = 'none';
                    card.style.backgroundColor = '';
                }
            }
        }

        // Command demonstrations
        function showCommand(type) {
            const output = document.getElementById('command-output');
            const text = document.getElementById('command-text');
            
            let command = '';
            switch(type) {
                case 'list':
                    command = 'airflow dags list\n\nexample_etl\ndata_processing_dag\nreport_generator\netl_pipeline';
                    break;
                case 'webserver':
                    command = 'airflow webserver -p 8080\n\n[2024-01-15 10:30:00] Starting web server on port 8080\n[2024-01-15 10:30:01] Web server ready at http://localhost:8080';
                    break;
                case 'scheduler':
                    command = 'airflow scheduler\n\n[2024-01-15 10:30:00] Starting scheduler\n[2024-01-15 10:30:01] Scheduler is running...';
                    break;
            }
            
            text.textContent = command;
            output.style.display = 'block';
        }

        // Dependency demo
        function showDependencyDemo() {
            const demo = document.getElementById('dependency-demo');
            if (demo.style.display === 'none' || demo.style.display === '') {
                demo.style.display = 'block';
                
                // Animate the dependency flow
                const tasks = demo.querySelectorAll('div[style*="background"]');
                tasks.forEach((task, index) => {
                    setTimeout(() => {
                        task.style.boxShadow = '0 0 20px #ffd700';
                        setTimeout(() => {
                            task.style.boxShadow = '';
                        }, 1000);
                    }, index * 500);
                });
            } else {
                demo.style.display = 'none';
            }
        }

        // Web interface demo
        function showWebInterface() {
            const interface = document.getElementById('web-interface');
            if (interface.style.display === 'none' || interface.style.display === '') {
                interface.style.display = 'block';
            } else {
                interface.style.display = 'none';
            }
        }

        // Sensor simulation
        function simulateSensor() {
            const simulation = document.getElementById('sensor-simulation');
            const status = document.getElementById('sensor-status');
            const progress = document.getElementById('sensor-progress');
            
            simulation.style.display = 'block';
            progress.style.width = '0%';
            
            let width = 0;
            const interval = setInterval(() => {
                width += 10;
                progress.style.width = width + '%';
                
                if (width <= 30) {
                    status.textContent = '🔍 מחפש קובץ...';
                } else if (width <= 60) {
                    status.textContent = '⏳ ממתין לקובץ...';
                } else if (width <= 90) {
                    status.textContent = '🔄 בודק שוב...';
                } else {
                    status.textContent = '✅ קובץ נמצא!';
                    status.style.color = '#38a169';
                    clearInterval(interval);
                }
            }, 300);
        }

        // Executor details
        function showExecutorDetails(type) {
            const details = document.getElementById('executor-details');
            const info = document.getElementById('executor-info');
            
            let content = '';
            switch(type) {
                case 'sequential':
                    content = `
                        <h4>🔄 SequentialExecutor</h4>
                        <p><strong>מתאים לפיתוח ובדיקות בלבד</strong></p>
                        <ul>
                            <li>מבצע משימה אחת בכל פעם</li>
                            <li>לא דורש הגדרות מיוחדות</li>
                            <li>משתמש ב-SQLite כברירת מחדל</li>
                            <li>לא מתאים לסביבת ייצור</li>
                        </ul>
                    `;
                    break;
                case 'local':
                    content = `
                        <h4>🏠 LocalExecutor</h4>
                        <p><strong>מתאים לסביבות ייצור קטנות-בינוניות</strong></p>
                        <ul>
                            <li>תמיכה במקביליות מלאה</li>
                            <li>דורש מסד נתונים חיצוני</li>
                            <li>מנצל את כל המעבדים במכונה</li>
                            <li>קל יחסית להגדרה</li>
                        </ul>
                    `;
                    break;
                case 'kubernetes':
                    content = `
                        <h4>☸️ KubernetesExecutor</h4>
                        <p><strong>מתאים לסביבות ייצור גדולות</strong></p>
                        <ul>
                            <li>הרחבה אוטומטית לפי צורך</li>
                            <li>ביזול משאבים מלא</li>
                            <li>עמידות גבוהה לכשלים</li>
                            <li>מורכבות הגדרה גבוהה</li>
                        </ul>
                    `;
                    break;
            }
            
            info.innerHTML = content;
            details.style.display = 'block';
        }

        // Branch simulation
        function simulateBranch(type) {
            const result = document.getElementById('branch-result');
            const flow = document.getElementById('branch-flow');
            
            let content = '';
            if (type === 'year') {
                const currentYear = new Date().getFullYear();
                content = `
                    <h4>🎯 תוצאת הסתעפות - בדיקת שנה</h4>
                    <div style="text-align: center; margin: 20px 0;">
                        <div style="display: inline-block; margin: 10px; padding: 10px 20px; background: #4fd1c7; border-radius: 10px;">Branch Task</div>
                        <div style="margin: 10px;">↓</div>
                        <div style="margin: 10px;">🔍 בדיקה: השנה הנוכחית ${currentYear}</div>
                        <div style="margin: 10px;">↓</div>
                        <div style="display: inline-block; margin: 10px; padding: 10px 20px; background: #68d391; border-radius: 10px;">Current Year Task</div>
                        <div style="display: inline-block; margin: 10px; padding: 10px 20px; background: #fed7aa; border-radius: 10px; opacity: 0.5;">New Year Task (Skipped)</div>
                    </div>
                `;
            } else {
                content = `
                    <h4>🎯 תוצאת הסתעפות - בדיקת נתונים</h4>
                    <div style="text-align: center; margin: 20px 0;">
                        <div style="display: inline-block; margin: 10px; padding: 10px 20px; background: #4fd1c7; border-radius: 10px;">Branch Task</div>
                        <div style="margin: 10px;">↓</div>
                        <div style="margin: 10px;">🔍 בדיקה: נתונים זמינים</div>
                        <div style="margin: 10px;">↓</div>
                        <div style="display: inline-block; margin: 10px; padding: 10px 20px; background: #68d391; border-radius: 10px;">Process Data Task</div>
                        <div style="display: inline-block; margin: 10px; padding: 10px 20px; background: #fed7aa; border-radius: 10px; opacity: 0.5;">Wait for Data Task (Skipped)</div>
                    </div>
                `;
            }
            
            flow.innerHTML = content;
            result.style.display = 'block';
        }

        // Diagnostic tools
        function runDiagnostic(type) {
            const result = document.getElementById('diagnostic-result');
            const output = document.getElementById('diagnostic-output');
            
            let content = '';
            switch(type) {
                case 'dags':
                    content = `
                        <h4>🔍 בדיקת DAGs</h4>
                        <div style="font-family: monospace; background: #2d3748; color: #68d391; padding: 15px; border-radius: 8px; margin: 10px 0;">
                        $ airflow dags list
                        
                        DAG_ID               | FILE_LOC                    | OWNER    | PAUSED
                        example_etl          | /dags/example_etl.py       | admin    | False
                        data_processing      | /dags/data_proc.py         | data_eng | False
                        report_generator     | /dags/reports.py           | analyst  | True
                        
                        ✅ נמצאו 3 DAGs, 2 פעילים
                        </div>
                    `;
                    break;
                case 'scheduler':
                    content = `
                        <h4>⏰ בדיקת מתזמן</h4>
                        <div style="font-family: monospace; background: #2d3748; color: #68d391; padding: 15px; border-radius: 8px; margin: 10px 0;">
                        $ ps aux | grep scheduler
                        
                        airflow  1234  0.5  2.1  scheduler --daemon
                        
                        ✅ המתזמן פועל
                        📊 עיבד 45 משימות ב-24 השעות האחרונות
                        ⏱️  זמן תגובה ממוצע: 2.3 שניות
                        </div>
                    `;
                    break;
                case 'webserver':
                    content = `
                        <h4>🌐 בדיקת שרת אינטרנט</h4>
                        <div style="font-family: monospace; background: #2d3748; color: #68d391; padding: 15px; border-radius: 8px; margin: 10px 0;">
                        $ curl -I http://localhost:8080
                        
                        HTTP/1.1 200 OK
                        Server: gunicorn/20.1.0
                        Date: Mon, 15 Jan 2024 10:30:00 GMT
                        
                        ✅ שרת האינטרנט זמין על פורט 8080
                        👥 5 משתמשים מחוברים כעת
                        📈 99.2% זמינות ב-30 הימים האחרונים
                        </div>
                    `;
                    break;
            }
            
            output.innerHTML = content;
            result.style.display = 'block';
        }

        // Create floating elements for background animation
        function createFloatingElements() {
            const container = document.querySelector('.floating-elements');
            for (let i = 0; i < 15; i++) {
                const element = document.createElement('div');
                element.className = 'floating-element';
                element.style.left = Math.random() * 100 + '%';
                element.style.top = Math.random() * 100 + '%';
                element.style.animationDelay = Math.random() * 6 + 's';
                element.style.animationDuration = (Math.random() * 3 + 4) + 's';
                container.appendChild(element);
            }
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            createFloatingElements();
        });
    </script>
</body>
</html>
                