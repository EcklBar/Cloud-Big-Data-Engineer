<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elastic Stack - ×”××“×¨×™×š ×”××™× ×˜×¨××§×˜×™×‘×™ ×”××§×™×£</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Heebo:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Elastic Brand Colors */
            --elastic-yellow: #FEC514;
            --elastic-green: #00BFB3;
            --elastic-pink: #F04E98;
            --elastic-blue: #0077CC;
            --elastic-accent: #36a2eb;

            /* UI Colors */
            --primary-dark: #1a1c20;
            --bg-body: #f4f6f8;
            --bg-surface: #ffffff;
            --text-primary: #1a202c;
            --text-secondary: #4a5568;
            --text-tertiary: #718096;
            --border-color: #e2e8f0;

            /* Code */
            --code-bg: #1e293b;
            --code-text: #e2e8f0;

            /* Effects */
            --radius-lg: 16px;
            --radius-md: 8px;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Heebo', 'Inter', sans-serif;
            background: var(--bg-body);
            color: var(--text-primary);
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* === HEADER === */
        header {
            background: var(--bg-surface);
            border-bottom: 2px solid var(--border-color);
            padding: 0 40px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-shrink: 0;
            box-shadow: var(--shadow-sm);
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .brand-logo {
            width: 45px;
            height: 45px;
            background: linear-gradient(135deg, var(--elastic-blue), var(--elastic-green));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 800;
            font-size: 20px;
            box-shadow: 0 4px 10px rgba(0, 119, 204, 0.3);
        }

        .header-logo {
            font-size: 0.75rem;
            font-weight: 600;
            letter-spacing: 2px;
            color: var(--text-tertiary);
            margin-bottom: 5px;
        }

        .brand-text h1 {
            font-size: 1.3rem;
            margin: 0;
            font-weight: 800;
            background: linear-gradient(90deg, var(--elastic-blue), var(--elastic-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .brand-text p {
            font-size: 0.8rem;
            color: var(--text-tertiary);
            margin: 0;
        }

        /* === TABS === */
        .nav-tabs {
            display: flex;
            gap: 10px;
            background: #f1f5f9;
            padding: 6px;
            border-radius: var(--radius-md);
        }

        .nav-item {
            padding: 10px 28px;
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--text-secondary);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .nav-item:hover {
            color: var(--text-primary);
            background: rgba(255, 255, 255, 0.5);
        }

        .nav-item.active {
            background: white;
            color: var(--elastic-blue);
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
        }

        /* === MAIN CONTENT === */
        .main-wrapper {
            flex: 1;
            overflow: hidden;
            position: relative;
        }

        .view-section {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            overflow-y: auto;
            padding: 40px;
            display: none;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .view-section.active {
            display: block;
            opacity: 1;
        }

        /* === CARDS === */
        .content-card {
            background: var(--bg-surface);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
            overflow: hidden;
            margin-bottom: 30px;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .content-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .card-header {
            padding: 24px 30px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(to left, #ffffff, #fafafa);
        }

        .card-header h2 {
            margin: 0;
            font-size: 1.2rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .card-body {
            padding: 30px;
        }

        /* === BUTTONS === */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 12px 24px;
            font-size: 0.95rem;
            font-weight: 600;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Heebo', sans-serif;
        }

        .btn-primary {
            background: var(--elastic-blue);
            color: white;
            box-shadow: 0 4px 10px rgba(0, 119, 204, 0.3);
        }

        .btn-primary:hover {
            background: #0062a8;
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0, 119, 204, 0.4);
        }

        .btn-primary:disabled {
            background: #cbd5e0;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: white;
            border: 2px solid var(--border-color);
            color: var(--text-primary);
        }

        .btn-secondary:hover {
            border-color: var(--elastic-blue);
            background: #f0f9ff;
        }

        /* === PIPELINE SIMULATOR === */
        .pipeline-track {
            position: relative;
            display: flex;
            justify-content: space-between;
            margin: 50px 0;
            padding: 0 60px;
            min-height: 200px;
        }

        .pipeline-line {
            position: absolute;
            top: 50%;
            right: 80px;
            left: 80px;
            height: 3px;
            background: linear-gradient(to left, var(--border-color), var(--elastic-blue), var(--border-color));
            z-index: 0;
            border-radius: 10px;
        }

        .pipeline-stage {
            position: relative;
            z-index: 2;
            background: var(--bg-surface);
            border: 2px solid var(--border-color);
            padding: 25px;
            border-radius: 16px;
            width: 200px;
            text-align: center;
            box-shadow: var(--shadow-md);
            transition: all 0.3s;
        }

        .pipeline-stage:hover {
            transform: translateY(-8px) scale(1.05);
            border-color: var(--elastic-blue);
            box-shadow: 0 10px 30px rgba(0, 119, 204, 0.2);
        }

        .stage-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            display: block;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
        }

        .stage-title {
            font-weight: 700;
            font-size: 1.1rem;
            color: var(--text-primary);
            display: block;
            margin-bottom: 5px;
        }

        .stage-desc {
            font-size: 0.8rem;
            color: var(--text-tertiary);
            display: block;
        }

        .packet {
            width: 20px;
            height: 20px;
            background: var(--elastic-yellow);
            border: 3px solid white;
            box-shadow: 0 0 0 2px var(--elastic-blue), 0 4px 10px rgba(254, 197, 20, 0.5);
            border-radius: 50%;
            position: absolute;
            top: 50%;
            right: 0;
            transform: translate(50%, -50%);
            z-index: 10;
            display: none;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: translate(50%, -50%) scale(1); }
            50% { transform: translate(50%, -50%) scale(1.2); }
        }

        /* === CLUSTER VISUALIZATION === */
        .cluster-visual {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .node-box {
            background: linear-gradient(135deg, #f8fafc, #ffffff);
            border: 2px dashed var(--border-color);
            border-radius: 16px;
            padding: 20px;
            min-height: 150px;
            transition: all 0.3s;
            box-shadow: var(--shadow-sm);
        }

        .node-box:hover {
            border-color: var(--elastic-blue);
            background: #f0f9ff;
            transform: translateY(-3px);
            box-shadow: var(--shadow-md);
        }

        .node-header {
            font-size: 0.85rem;
            font-weight: 700;
            color: var(--text-secondary);
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }

        .shard {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 42px;
            height: 42px;
            border-radius: 8px;
            font-size: 0.75rem;
            font-weight: 700;
            margin: 5px;
            animation: popIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            cursor: help;
            transition: transform 0.2s;
        }

        .shard:hover {
            transform: scale(1.15);
        }

        .shard.primary {
            background: linear-gradient(135deg, var(--elastic-blue), var(--elastic-accent));
            color: white;
            box-shadow: 0 4px 10px rgba(0, 119, 204, 0.3);
        }

        .shard.replica {
            background: white;
            border: 2px solid var(--elastic-blue);
            color: var(--elastic-blue);
            box-shadow: 0 2px 6px rgba(0, 119, 204, 0.2);
        }

        @keyframes popIn {
            from { transform: scale(0) rotate(180deg); opacity: 0; }
            to { transform: scale(1) rotate(0deg); opacity: 1; }
        }

        /* === INPUT === */
        .input-field {
            flex: 1;
            padding: 14px 20px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            transition: all 0.3s;
            direction: ltr;
            text-align: left;
        }

        .input-field:focus {
            outline: none;
            border-color: var(--elastic-blue);
            box-shadow: 0 0 0 3px rgba(0, 119, 204, 0.1);
        }

        /* === OUTPUT BOX === */
        .output-box {
            background: var(--code-bg);
            border: 1px solid #334155;
            padding: 20px;
            border-radius: 12px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            color: var(--code-text);
            min-height: 100px;
            direction: ltr;
            text-align: left;
        }

        /* === KIBANA PANEL === */
        .kibana-panel {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        .kibana-discover {
            height: 180px;
            overflow-y: auto;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            padding: 15px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            background: white;
        }

        .log-entry {
            padding: 8px 0;
            border-bottom: 1px solid #f1f5f9;
        }

        .chart-container {
            height: 180px;
            display: flex;
            align-items: flex-end;
            justify-content: space-around;
            border-bottom: 3px solid var(--border-color);
            padding: 0 20px;
        }

        .chart-bar {
            width: 60px;
            background: var(--elastic-blue);
            height: 0%;
            transition: height 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            border-radius: 8px 8px 0 0;
            box-shadow: 0 -2px 10px rgba(0, 119, 204, 0.2);
            position: relative;
        }

        .chart-label {
            display: flex;
            justify-content: space-around;
            font-size: 0.75rem;
            margin-top: 10px;
            color: var(--text-tertiary);
            font-weight: 600;
        }

        /* === EXERCISES === */
        .exercise-list {
            display: flex;
            flex-direction: column;
            gap: 25px;
            max-width: 1000px;
            margin: 0 auto;
        }

        .exercise-card {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 30px;
            box-shadow: var(--shadow-sm);
            transition: all 0.3s;
        }

        .exercise-card:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
        }

        .ex-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            gap: 20px;
        }

        .ex-number {
            background: linear-gradient(135deg, var(--elastic-blue), var(--elastic-green));
            color: white;
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: 700;
            font-size: 0.8rem;
            box-shadow: 0 2px 6px rgba(0, 119, 204, 0.3);
        }

        .ex-title {
            font-weight: 700;
            font-size: 1.1rem;
            color: var(--text-primary);
            flex: 1;
        }

        .reveal-btn {
            background: transparent;
            border: 2px solid var(--elastic-blue);
            color: var(--elastic-blue);
            padding: 8px 20px;
            border-radius: 8px;
            font-size: 0.85rem;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            font-family: 'Heebo', sans-serif;
        }

        .reveal-btn:hover {
            background: var(--elastic-blue);
            color: white;
        }

        .solution-box {
            display: none;
            background: var(--code-bg);
            color: var(--code-text);
            padding: 25px;
            border-radius: 12px;
            margin-top: 20px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            line-height: 1.8;
            white-space: pre-wrap;
            word-break: break-word;
            overflow-x: auto;
            border-right: 4px solid var(--elastic-yellow);
            box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.3);
            direction: ltr;
            text-align: left;
        }

        /* === API REFERENCE === */
        .api-grid {
            display: grid;
            gap: 25px;
            max-width: 1000px;
            margin: 0 auto;
        }

        .api-item {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: var(--shadow-sm);
            transition: all 0.3s;
        }

        .api-item:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
        }

        .api-item-header {
            padding: 20px 25px;
            background: #fcfcfc;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .method-badge {
            font-family: 'JetBrains Mono', monospace;
            font-weight: 700;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 0.8rem;
            text-transform: uppercase;
        }

        .badge-get { background: #eff6ff; color: #3b82f6; border: 2px solid #3b82f6; }
        .badge-post { background: #f0fdf4; color: #22c55e; border: 2px solid #22c55e; }
        .badge-put { background: #fff7ed; color: #f97316; border: 2px solid #f97316; }
        .badge-delete { background: #fef2f2; color: #ef4444; border: 2px solid #ef4444; }

        .endpoint {
            font-family: 'JetBrains Mono', monospace;
            color: var(--text-primary);
            font-size: 0.9rem;
            font-weight: 500;
        }

        .api-item-body {
            padding: 25px;
        }

        .code-snippet {
            background: var(--code-bg);
            color: var(--code-text);
            padding: 20px;
            border-radius: 8px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            margin-top: 15px;
            white-space: pre-wrap;
            direction: ltr;
            text-align: left;
            box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        /* === THEORY SIDEBAR === */
        .theory-layout {
            display: grid;
            grid-template-columns: 280px 1fr;
            gap: 0;
            height: 100%;
            max-width: 1400px;
            margin: 0 auto;
        }

        .theory-sidebar {
            background: white;
            border-left: 1px solid var(--border-color);
            padding: 30px 0;
            overflow-y: auto;
        }

        .theory-nav-item {
            padding: 14px 30px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.95rem;
            font-weight: 500;
            border-right: 3px solid transparent;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .theory-nav-item:hover {
            background: #f8fafc;
            color: var(--text-primary);
        }

        .theory-nav-item.active {
            background: #f0f9ff;
            color: var(--elastic-blue);
            border-right-color: var(--elastic-blue);
            font-weight: 600;
        }

        .theory-content {
            padding: 40px;
            overflow-y: auto;
        }

        .theory-section {
            display: none;
            animation: fadeIn 0.3s;
        }

        .theory-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .theory-section h1 {
            font-size: 2rem;
            margin-bottom: 25px;
            color: var(--text-primary);
            font-weight: 800;
        }

        .theory-section h2 {
            font-size: 1.5rem;
            margin: 30px 0 20px 0;
            color: var(--text-primary);
            font-weight: 700;
        }

        .theory-section h3 {
            font-size: 1.2rem;
            margin: 25px 0 15px 0;
            color: var(--elastic-blue);
            font-weight: 600;
        }

        .theory-section p, .theory-section li {
            line-height: 1.8;
            color: var(--text-secondary);
            margin-bottom: 15px;
        }

        .theory-section ul, .theory-section ol {
            padding-right: 25px;
        }

        .info-card {
            background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
            border: 2px solid var(--elastic-blue);
            border-radius: 12px;
            padding: 25px;
            margin: 25px 0;
        }

        .concept-highlight {
            background: white;
            border-right: 4px solid var(--elastic-yellow);
            padding: 20px 25px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: var(--shadow-sm);
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin: 25px 0;
        }

        .comparison-card {
            background: white;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            padding: 25px;
            transition: all 0.3s;
        }

        .comparison-card:hover {
            border-color: var(--elastic-blue);
            transform: translateY(-3px);
            box-shadow: var(--shadow-md);
        }

        .comparison-card h4 {
            margin: 0 0 15px 0;
            color: var(--elastic-blue);
            font-size: 1.1rem;
            font-weight: 700;
        }

        /* === SEARCH === */
        .search-result-item {
            padding: 12px;
            margin: 8px 0;
            background: #f8f9fa;
            border-radius: 8px;
            border-right: 4px solid var(--elastic-blue);
            cursor: pointer;
            transition: all 0.3s;
        }

        .search-result-item:hover {
            background: #e9ecef;
            transform: translateX(-4px);
        }

        .search-highlight {
            background: var(--elastic-yellow);
            color: #000;
            padding: 2px 4px;
            border-radius: 3px;
            font-weight: 600;
        }

        /* === COPY NOTIFICATION === */
        .copy-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--elastic-green);
            color: white;
            padding: 12px 20px;
            border-radius: 6px;
            transform: translateX(400px);
            transition: transform 0.3s;
            z-index: 1000;
            box-shadow: var(--shadow-lg);
            font-weight: 600;
        }

        .copy-notification.show {
            transform: translateX(0);
        }

        /* === TABLES === */
        .reference-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-size: 0.9rem;
            box-shadow: var(--shadow-sm);
            background: white;
        }

        .reference-table thead {
            background: linear-gradient(to left, #f0f9ff, #dbeafe);
            border-bottom: 2px solid var(--elastic-blue);
        }

        .reference-table th {
            padding: 14px;
            text-align: right;
            border: 1px solid var(--border-color);
            font-weight: 700;
        }

        .reference-table td {
            padding: 12px;
            border: 1px solid var(--border-color);
        }

        .reference-table tr:hover {
            background: #f8f9fa;
        }

        .reference-table code {
            background: #e0f2fe;
            padding: 3px 8px;
            border-radius: 4px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            color: var(--elastic-blue);
            direction: ltr;
        }

        /* === WARNING/SUCCESS BOXES === */
        .warning-box {
            background: linear-gradient(135deg, #fff7ed, #fed7aa);
            border: 2px solid #fb923c;
            border-radius: var(--radius-md);
            padding: 25px;
            margin: 25px 0;
        }

        .success-box {
            background: linear-gradient(135deg, #d1fae5, #a7f3d0);
            border: 2px solid var(--elastic-green);
            border-radius: var(--radius-md);
            padding: 25px;
            margin: 25px 0;
        }

        /* === DARK MODE === */
        body.dark-mode {
            --bg-body: #1a1c20;
            --bg-surface: #2d3748;
            --text-primary: #e2e8f0;
            --text-secondary: #cbd5e1;
            --text-tertiary: #94a3b8;
            --border-color: #4a5568;
            background: #1a1c20;
            color: #e2e8f0;
        }

        body.dark-mode header {
            background: #2d3748;
            border-bottom-color: #4a5568;
        }

        body.dark-mode .brand-text h1 {
            -webkit-text-fill-color: var(--elastic-blue);
        }

        body.dark-mode .nav-tabs {
            background: #1e293b;
        }

        body.dark-mode .nav-item:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #e2e8f0;
        }

        body.dark-mode .nav-item.active {
            background: #374151;
            color: var(--elastic-blue);
        }

        body.dark-mode .content-card,
        body.dark-mode .comparison-card,
        body.dark-mode .exercise-card,
        body.dark-mode .api-item {
            background: #2d3748;
            border-color: #4a5568;
        }

        body.dark-mode .card-header,
        body.dark-mode .api-item-header {
            background: linear-gradient(to left, #2d3748, #374151);
            border-bottom-color: #4a5568;
        }

        body.dark-mode .info-card {
            background: rgba(0, 119, 204, 0.15);
            border-color: var(--elastic-blue);
        }

        body.dark-mode .warning-box {
            background: rgba(251, 146, 60, 0.15);
            border-color: #fb923c;
        }

        body.dark-mode .success-box {
            background: rgba(0, 191, 179, 0.15);
            border-color: var(--elastic-green);
        }

        body.dark-mode .concept-highlight {
            background: #374151;
            border-right-color: var(--elastic-yellow);
        }

        body.dark-mode .theory-sidebar {
            background: #2d3748;
            border-color: #4a5568;
        }

        body.dark-mode .theory-nav-item:hover {
            background: #374151;
        }

        body.dark-mode .theory-nav-item.active {
            background: rgba(0, 119, 204, 0.2);
        }

        body.dark-mode .pipeline-stage,
        body.dark-mode .node-box {
            background: #374151;
            border-color: #4a5568;
        }

        body.dark-mode .pipeline-line {
            background: linear-gradient(to left, #4a5568, var(--elastic-blue), #4a5568);
        }

        body.dark-mode .kibana-discover {
            background: #1e293b;
            border-color: #4a5568;
        }

        body.dark-mode .input-field {
            background: #374151;
            color: #e2e8f0;
            border-color: #4a5568;
        }

        body.dark-mode .btn-secondary {
            background: #374151;
            border-color: #4a5568;
            color: #e2e8f0;
        }

        body.dark-mode .btn-secondary:hover {
            background: #4b5563;
            border-color: var(--elastic-blue);
        }

        body.dark-mode .reference-table {
            background: #2d3748;
        }

        body.dark-mode .reference-table thead {
            background: linear-gradient(to left, #1e3a5f, #2c4a6f);
        }

        body.dark-mode .reference-table tr:hover {
            background: #374151;
        }

        body.dark-mode .reference-table code {
            background: #1e293b;
            color: var(--elastic-accent);
        }

        body.dark-mode #searchBar {
            background: #2d3748;
            border-color: #4a5568;
        }

        body.dark-mode #searchInput {
            background: #374151;
            color: #e2e8f0;
            border-color: #4a5568;
        }

        body.dark-mode .search-result-item {
            background: #374151;
        }

        body.dark-mode .search-result-item:hover {
            background: #4b5563;
        }

        body.dark-mode #darkModeToggle {
            background: #374151;
            border-color: #4a5568;
            color: #e2e8f0;
        }

        body.dark-mode button[onclick="toggleSearch()"] {
            background: #374151;
            border-color: #4a5568;
            color: #e2e8f0;
        }

        /* === RESPONSIVE === */
        @media (max-width: 768px) {
            .nav-tabs { flex-wrap: wrap; }
            .pipeline-track { flex-direction: column; padding: 20px; }
            .pipeline-stage { width: 100%; margin-bottom: 20px; }
            .kibana-panel { grid-template-columns: 1fr; }
            .cluster-visual { grid-template-columns: 1fr; }
            .theory-layout { grid-template-columns: 1fr; }
            .theory-sidebar { display: none; }
        }

        /* === SCROLLBAR === */
        ::-webkit-scrollbar { width: 10px; height: 10px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; }
        ::-webkit-scrollbar-thumb { background: #cbd5e0; border-radius: 5px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
    </style>
</head>
<body>

<header>
    <div class="brand">
        <div class="brand-logo">ES</div>
        <div class="brand-text">
            <div class="header-logo">DATA ENGINEERING HUB</div>
            <h1>Elastic Stack - ××“×¨×™×š ××§×™×£</h1>
            <p>×—×™×¤×•×© ×•× ×™×ª×•×— ××‘×•×–×¨ | ××“×¨×™×š ××™× ×˜×¨××§×˜×™×‘×™</p>
        </div>
    </div>

    <div class="nav-tabs">
        <div class="nav-item active" onclick="switchView('simulator', this)">ğŸ® ×¡×™××•×œ×˜×•×¨</div>
        <div class="nav-item" onclick="switchView('theory', this)">ğŸ“š ×ª×™××•×¨×™×”</div>
        <div class="nav-item" onclick="switchView('api', this)">âš™ï¸ API Reference</div>
        <div class="nav-item" onclick="switchView('lab', this)">ğŸ’ª ×ª×¨×’×™×œ×™×</div>
        <div class="nav-item" onclick="switchView('cli', this)">âŒ¨ï¸ CLI & cURL</div>
        <div class="nav-item" onclick="switchView('troubleshooting', this)">ğŸ”§ ×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª</div>
        <div class="nav-item" onclick="switchView('quickref', this)">ğŸ“‹ Quick Reference</div>
    </div>

    <div style="display: flex; gap: 15px; align-items: center;">
        <button id="darkModeToggle" onclick="toggleDarkMode()" style="background: rgba(0,0,0,0.05); border: 2px solid var(--border-color); padding: 10px 20px; border-radius: 8px; color: var(--text-primary); cursor: pointer; font-weight: 600; transition: all 0.3s; font-family: 'Heebo', sans-serif;">
            ğŸŒ™ ××¦×‘ ×œ×™×œ×”
        </button>
        <button onclick="toggleSearch()" style="background: rgba(0,0,0,0.05); border: 2px solid var(--border-color); padding: 10px 20px; border-radius: 8px; color: var(--text-primary); cursor: pointer; font-weight: 600; transition: all 0.3s; font-family: 'Heebo', sans-serif;">
            ğŸ” ×—×™×¤×•×©
        </button>
    </div>
</header>

<!-- Search Bar -->
<div id="searchBar" style="display: none; background: white; padding: 20px 40px; border-bottom: 2px solid var(--border-color); box-shadow: var(--shadow-md); z-index: 99;">
    <div style="max-width: 800px; margin: 0 auto; display: flex; gap: 15px; align-items: center;">
        <input type="text" id="searchInput" placeholder="×—×¤×© queries, aggregations, API calls..." style="flex: 1; padding: 12px 20px; font-size: 1rem; border: 2px solid var(--border-color); border-radius: 8px; font-family: 'Heebo', sans-serif;" oninput="performSearch(this.value)">
        <button onclick="toggleSearch()" style="padding: 12px 24px; background: var(--elastic-blue); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; font-family: 'Heebo', sans-serif;">×¡×’×•×¨</button>
    </div>
    <div id="searchResults" style="max-width: 800px; margin: 15px auto 0; max-height: 400px; overflow-y: auto;"></div>
</div>

<div class="main-wrapper">

    <!-- === THEORY VIEW === -->
    <div id="view-theory" class="view-section">
        <div class="theory-layout">
            <aside class="theory-sidebar">
                <div class="theory-nav-item active" onclick="showTheorySection('intro', this)">
                    <span>ğŸ¯</span> ××‘×•× ×œ-Elastic Stack
                </div>
                <div class="theory-nav-item" onclick="showTheorySection('what-is', this)">
                    <span>ğŸ”</span> ××”×• Elasticsearch?
                </div>
                <div class="theory-nav-item" onclick="showTheorySection('elk-stack', this)">
                    <span>ğŸ“¦</span> ELK Stack
                </div>
                <div class="theory-nav-item" onclick="showTheorySection('architecture', this)">
                    <span>ğŸ—ï¸</span> ××¨×›×™×˜×§×˜×•×¨×”
                </div>
                <div class="theory-nav-item" onclick="showTheorySection('sharding', this)">
                    <span>ğŸ—‚ï¸</span> Sharding & Replication
                </div>
                <div class="theory-nav-item" onclick="showTheorySection('inverted-index', this)">
                    <span>âš¡</span> Inverted Index
                </div>
                <div class="theory-nav-item" onclick="showTheorySection('documents', this)">
                    <span>ğŸ“„</span> Documents & Fields
                </div>
                <div class="theory-nav-item" onclick="showTheorySection('mappings', this)">
                    <span>ğŸ—ºï¸</span> Mappings
                </div>
                <div class="theory-nav-item" onclick="showTheorySection('queries', this)">
                    <span>ğŸ”</span> ×¡×•×’×™ Queries
                </div>
                <div class="theory-nav-item" onclick="showTheorySection('aggregations', this)">
                    <span>ğŸ“Š</span> Aggregations
                </div>
                <div class="theory-nav-item" onclick="showTheorySection('kibana-deep', this)">
                    <span>ğŸ“ˆ</span> Kibana ××ª×§×“×
                </div>
                <div class="theory-nav-item" onclick="showTheorySection('beats-types', this)">
                    <span>ğŸµ</span> ×¡×•×’×™ Beats
                </div>
                <div class="theory-nav-item" onclick="showTheorySection('best-practices', this)">
                    <span>âœ¨</span> Best Practices
                </div>
            </aside>

            <main class="theory-content">

                <!-- ××‘×•× -->
                <div id="theory-intro" class="theory-section active">
                    <h1>ğŸ¯ ××‘×•× ×œ-Elastic Stack</h1>

                    <div class="info-card">
                        <h3>××”×• Elastic Stack?</h3>
                        <p><strong>Elastic Stack</strong> (×”××›×•× ×” ×’× ELK Stack) ×”×•× ××•×¡×£ ×›×œ×™× ×œ× ×™×”×•×œ, ×¢×™×‘×•×“, ××—×¡×•×Ÿ ×•× ×™×ª×•×— × ×ª×•× ×™× ×‘×–××Ÿ ×××ª.</p>
                    </div>

                    <h2>×”×¨×›×™×‘×™× ×”×¢×™×§×¨×™×™×</h2>
                    <div class="comparison-grid">
                        <div class="comparison-card">
                            <h4>ğŸ” Elasticsearch</h4>
                            <p>×× ×•×¢ ×—×™×¤×•×© ×•× ×™×ª×•×— ××‘×•×–×¨ ×”×××¤×©×¨ ××—×¡×•×Ÿ, ×—×™×¤×•×© ×•× ×™×ª×•×— ×›××•×™×•×ª ×’×“×•×œ×•×ª ×©×œ × ×ª×•× ×™× ×‘×–××Ÿ ×××ª.</p>
                        </div>
                        <div class="comparison-card">
                            <h4>ğŸ“Š Kibana</h4>
                            <p>×××©×§ ×•×™×–×•××œ×™ ×œ×—×™×¤×•×©, ×¦×¤×™×™×” ×•× ×™×ª×•×— ×”× ×ª×•× ×™× ×”××’×•×¨×™× ×‘-Elasticsearch.</p>
                        </div>
                        <div class="comparison-card">
                            <h4>âš™ï¸ Logstash</h4>
                            <p>×¦×™× ×•×¨ ×¢×™×‘×•×“ × ×ª×•× ×™× ×œ××™×¡×•×£, ×¢×™×‘×•×“ ×•×”×¢×‘×¨×ª × ×ª×•× ×™× × ××§×•×¨×•×ª ×©×•× ×™× ×œ-Elasticsearch.</p>
                        </div>
                        <div class="comparison-card">
                            <h4>ğŸ“¦ Beats</h4>
                            <p>×¡×•×›× ×™× ×§×œ×™ ××©×§×œ ×œ×©×œ×™×—×ª × ×ª×•× ×™× ××××•×ª ××• ××œ×¤×™ ××›×•× ×•×ª ×œ-Logstash ××• Elasticsearch.</p>
                        </div>
                    </div>

                    <h2>×ª×¨×—×™×©×™ ×©×™××•×© × ×¤×•×¦×™×</h2>
                    <ul>
                        <li><strong>× ×™×ª×•×— ×œ×•×’×™×</strong> - ×¨×™×›×•×– ×•× ×™×ª×•×— ×œ×•×’×™× ××›×œ ×”××¢×¨×›×•×ª ×‘××¨×’×•×Ÿ</li>
                        <li><strong>Application Performance Monitoring (APM)</strong> - ××¢×§×‘ ××—×¨ ×‘×™×¦×•×¢×™ ××¤×œ×™×§×¦×™×•×ª</li>
                        <li><strong>Security Analytics</strong> - ×–×™×”×•×™ ××™×•××™× ×•× ×™×ª×•×— ××‘×˜×—×”</li>
                        <li><strong>Business Analytics</strong> - × ×™×ª×•×— × ×ª×•× ×™× ×¢×¡×§×™×™× ×‘×–××Ÿ ×××ª</li>
                        <li><strong>Full-Text Search</strong> - ×—×™×¤×•×© ×˜×§×¡×˜ ××œ× ×‘××ª×¨×™× ×•××¤×œ×™×§×¦×™×•×ª</li>
                    </ul>
                </div>

                <!-- ××”×• Elasticsearch -->
                <div id="theory-what-is" class="theory-section">
                    <h1>ğŸ” ××”×• Elasticsearch?</h1>

                    <div class="info-card">
                        <p><strong>Elasticsearch</strong> ×”×•× ×× ×•×¢ ×—×™×¤×•×© ×•× ×™×ª×•×— ××‘×•×–×¨, ×‘× ×•×™ ×¢×œ Apache Lucene, ×”×××¤×©×¨ ××—×¡×•×Ÿ, ×—×™×¤×•×© ×•× ×™×ª×•×— × ×ª×•× ×™× ×‘×–××Ÿ ×›××¢×˜-×××™×ª×™ (Near Real-Time).</p>
                    </div>

                    <h2>×××¤×™×™× ×™× ×¢×™×§×¨×™×™×</h2>

                    <h3>ğŸŒ ××‘×•×–×¨ (Distributed)</h3>
                    <p>Elasticsearch ×‘× ×•×™ ×œ×”×™×•×ª ××‘×•×–×¨ ××”×”×ª×—×œ×”. ×”×•× ×××¤×©×¨ ×œ×”×¤×™×¥ × ×ª×•× ×™× ×¢×œ ×¤× ×™ ××¡×¤×¨ servers (nodes) ×•×œ×”×¨×—×™×‘ ××ª ×”××¢×¨×›×ª ××•×¤×§×™×ª.</p>

                    <h3>âš¡ Near Real-Time (NRT)</h3>
                    <p>×™×© ×–××Ÿ ×”×©×”×™×” ×§×˜×Ÿ (×‘×“×¨×š ×›×œ×œ ×©× ×™×™×” ××—×ª) ××¨×’×¢ ×©××ª×” ××× ×“×§×¡ document ×¢×“ ×©×”×•× ×”×•×¤×š × ×™×ª×Ÿ ×œ×—×™×¤×•×©.</p>

                    <h3>ğŸ“ Schema-Free</h3>
                    <p>××™×Ÿ ×¦×•×¨×š ×œ×”×’×“×™×¨ schema ××¨××©. Elasticsearch ×™×•×¦×¨ ××•×˜×•××˜×™×ª mapping ×¢×œ ×‘×¡×™×¡ ×”××‘× ×” ×©×œ ×”-documents ×©× ×©×œ×—×™×.</p>

                    <h3>ğŸ”„ RESTful API</h3>
                    <p>×›×œ ×”×¤×¢×•×œ×•×ª ××ª×‘×¦×¢×•×ª ×“×¨×š REST API ×¤×©×•×˜, ×‘×××¦×¢×•×ª JSON over HTTP.</p>

                    <div class="concept-highlight">
                        <h4>ğŸ’¡ ×œ××” Elasticsearch ×›×œ ×›×š ××”×™×¨?</h4>
                        <p>×”×¡×•×“ × ××¦× ×‘××‘× ×” ×”-<strong>Inverted Index</strong> ×©×××¤×©×¨ ×—×™×¤×•×© ××”×™×¨ ×‘×™×•×ª×¨ ××¤×™×œ×• ×¢×œ ××™×œ×™××¨×“×™ documents.</p>
                    </div>
                </div>

                <!-- ELK Stack -->
                <div id="theory-elk-stack" class="theory-section">
                    <h1>ğŸ“¦ ELK Stack - ×ª×”×œ×™×š ×¢×‘×•×“×” ××œ×</h1>

                    <h2>1ï¸âƒ£ Beats - ××™×¡×•×£ × ×ª×•× ×™×</h2>
                    <div class="concept-highlight">
                        <h4>ğŸµ ××”× Beats?</h4>
                        <p>Beats ×”× data shippers ×§×œ×™× ×©××ª×” ××ª×§×™×Ÿ ×›-agents ×¢×œ ×”×©×¨×ª×™× ×©×œ×š ×œ×©×œ×™×—×ª × ×ª×•× ×™× ×ª×¤×¢×•×œ×™×™×.</p>
                    </div>

                    <h3>×¡×•×’×™ Beats ×¤×•×¤×•×œ×¨×™×™×:</h3>
                    <ul>
                        <li><strong>Filebeat</strong> - ×œ×•×’×™× ××§×‘×¦×™×</li>
                        <li><strong>Metricbeat</strong> - metrics ××¢×¨×›×ª ×•×©×™×¨×•×ª×™×</li>
                        <li><strong>Packetbeat</strong> - × ×ª×•× ×™ ×¨×©×ª</li>
                        <li><strong>Heartbeat</strong> - uptime monitoring</li>
                        <li><strong>Auditbeat</strong> - audit data</li>
                    </ul>

                    <h2>2ï¸âƒ£ Logstash - ×¢×™×‘×•×“ × ×ª×•× ×™×</h2>
                    <div class="concept-highlight">
                        <h4>âš™ï¸ ××” ×¢×•×©×” Logstash?</h4>
                        <p>Logstash ×”×•× data processing pipeline ×©××§×‘×œ × ×ª×•× ×™×, ××¢×‘×“ ××•×ª× (parsing, filtering, enrichment) ×•×©×•×œ×— ××•×ª× ×œ-Elasticsearch.</p>
                    </div>

                    <h3>×©×œ×‘×™ Logstash Pipeline:</h3>
                    <ul>
                        <li><strong>Input</strong> - ×§×‘×œ×ª × ×ª×•× ×™× ×××§×•×¨×•×ª ×©×•× ×™×</li>
                        <li><strong>Filter</strong> - ×¢×™×‘×•×“ ×•×©×™× ×•×™ ×”× ×ª×•× ×™× (grok, mutate, date)</li>
                        <li><strong>Output</strong> - ×©×œ×™×—×ª ×”× ×ª×•× ×™× ×”××¢×•×‘×“×™× ×œ×™×¢×“ (Elasticsearch)</li>
                    </ul>

                    <h2>3ï¸âƒ£ Elasticsearch - ××—×¡×•×Ÿ ×•×—×™×¤×•×©</h2>
                    <p>×”× ×ª×•× ×™× ×”××¢×•×‘×“×™× × ×©××¨×™× ×‘-Elasticsearch ×‘××‘× ×” ××•×¤×˜×™××œ×™ ×œ×—×™×¤×•×© ××”×™×¨.</p>

                    <h2>4ï¸âƒ£ Kibana - ×•×™×–×•××œ×™×–×¦×™×” ×•× ×™×ª×•×—</h2>
                    <div class="concept-highlight">
                        <h4>ğŸ“Š ×™×›×•×œ×•×ª Kibana:</h4>
                        <ul>
                            <li><strong>Discover</strong> - ×—×™×¤×•×© ×•×¡×™× ×•×Ÿ × ×ª×•× ×™×</li>
                            <li><strong>Visualize</strong> - ×™×¦×™×¨×ª ×ª×¨×©×™××™× ×•×’×¨×¤×™×</li>
                            <li><strong>Dashboard</strong> - ×¦×™×¨×•×£ visualizations ×œ-dashboards</li>
                            <li><strong>Canvas</strong> - ×™×¦×™×¨×ª infographics</li>
                            <li><strong>Maps</strong> - ×•×™×–×•××œ×™×–×¦×™×” ×’×™××•×’×¨×¤×™×ª</li>
                        </ul>
                    </div>
                </div>

                <!-- ××¨×›×™×˜×§×˜×•×¨×” -->
                <div id="theory-architecture" class="theory-section">
                    <h1>ğŸ—ï¸ ××¨×›×™×˜×§×˜×•×¨×ª Elasticsearch</h1>

                    <h2>××‘× ×” Cluster</h2>
                    <div class="info-card">
                        <p><strong>Cluster</strong> ×”×•× ××•×¡×£ ×©×œ nodes (×©×¨×ª×™×) ×©×¢×•×‘×“×™× ×™×—×“ ×•××—×–×™×§×™× ××ª ×›×œ ×”× ×ª×•× ×™× ×©×œ×š.</p>
                        <p>×›×œ cluster ××–×•×”×” ×¢×œ ×™×“×™ ×©× ×™×™×—×•×“×™ (×‘×¨×™×¨×ª ××—×“×œ: "elasticsearch").</p>
                    </div>

                    <h3>ğŸ–¥ï¸ ×¡×•×’×™ Nodes</h3>
                    <div class="comparison-grid">
                        <div class="comparison-card">
                            <h4>Master Node</h4>
                            <p>××—×¨××™ ×¢×œ ×¤×¢×•×œ×•×ª × ×™×”×•×œ ×‘×¨××ª ×”-cluster: ×™×¦×™×¨×ª/××—×™×§×ª indices, ××¢×§×‘ ××—×¨ nodes, ×”×§×¦××ª shards.</p>
                        </div>
                        <div class="comparison-card">
                            <h4>Data Node</h4>
                            <p>××—×–×™×§ data ×•××‘×¦×¢ ×¤×¢×•×œ×•×ª ×”×§×©×•×¨×•×ª ×œ× ×ª×•× ×™×: CRUD, search, aggregations.</p>
                        </div>
                        <div class="comparison-card">
                            <h4>Ingest Node</h4>
                            <p>××‘×¦×¢ pre-processing ×¢×œ documents ×œ×¤× ×™ ×”-indexing.</p>
                        </div>
                        <div class="comparison-card">
                            <h4>Coordinating Node</h4>
                            <p>×× ×ª×‘ requests, ××‘×¦×¢ reduce phase ×©×œ search, ××¤×–×¨ bulk indexing.</p>
                        </div>
                    </div>

                    <h2>Index, Document, Field</h2>
                    <div class="concept-highlight">
                        <h4>ğŸ“Š ×× ×œ×•×’×™×” ×œ××¡×“ × ×ª×•× ×™×:</h4>
                        <ul>
                            <li><strong>Index</strong> â‰ˆ Database</li>
                            <li><strong>Document</strong> â‰ˆ Row/Record</li>
                            <li><strong>Field</strong> â‰ˆ Column</li>
                        </ul>
                    </div>

                    <h3>Index</h3>
                    <p>××•×¡×£ ×©×œ documents ×¢× ×××¤×™×™× ×™× ×“×•××™×. ×œ×“×•×’××”: index ×©×œ logs, index ×©×œ users.</p>

                    <h3>Document</h3>
                    <p>×™×—×™×“×ª ×”××™×“×¢ ×”×‘×¡×™×¡×™×ª ×©× ×™×ª×Ÿ ×œ×× ×“×§×¡. ×–×” JSON object.</p>

                    <h3>Field</h3>
                    <p>××¤×ª×—-×¢×¨×š ×‘×ª×•×š document. ×œ×›×œ field ×™×© data type.</p>
                </div>

                <!-- Sharding & Replication -->
                <div id="theory-sharding" class="theory-section">
                    <h1>ğŸ—‚ï¸ Sharding & Replication</h1>

                    <h2>×œ××” ×¦×¨×™×š Sharding?</h2>
                    <div class="info-card">
                        <p>Index ×™×›×•×œ ×œ×”×›×™×œ ×›××•×ª ×’×“×•×œ×” ×©×œ × ×ª×•× ×™× ×©×¢×œ×•×œ×” ×œ×¢×‘×•×¨ ××ª ××’×‘×œ×•×ª ×”×—×•××¨×” ×©×œ node ×‘×•×“×“.</p>
                        <p><strong>Sharding</strong> ×××¤×©×¨ ×œ×¤×¦×œ ××ª ×”-index ×œ××¡×¤×¨ ×—×œ×§×™× (shards) ×©×™×›×•×œ×™× ×œ×”×™×•×ª ×××•×›×¡× ×™× ×¢×œ nodes ×©×•× ×™×.</p>
                    </div>

                    <h3>âœ… ×™×ª×¨×•× ×•×ª Sharding:</h3>
                    <ul>
                        <li><strong>Scale horizontally</strong> - ×”×•×¡×¤×ª ×™×•×ª×¨ × ×ª×•× ×™× ××¢×‘×¨ ×œ×™×›×•×œ×ª ×©×œ node ×‘×•×“×“</li>
                        <li><strong>Parallelism</strong> - ×¤×¢×•×œ×•×ª (×—×™×¤×•×©, indexing) ×™×›×•×œ×•×ª ×œ×¨×•×¥ ×‘××§×‘×™×œ ×¢×œ shards ×©×•× ×™×</li>
                        <li><strong>Performance</strong> - ×—×œ×•×§×ª ×”×¢×•××¡ ×¢×œ nodes ××¨×•×‘×™×</li>
                    </ul>

                    <h2>Primary vs Replica Shards</h2>
                    <div class="comparison-grid">
                        <div class="comparison-card">
                            <h4>Primary Shard</h4>
                            <p>×›×œ document ×©×™×™×š ×œ-primary shard ××—×“. ××¡×¤×¨ ×”-primary shards × ×§×‘×¢ ×‘×¢×ª ×™×¦×™×¨×ª ×”-index.</p>
                        </div>
                        <div class="comparison-card">
                            <h4>Replica Shard</h4>
                            <p>×¢×•×ª×§ ×©×œ primary shard. ××¡×¤×§ high availability ×‘××§×¨×” ×©×œ ×›×©×œ, ×•×××¤×©×¨ ×œ×”×’×“×™×œ ××ª throughput ×©×œ queries.</p>
                        </div>
                    </div>

                    <h3>ğŸ¯ Replica Shards - ×œ××”?</h3>
                    <ul>
                        <li><strong>High Availability</strong> - ×× node × ×•×¤×œ, ×”× ×ª×•× ×™× ×¢×“×™×™×Ÿ ×–××™× ×™×</li>
                        <li><strong>Scalability</strong> - search queries ×™×›×•×œ×™× ×œ×¨×•×¥ ×¢×œ ×›×œ ×”×¨×¤×œ×™×§×•×ª ×‘××§×‘×™×œ</li>
                    </ul>

                    <div class="concept-highlight">
                        <h4>âš ï¸ ×›×œ×œ ×—×©×•×‘:</h4>
                        <p>Replica shard ×œ×¢×•×œ× ×œ× ×™×•×§×¦×” ×œ××•×ª×• node ×›××• ×”-primary shard ×©×œ×• (×œ×× ×™×¢×ª data loss).</p>
                    </div>
                </div>

                <!-- Inverted Index -->
                <div id="theory-inverted-index" class="theory-section">
                    <h1>âš¡ Inverted Index - ×”×§×¡× ×××—×•×¨×™ ×”××”×™×¨×•×ª</h1>

                    <div class="info-card">
                        <p><strong>Inverted Index</strong> ×”×•× ××‘× ×” ×”× ×ª×•× ×™× ×”××¨×›×–×™ ×©×¢×•×©×” ××ª Elasticsearch ×›×œ ×›×š ××”×™×¨.</p>
                    </div>

                    <h2>××™×š ×–×” ×¢×•×‘×“?</h2>
                    <p>×‘××§×•× ×œ×©××•×¨ "document â†’ ××™×œ×™×", Elasticsearch ×©×•××¨ "××™×œ×” â†’ documents".</p>

                    <h3>×“×•×’××”:</h3>
                    <div class="concept-highlight">
                        <p><strong>Doc 1:</strong> "The quick brown fox"</p>
                        <p><strong>Doc 2:</strong> "The quick blue rabbit"</p>
                        <p><strong>Doc 3:</strong> "The slow brown turtle"</p>

                        <h4 style="margin-top: 20px;">Inverted Index:</h4>
                        <ul style="font-family: 'JetBrains Mono', monospace; direction: ltr; text-align: left;">
                            <li>the â†’ [1, 2, 3]</li>
                            <li>quick â†’ [1, 2]</li>
                            <li>brown â†’ [1, 3]</li>
                            <li>fox â†’ [1]</li>
                            <li>blue â†’ [2]</li>
                            <li>rabbit â†’ [2]</li>
                            <li>slow â†’ [3]</li>
                            <li>turtle â†’ [3]</li>
                        </ul>
                    </div>

                    <p>×¢×›×©×™×• ×›×©××ª×” ××—×¤×© "brown", Elasticsearch ×™×•×“×¢ ××™×“ ×©×–×” ××•×¤×™×¢ ×‘-documents 1 ×•-3 - ×‘×œ×™ ×œ×¢×‘×•×¨ ×¢×œ ×›×œ ×”-documents!</p>

                    <h2>×ª×”×œ×™×š Indexing</h2>
                    <ol>
                        <li><strong>Analysis</strong> - ×”×˜×§×¡×˜ ××¤×•×¦×œ ×œ××™×œ×™× (tokens)</li>
                        <li><strong>Normalization</strong> - lowercase, ×”×¡×¨×ª × ×™×§×•×“ ×•×›×•'</li>
                        <li><strong>Indexing</strong> - ×™×¦×™×¨×ª ×”-inverted index</li>
                    </ol>
                </div>

                <!-- Documents & Fields -->
                <div id="theory-documents" class="theory-section">
                    <h1>ğŸ“„ Documents & Fields</h1>

                    <h2>××”×• Document?</h2>
                    <div class="info-card">
                        <p>Document ×”×•× ×™×—×™×“×ª ×”××™×“×¢ ×”×‘×¡×™×¡×™×ª ×‘-Elasticsearch. ×–×” JSON object ×©××›×™×œ fields.</p>
                    </div>

                    <h3>×“×•×’××ª Document:</h3>
                    <div class="code-snippet" style="background: var(--code-bg); color: var(--code-text); padding: 20px; border-radius: 8px; font-family: 'JetBrains Mono', monospace; direction: ltr; text-align: left; margin: 20px 0;">{
  "_index": "users",
  "_id": "1",
  "_source": {
    "name": "Lev Beck",
    "email": "lev@example.com",
    "age": 30,
    "joined": "2024-01-15",
    "interests": ["data", "elasticsearch", "coding"]
  }
}</div>

                    <h2>Metadata Fields</h2>
                    <ul>
                        <li><strong>_index</strong> - ××™×–×” index ×”-document ×©×™×™×š ××œ×™×•</li>
                        <li><strong>_id</strong> - ××–×”×” ×™×™×—×•×“×™ ×©×œ ×”-document</li>
                        <li><strong>_source</strong> - ×”-JSON ×”××§×•×¨×™ ×©× ×©×œ×—</li>
                        <li><strong>_score</strong> - relevance score ×‘×—×™×¤×•×©</li>
                    </ul>

                    <h2>Field Data Types</h2>
                    <div class="comparison-grid">
                        <div class="comparison-card">
                            <h4>×˜×§×¡×˜</h4>
                            <ul>
                                <li><strong>text</strong> - full-text search</li>
                                <li><strong>keyword</strong> - exact values</li>
                            </ul>
                        </div>
                        <div class="comparison-card">
                            <h4>××¡×¤×¨×™×</h4>
                            <ul>
                                <li><strong>long, integer, short, byte</strong></li>
                                <li><strong>double, float</strong></li>
                            </ul>
                        </div>
                        <div class="comparison-card">
                            <h4>×ª××¨×™×›×™× ×•×‘×•×œ×™×× ×™×</h4>
                            <ul>
                                <li><strong>date</strong></li>
                                <li><strong>boolean</strong></li>
                            </ul>
                        </div>
                        <div class="comparison-card">
                            <h4>××•×¨×›×‘×™×</h4>
                            <ul>
                                <li><strong>object</strong> - JSON object</li>
                                <li><strong>nested</strong> - array of objects</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Mappings -->
                <div id="theory-mappings" class="theory-section">
                    <h1>ğŸ—ºï¸ Mappings</h1>

                    <div class="info-card">
                        <p><strong>Mapping</strong> ××’×“×™×¨ ××™×š documents ×•-fields ×©×œ×”× ×××•×—×¡× ×™× ×•×××•× ×“×§×¡×™×.</p>
                        <p>×–×” ×‘×¢×¨×š ×›××• schema ×‘××¡×“ × ×ª×•× ×™× ×¨×œ×¦×™×•× ×™.</p>
                    </div>

                    <h2>Dynamic Mapping</h2>
                    <p>Elasticsearch ×™×›×•×œ ×œ×”×¡×™×§ ××•×˜×•××˜×™×ª ××ª ×”-mapping ×¢×œ ×‘×¡×™×¡ ×”× ×ª×•× ×™× ×©× ×©×œ×—×™×:</p>
                    <ul>
                        <li>String â†’ text + keyword</li>
                        <li>Number â†’ long/double</li>
                        <li>Boolean â†’ boolean</li>
                        <li>Date string â†’ date</li>
                    </ul>

                    <h2>Explicit Mapping</h2>
                    <p>××ª×” ×™×›×•×œ (×•××•××œ×¥ ×‘×¤×¨×•×“×§×©×Ÿ) ×œ×”×’×“×™×¨ mapping ××¤×•×¨×©:</p>
                    <div class="code-snippet" style="background: var(--code-bg); color: var(--code-text); padding: 20px; border-radius: 8px; font-family: 'JetBrains Mono', monospace; direction: ltr; text-align: left; margin: 20px 0;">PUT /my-index
{
  "mappings": {
    "properties": {
      "title": { "type": "text" },
      "author": { "type": "keyword" },
      "pages": { "type": "integer" },
      "published": { "type": "date" }
    }
  }
}</div>

                    <h3>âš ï¸ ×—×©×•×‘ ×œ×“×¢×ª:</h3>
                    <div class="concept-highlight">
                        <p>×œ× × ×™×ª×Ÿ ×œ×©× ×•×ª mapping ×©×œ field ×§×™×™×! ×¦×¨×™×š ×œ×™×¦×•×¨ index ×—×“×© ×•×œ×¢×©×•×ª reindex.</p>
                    </div>
                </div>

                <!-- Queries -->
                <div id="theory-queries" class="theory-section">
                    <h1>ğŸ” ×¡×•×’×™ Queries ×‘-Elasticsearch</h1>

                    <h2>Query Context vs Filter Context</h2>
                    <div class="comparison-grid">
                        <div class="comparison-card">
                            <h4>Query Context</h4>
                            <p>×¢×•× ×” ×¢×œ: "×›××” ×˜×•×‘ ×”-document ××ª××™×?"</p>
                            <p>××—×©×‘ <strong>relevance score</strong> (_score)</p>
                        </div>
                        <div class="comparison-card">
                            <h4>Filter Context</h4>
                            <p>×¢×•× ×” ×¢×œ: "×”×× ×”-document ××ª××™×?"</p>
                            <p>×ª×©×•×‘×”: ×›×Ÿ/×œ× (×‘×œ×™ score)</p>
                            <p><strong>××”×™×¨ ×™×•×ª×¨</strong> ×•-cacheable</p>
                        </div>
                    </div>

                    <h2>Full-Text Queries</h2>
                    <h3>Match Query</h3>
                    <p>×”×—×™×¤×•×© ×”×‘×¡×™×¡×™ ×‘×™×•×ª×¨. ××‘×¦×¢ analysis ×¢×œ ×”×˜×§×¡×˜.</p>
                    <div class="code-snippet" style="background: var(--code-bg); color: var(--code-text); padding: 20px; border-radius: 8px; font-family: 'JetBrains Mono', monospace; direction: ltr; text-align: left; margin: 20px 0;">POST /books/_search
{
  "query": {
    "match": {
      "title": "elasticsearch guide"
    }
  }
}</div>

                    <h3>Multi-Match Query</h3>
                    <p>×—×™×¤×•×© ×‘××¡×¤×¨ fields ×‘××§×‘×™×œ.</p>

                    <h3>Match Phrase</h3>
                    <p>×—×™×¤×•×© ×‘×™×˜×•×™ ××“×•×™×§ (×”××™×œ×™× ×‘×¡×“×¨ ×”× ×›×•×Ÿ).</p>

                    <h2>Term-Level Queries</h2>
                    <p>×—×™×¤×•×© ×¢×¨×›×™× ××“×•×™×§×™× (×œ×œ× analysis):</p>
                    <ul>
                        <li><strong>Term</strong> - ×¢×¨×š ××“×•×™×§ ××—×“</li>
                        <li><strong>Terms</strong> - ××¡×¤×¨ ×¢×¨×›×™× (OR)</li>
                        <li><strong>Range</strong> - ×˜×•×•×— (×ª××¨×™×›×™×, ××¡×¤×¨×™×)</li>
                        <li><strong>Exists</strong> - ×‘×“×™×§×” ×©×”-field ×§×™×™×</li>
                        <li><strong>Wildcard</strong> - ×ª×•×•×™× ×›×œ×œ×™× (* ?)</li>
                        <li><strong>Regexp</strong> - regular expressions</li>
                    </ul>

                    <h2>Boolean Query</h2>
                    <p>×©×™×œ×•×‘ ×©×œ queries ×¢× ×œ×•×’×™×§×” ×‘×•×œ×™×× ×™×ª:</p>
                    <ul>
                        <li><strong>must</strong> - ×—×™×™×‘ ×œ×”×ª××™× (AND) + ××©×¤×™×¢ ×¢×œ ×”-score</li>
                        <li><strong>should</strong> - ×¨×¦×•×™ (OR) + ××©×¤×™×¢ ×¢×œ ×”-score</li>
                        <li><strong>must_not</strong> - ×œ× ×¦×¨×™×š ×œ×”×ª××™× (NOT)</li>
                        <li><strong>filter</strong> - ×—×™×™×‘ ×œ×”×ª××™× ××‘×œ ×‘×œ×™ score</li>
                    </ul>
                </div>

                <!-- Aggregations -->
                <div id="theory-aggregations" class="theory-section">
                    <h1>ğŸ“Š Aggregations - × ×™×ª×•×— × ×ª×•× ×™×</h1>

                    <div class="info-card">
                        <p><strong>Aggregations</strong> ×××¤×©×¨×•×ª ×œ× ×• ×œ×‘×¦×¢ × ×™×ª×•×— ×¢×œ ×”× ×ª×•× ×™× - ×¡×›×•××™×, ×××•×¦×¢×™×, ×§×™×‘×•×¦×™× ×•×¢×•×“.</p>
                    </div>

                    <h2>×¡×•×’×™ Aggregations</h2>

                    <h3>1. Metric Aggregations</h3>
                    <p>×—×™×©×•×‘×™× ××ª××˜×™×™× ×¢×œ ×¢×¨×›×™×:</p>
                    <ul>
                        <li><strong>avg</strong> - ×××•×¦×¢</li>
                        <li><strong>sum</strong> - ×¡×›×•×</li>
                        <li><strong>min / max</strong> - ××™× ×™××•× / ××§×¡×™××•×</li>
                        <li><strong>stats</strong> - ×›×œ ×”× "×œ ×‘×™×—×“</li>
                        <li><strong>cardinality</strong> - ×¡×¤×™×¨×ª ×¢×¨×›×™× ×™×™×—×•×“×™×™×</li>
                    </ul>

                    <h3>2. Bucket Aggregations</h3>
                    <p>×§×™×‘×•×¥ documents ×œ-"×“×œ×™×™×":</p>
                    <ul>
                        <li><strong>terms</strong> - ×§×™×‘×•×¥ ×œ×¤×™ ×¢×¨×›×™× (top N)</li>
                        <li><strong>range</strong> - ×§×™×‘×•×¥ ×œ×¤×™ ×˜×•×•×—×™×</li>
                        <li><strong>date_histogram</strong> - ×§×™×‘×•×¥ ×œ×¤×™ ×ª××¨×™×›×™×</li>
                        <li><strong>histogram</strong> - ×§×™×‘×•×¥ ×œ×¤×™ ××¡×¤×¨×™×</li>
                    </ul>

                    <h3>×“×•×’××” - ×¡×¤×™×¨×ª ×œ×•×’×™× ×œ×¤×™ ×¨××ª ×—×•××¨×”:</h3>
                    <div class="code-snippet" style="background: var(--code-bg); color: var(--code-text); padding: 20px; border-radius: 8px; font-family: 'JetBrains Mono', monospace; direction: ltr; text-align: left; margin: 20px 0;">POST /logs/_search
{
  "size": 0,
  "aggs": {
    "levels": {
      "terms": {
        "field": "level.keyword"
      }
    }
  }
}</div>

                    <h3>3. Pipeline Aggregations</h3>
                    <p>aggregations ×¢×œ ×ª×•×¦××•×ª ×©×œ aggregations ××—×¨×™×.</p>
                </div>

                <!-- Kibana ××ª×§×“× -->
                <div id="theory-kibana-deep" class="theory-section">
                    <h1>ğŸ“ˆ Kibana - ××¢×‘×¨ ×œ×™×¡×•×“×•×ª</h1>

                    <h2>Discover</h2>
                    <p>×—×™×¤×•×© ×•×¡×™× ×•×Ÿ × ×ª×•× ×™×:</p>
                    <ul>
                        <li>×—×™×¤×•×© ×—×•×¤×©×™ ×‘×˜×§×¡×˜</li>
                        <li>×¡×™× ×•×Ÿ ×œ×¤×™ fields</li>
                        <li>×©××™×¨×ª searches</li>
                        <li>×™×™×¦×•× × ×ª×•× ×™×</li>
                    </ul>

                    <h2>Visualize</h2>
                    <p>×™×¦×™×¨×ª ×ª×¨×©×™××™× ×•×•×•×™×–×•××œ×™×–×¦×™×•×ª:</p>
                    <div class="comparison-grid">
                        <div class="comparison-card">
                            <h4>Line / Area / Bar</h4>
                            <p>×ª×¨×©×™××™ ×§×•, ×©×˜×— ×•×¢××•×“×•×ª ×œ× ×ª×•× ×™× ×œ××•×¨×š ×–××Ÿ</p>
                        </div>
                        <div class="comparison-card">
                            <h4>Pie / Donut</h4>
                            <p>×—×œ×•×§×” ×¤×¨×•×¤×•×¨×¦×™×•× ×œ×™×ª ×©×œ × ×ª×•× ×™×</p>
                        </div>
                        <div class="comparison-card">
                            <h4>Data Table</h4>
                            <p>×˜×‘×œ×” ×¢× aggregations</p>
                        </div>
                        <div class="comparison-card">
                            <h4>Metric</h4>
                            <p>××¡×¤×¨ ×’×“×•×œ ××—×“ (KPI)</p>
                        </div>
                    </div>

                    <h2>Dashboard</h2>
                    <p>×¦×™×¨×•×£ visualizations ×œ×ª×¦×•×’×” ×××•×—×“×ª:</p>
                    <ul>
                        <li>Drag & drop</li>
                        <li>×–××Ÿ ××©×•×ª×£ ×œ×›×œ ×”×¤×× ×œ×™×</li>
                        <li>×¤×™×œ×˜×¨×™× ×’×œ×•×‘×œ×™×™×</li>
                        <li>Refresh ××•×˜×•××˜×™</li>
                    </ul>

                    <h2>Canvas</h2>
                    <p>×™×¦×™×¨×ª presentations ×•-infographics ××•×ª×××•×ª ××™×©×™×ª ×¢× ×¢×™×¦×•×‘ ×—×•×¤×©×™.</p>

                    <h2>Maps</h2>
                    <p>×•×™×–×•××œ×™×–×¦×™×” ×©×œ × ×ª×•× ×™× ×’×™××•×’×¨×¤×™×™× ×¢×œ ××¤×”.</p>
                </div>

                <!-- ×¡×•×’×™ Beats -->
                <div id="theory-beats-types" class="theory-section">
                    <h1>ğŸµ ×¡×•×’×™ Beats - Data Shippers</h1>

                    <div class="comparison-grid">
                        <div class="comparison-card">
                            <h4>ğŸ“„ Filebeat</h4>
                            <p><strong>××”:</strong> ×©×•×œ×— ×œ×•×’×™× ××§×‘×¦×™×</p>
                            <p><strong>×œ××”:</strong> logs, application logs, system logs</p>
                            <p><strong>×ª×›×•× ×”:</strong> Modules ××•×›× ×™× (Apache, Nginx, MySQL...)</p>
                        </div>

                        <div class="comparison-card">
                            <h4>ğŸ“Š Metricbeat</h4>
                            <p><strong>××”:</strong> ×©×•×œ×— metrics ××”××¢×¨×›×ª ×•×©×™×¨×•×ª×™×</p>
                            <p><strong>×œ××”:</strong> CPU, RAM, Disk, Network, Docker, Kubernetes</p>
                            <p><strong>×ª×›×•× ×”:</strong> Modules ×œ×›×œ ×”×©×™×¨×•×ª×™× ×”×¤×•×¤×•×œ×¨×™×™×</p>
                        </div>

                        <div class="comparison-card">
                            <h4>ğŸŒ Packetbeat</h4>
                            <p><strong>××”:</strong> network packet analyzer</p>
                            <p><strong>×œ××”:</strong> × ×™×˜×•×¨ ×ª×¢×‘×•×¨×ª ×¨×©×ª, protocols (HTTP, MySQL, Redis...)</p>
                            <p><strong>×ª×›×•× ×”:</strong> real-time network monitoring</p>
                        </div>

                        <div class="comparison-card">
                            <h4>ğŸ’“ Heartbeat</h4>
                            <p><strong>××”:</strong> uptime monitoring</p>
                            <p><strong>×œ××”:</strong> ×‘×“×™×§×ª ×–××™× ×•×ª ×©×œ ×©×™×¨×•×ª×™×</p>
                            <p><strong>×ª×›×•× ×”:</strong> ICMP, TCP, HTTP pings</p>
                        </div>

                        <div class="comparison-card">
                            <h4>ğŸ”’ Auditbeat</h4>
                            <p><strong>××”:</strong> audit framework data</p>
                            <p><strong>×œ××”:</strong> ×©×™× ×•×™×™× ×‘×§×‘×¦×™×, ×¤×¢×™×œ×•×ª ××©×ª××©×™×</p>
                            <p><strong>×ª×›×•× ×”:</strong> security & compliance</p>
                        </div>

                        <div class="comparison-card">
                            <h4>ğŸ³ Other Beats</h4>
                            <p><strong>Winlogbeat:</strong> Windows event logs</p>
                            <p><strong>Functionbeat:</strong> serverless data shipper</p>
                            <p>×•×¢×•×“ community beats ×¨×‘×™×...</p>
                        </div>
                    </div>
                </div>

                <!-- Best Practices -->
                <div id="theory-best-practices" class="theory-section">
                    <h1>âœ¨ Best Practices ×œ-Elasticsearch</h1>

                    <h2>ğŸ—ï¸ ×ª×›× ×•×Ÿ Index</h2>
                    <div class="concept-highlight">
                        <h4>××¡×¤×¨ Shards ××•×¤×˜×™××œ×™</h4>
                        <ul>
                            <li>×™×•×ª×¨ ××“×™ shards = overhead ×©×œ × ×™×”×•×œ</li>
                            <li>××¢×˜ ××“×™ = bottleneck ×‘-performance</li>
                            <li><strong>×›×œ×œ ××¦×‘×¢:</strong> shard size ×‘×™×Ÿ 10GB-50GB</li>
                            <li>×œ××™×“×¢ ×§×˜×Ÿ (< 5GB): 1 shard ××¡×¤×™×§</li>
                            <li>×œ××™×“×¢ ×‘×™× ×•× ×™ (5-50GB): 2-5 shards</li>
                            <li>×œ××™×“×¢ ×’×“×•×œ: ×—×©×‘ ×œ×¤×™ ×”× ×•×¡×—×”: (Total GB / 30GB)</li>
                        </ul>
                    </div>

                    <h3>Replicas</h3>
                    <div class="success-box">
                        <h4>âœ… ××•××œ×¥:</h4>
                        <ul>
                            <li><strong>××™× ×™××•× 1 replica</strong> ×œ×¤×¨×•×“×§×©×Ÿ (high availability)</li>
                            <li><strong>2+ replicas</strong> ×œ× ×ª×•× ×™× ×§×¨×™×˜×™×™×</li>
                            <li>×™×•×ª×¨ replicas = ×™×•×ª×¨ search throughput (queries ×‘××§×‘×™×œ)</li>
                            <li>××‘×œ: ×“×•×¨×© ×™×•×ª×¨ ××—×¡×•×Ÿ ×•-indexing overhead</li>
                            <li>× ×™×ª×Ÿ ×œ×©× ×•×ª ××¡×¤×¨ replicas ×‘×›×œ ×–××Ÿ (×‘× ×™×’×•×“ ×œ-shards!)</li>
                        </ul>
                    </div>

                    <h3>×—×™×©×•×‘ ××©××‘×™×:</h3>
                    <div class="code-snippet">## ×“×•×’××”: 90GB data
Shards: 90GB / 30GB = 3 primary shards
Replicas: 2 (×œ×¤×¨×•×“×§×©×Ÿ)
Total Shards: 3 primary + 6 replica = 9 shards
Nodes ××™× ×™××•×: 3 (×›×œ primary + replica ×¢×œ nodes ×©×•× ×™×)
Storage: 90GB Ã— (1 + 2 replicas) = 270GB</div>

                    <h2>ğŸ“ Mappings Best Practices</h2>
                    <div class="comparison-grid">
                        <div class="comparison-card">
                            <h4>âœ… DO - ×¢×©×”</h4>
                            <ul style="font-size: 0.9rem;">
                                <li>×”×’×“×¨ mapping ××¤×•×¨×© ×‘×¤×¨×•×“×§×©×Ÿ</li>
                                <li>×”×©×ª××© ×‘-keyword ×œ×©×“×•×ª exact-value</li>
                                <li>multi-fields: text + keyword</li>
                                <li>×”×’×“×¨ date format ××¤×•×¨×©</li>
                                <li>index: false ×œ×©×“×•×ª ×©×œ× ××—×¤×©×™×</li>
                            </ul>
                        </div>

                        <div class="comparison-card">
                            <h4>âŒ DON'T - ××œ ×ª×¢×©×”</h4>
                            <ul style="font-size: 0.9rem;">
                                <li>âŒ Dynamic mapping ×‘×¤×¨×•×“×§×©×Ÿ</li>
                                <li>âŒ text ×œ×›×œ ×©×“×” (×™×§×¨!)</li>
                                <li>âŒ ×©×™× ×•×™ mapping ××—×¨×™ ×™×¦×™×¨×”</li>
                                <li>âŒ ×©×“×•×ª ××™×•×ª×¨×™× ×‘××™× ×“×§×¡</li>
                                <li>âŒ Nested types ×‘×œ×™ ×¦×•×¨×š</li>
                            </ul>
                        </div>
                    </div>

                    <h3>×“×•×’××” ×œ×apping ×˜×•×‘:</h3>
                    <div class="code-snippet">{
  "mappings": {
    "properties": {
      "title": {
        "type": "text",
        "fields": {"keyword": {"type": "keyword"}}  # Multi-field!
      },
      "status": {
        "type": "keyword"  # Exact values
      },
      "created_at": {
        "type": "date",
        "format": "yyyy-MM-dd HH:mm:ss||epoch_millis"
      },
      "description": {
        "type": "text",
        "analyzer": "english"  # Language-specific
      },
      "internal_notes": {
        "type": "text",
        "index": false  # ×œ× ×¦×¨×™×š ×œ×—×¤×© - ×œ× ×œ×× ×“×§×¡!
      }
    }
  }
}</div>

                    <h2>ğŸ” Query Optimization</h2>
                    <div class="concept-highlight">
                        <h4>âš¡ ××”×™×¨×•×ª:</h4>

                        <h5 style="margin-top: 20px;">1. Filter ×‘××§×•× Must (×›×©××¤×©×¨)</h5>
                        <div class="code-snippet"># âŒ ×œ× ×™×¢×™×œ - must ××—×©×‘ score
{
  "query": {
    "bool": {
      "must": [
        {"term": {"status": "active"}}  # ×œ× ×¦×¨×™×š score!
      ]
    }
  }
}

# âœ… ×™×¢×™×œ - filter (cacheable!)
{
  "query": {
    "bool": {
      "filter": [
        {"term": {"status": "active"}}
      ]
    }
  }
}</div>

                        <h5 style="margin-top: 20px;">2. ×”×’×‘×œ size</h5>
                        <div class="code-snippet"># âŒ ×œ× ×˜×•×‘ - ××—×–×™×¨ ×”×›×œ
{
  "query": {...}
}

# âœ… ×˜×•×‘ - ×”×’×‘×œ ×ª×•×¦××•×ª
{
  "size": 10,  # ×¨×§ 10 ×ª×•×¦××•×ª
  "query": {...}
}</div>

                        <h5 style="margin-top: 20px;">3. _source Filtering</h5>
                        <div class="code-snippet"># âœ… ×˜×•×‘ - ×¨×§ ×©×“×•×ª × ×“×¨×©×™×
{
  "_source": ["title", "author"],  # ×œ× ×›×œ ×”document
  "query": {...}
}</div>

                        <h5 style="margin-top: 20px;">4. ×”×©×ª××© ×‘-Search After (×œ× from/size)</h5>
                        <div class="code-snippet"># âŒ ×œ× ×˜×•×‘ ×œ×›××•×™×•×ª ×’×“×•×œ×•×ª - from + size
{
  "from": 10000,
  "size": 10  # ×™×§×¨ ×××•×“!
}

# âœ… ×˜×•×‘ - search_after
{
  "size": 10,
  "search_after": [previous_sort_values],
  "sort": [{"timestamp": "asc"}]
}</div>
                    </div>

                    <h2>ğŸ—‚ï¸ Index Lifecycle Management (ILM)</h2>
                    <div class="info-card">
                        <h4>×ª×•×›× ×™×ª ×œ× ×™×”×•×œ indices:</h4>
                        <p><strong>Hot Tier</strong> â†’ <strong>Warm Tier</strong> â†’ <strong>Cold Tier</strong> â†’ <strong>Delete</strong></p>

                        <ul style="margin-top: 15px;">
                            <li><strong>Hot:</strong> ×›×ª×™×‘×” ×•×§×¨×™××” ××§×˜×™×‘×™×ª (SSDs ××”×™×¨×™×)</li>
                            <li><strong>Warm:</strong> ×¨×§ ×§×¨×™××”, ×¤×—×•×ª ×ª×›×•×£ (SSDs ×¨×’×™×œ×™×)</li>
                            <li><strong>Cold:</strong> ×§×¨×™××” × ×“×™×¨×” (HDDs)</li>
                            <li><strong>Frozen:</strong> ××¨×›×™×•×Ÿ (searchable snapshot)</li>
                            <li><strong>Delete:</strong> ××—×™×§×” ××•×˜×•××˜×™×ª</li>
                        </ul>
                    </div>

                    <h3>×“×•×’××ª ILM Policy:</h3>
                    <div class="code-snippet">PUT /_ilm/policy/logs_policy
{
  "policy": {
    "phases": {
      "hot": {
        "actions": {
          "rollover": {
            "max_age": "1d",
            "max_size": "50GB"
          }
        }
      },
      "warm": {
        "min_age": "7d",
        "actions": {
          "shrink": {"number_of_shards": 1},
          "forcemerge": {"max_num_segments": 1}
        }
      },
      "cold": {
        "min_age": "30d",
        "actions": {
          "freeze": {}
        }
      },
      "delete": {
        "min_age": "90d",
        "actions": {
          "delete": {}
        }
      }
    }
  }
}</div>

                    <h2>ğŸ” Security Best Practices</h2>
                    <div class="warning-box">
                        <h4>âš ï¸ ××‘×˜×—×” ×§×¨×™×˜×™×ª:</h4>
                        <ul style="list-style: none; padding: 0;">
                            <li>â˜ <strong>Network:</strong> ××œ ×ª×—×©×•×£ ES ×™×©×™×¨×•×ª ×œ××™× ×˜×¨× ×˜!</li>
                            <li>â˜ <strong>Authentication:</strong> ×”×¤×¢×œ Security features (X-Pack)</li>
                            <li>â˜ <strong>HTTPS/TLS:</strong> ×”×¦×¤×Ÿ ×ª×¢×‘×•×¨×”</li>
                            <li>â˜ <strong>Role-Based Access:</strong> ×”×’×‘×œ ×’×™×©×” ×œ×¤×™ roles</li>
                            <li>â˜ <strong>Audit Logging:</strong> ×¢×§×•×‘ ××—×¨ ×¤×¢×™×œ×•×ª</li>
                            <li>â˜ <strong>Snapshots:</strong> ×’×™×‘×•×™×™× ×§×‘×•×¢×™×</li>
                            <li>â˜ <strong>Firewall:</strong> ×”×’×‘×œ IP addresses</li>
                            <li>â˜ <strong>Updates:</strong> ×¢×“×›×•× ×™ ××‘×˜×—×”</li>
                        </ul>
                    </div>

                    <h2>ğŸ“Š Monitoring & Alerting</h2>
                    <div class="success-box">
                        <h4>âœ… ××” ×œ× ×˜×¨?</h4>
                        <ul>
                            <li><strong>Cluster Health:</strong> green/yellow/red status</li>
                            <li><strong>Disk Space:</strong> watermarks (85%, 90%, 95%)</li>
                            <li><strong>JVM Heap:</strong> ×œ× ×¦×¨×™×š ×œ×¢×‘×•×¨ 75%</li>
                            <li><strong>CPU Usage:</strong> sustained high CPU = ×‘×¢×™×”</li>
                            <li><strong>Indexing Rate:</strong> documents/second</li>
                            <li><strong>Search Rate:</strong> queries/second</li>
                            <li><strong>Search Latency:</strong> ×–××Ÿ ×ª×’×•×‘×”</li>
                            <li><strong>Rejected Threads:</strong> ××™× ×“×™×§×˜×•×¨ ×œ×¢×•××¡</li>
                        </ul>
                    </div>

                    <h3>×›×œ×™ × ×™×˜×•×¨:</h3>
                    <div class="code-snippet"># Elasticsearch monitoring APIs
GET /_cluster/health
GET /_nodes/stats
GET /_cat/indices?v&health=yellow
GET /_cat/shards?v&h=index,shard,prirep,state,unassigned.reason

# Kibana Stack Monitoring
# Built-in dashboard ×œ× ×™×˜×•×¨ ES cluster</div>

                    <h2>âš¡ Performance Tuning</h2>
                    <div class="comparison-grid">
                        <div class="comparison-card">
                            <h4>ğŸ’¾ JVM Heap</h4>
                            <p><strong>×›×œ×œ:</strong> 50% ××”-RAM, ××§×¡×™××•× 32GB</p>
                            <div class="code-snippet" style="font-size: 0.75rem; margin-top: 10px;"># jvm.options
-Xms16g
-Xmx16g</div>
                        </div>

                        <div class="comparison-card">
                            <h4>ğŸ”„ Refresh Interval</h4>
                            <p>×”×’×“×œ ×œ-30s/60s ×œbulk indexing</p>
                            <div class="code-snippet" style="font-size: 0.75rem; margin-top: 10px;">PUT /my-index/_settings
{
  "refresh_interval": "30s"
}</div>
                        </div>

                        <div class="comparison-card">
                            <h4>ğŸ“¦ Bulk Size</h4>
                            <p>5-15MB per request (××•×¤×˜×™××œ×™)</p>
                            <div class="code-snippet" style="font-size: 0.75rem; margin-top: 10px;"># ×‘×¦×¢×• batching
1000-5000 docs per bulk</div>
                        </div>

                        <div class="comparison-card">
                            <h4>ğŸ—œï¸ Compression</h4>
                            <p>×”×¤×¢×œ compression ×œ×—×™×¡×›×•×Ÿ</p>
                            <div class="code-snippet" style="font-size: 0.75rem; margin-top: 10px;">PUT /my-index/_settings
{
  "codec": "best_compression"
}</div>
                        </div>
                    </div>

                    <h2>ğŸ¯ Production Checklist</h2>
                    <div class="info-card">
                        <h4>×œ×¤× ×™ Deploy ×œ×¤×¨×•×“×§×©×Ÿ:</h4>
                        <ul style="list-style: none; padding: 0; font-size: 1.05rem;">
                            <li>â˜ <strong>Cluster Size:</strong> ×œ×¤×—×•×ª 3 nodes (master-eligible)</li>
                            <li>â˜ <strong>Sharding:</strong> ××¡×¤×¨ shards ××—×•×©×‘ × ×›×•×Ÿ</li>
                            <li>â˜ <strong>Replicas:</strong> ×œ×¤×—×•×ª 1 (××•××œ×¥ 2)</li>
                            <li>â˜ <strong>Mappings:</strong> Explicit mappings ××•×’×“×¨×™×</li>
                            <li>â˜ <strong>ILM Policy:</strong> × ×™×”×•×œ lifecycle ××•×˜×•××˜×™</li>
                            <li>â˜ <strong>Security:</strong> Authentication + TLS ××•×¤×¢×œ×™×</li>
                            <li>â˜ <strong>Monitoring:</strong> Stack Monitoring ×¤×¢×™×œ</li>
                            <li>â˜ <strong>Snapshots:</strong> ×’×™×‘×•×™×™× ××•×˜×•××˜×™×™× ××•×’×“×¨×™×</li>
                            <li>â˜ <strong>Heap Size:</strong> JVM heap ××•×’×“×¨ (50% RAM, max 32GB)</li>
                            <li>â˜ <strong>Disk Space:</strong> ×œ×¤×—×•×ª 20% ×¤× ×•×™</li>
                            <li>â˜ <strong>Network:</strong> Firewall + Load Balancer</li>
                            <li>â˜ <strong>Testing:</strong> × ×‘×“×§ ×¢× × ×ª×•× ×™× ×××™×ª×™×™×</li>
                        </ul>
                    </div>

                    <h2>ğŸš€ Scaling Strategies</h2>
                    <div class="comparison-grid">
                        <div class="comparison-card">
                            <h4>â¬†ï¸ Vertical Scaling</h4>
                            <p>×”×•×¡×£ RAM, CPU, SSD ××”×™×¨×™×</p>
                            <p><strong>×˜×•×‘ ×œ:</strong> ×”×ª×—×œ×”, indices ×§×˜× ×™×</p>
                            <p><strong>××•×’×‘×œ:</strong> ×œ×¤×™ ×’×•×“×œ machine</p>
                        </div>

                        <div class="comparison-card">
                            <h4>â¡ï¸ Horizontal Scaling</h4>
                            <p>×”×•×¡×£ nodes ×œ-cluster</p>
                            <p><strong>×˜×•×‘ ×œ:</strong> ×›××•×™×•×ª ×’×“×•×œ×•×ª, HA</p>
                            <p><strong>××™× ×¡×•×¤×™:</strong> × ×™×ª×Ÿ ×œ×”×•×¡×™×£ ×œ×œ× ×”×’×‘×œ×”</p>
                        </div>

                        <div class="comparison-card">
                            <h4>ğŸ”„ Index Splitting</h4>
                            <p>×¤×¦×œ indices ×’×“×•×œ×™× ×œ×§×˜× ×™×</p>
                            <p><strong>×˜×•×‘ ×œ:</strong> time-based data</p>
                            <p><strong>×“×•×’××”:</strong> logs-2024-01-15</p>
                        </div>

                        <div class="comparison-card">
                            <h4>ğŸ—‚ï¸ Tiered Architecture</h4>
                            <p>Hot/Warm/Cold nodes</p>
                            <p><strong>×˜×•×‘ ×œ:</strong> ××•×¤×˜×™××™×–×¦×™×” ×©×œ ×¢×œ×•×™×•×ª</p>
                            <p><strong>×—×™×¡×›×•×Ÿ:</strong> 50-70% ×‘×¢×œ×•×™×•×ª!</p>
                        </div>
                    </div>

                    <h2>ğŸ’¡ Common Patterns</h2>

                    <h3>Pattern 1: Time-Series Data (Logs)</h3>
                    <div class="success-box">
                        <ul>
                            <li>Index per day/week: <code>logs-2024-01-15</code></li>
                            <li>ILM policy ×œ×”×¢×‘×¨×” ×‘×™×Ÿ tiers</li>
                            <li>Index aliases ×œ×§×¨×™××”/×›×ª×™×‘×”</li>
                            <li>××—×™×§×” ××•×˜×•××˜×™×ª ××—×¨×™ X ×™××™×</li>
                        </ul>
                        <div class="code-snippet" style="margin-top: 15px;"># Index template ×¢× ILM
PUT /_index_template/logs_template
{
  "index_patterns": ["logs-*"],
  "template": {
    "settings": {
      "number_of_shards": 1,
      "number_of_replicas": 1,
      "index.lifecycle.name": "logs_policy"
    }
  }
}</div>
                    </div>

                    <h3 style="margin-top: 30px;">Pattern 2: Full-Text Search (Products)</h3>
                    <div class="info-card">
                        <ul>
                            <li>Index ××—×“ ×¢× mappings ××•×ª×××™×</li>
                            <li>text + keyword multi-fields</li>
                            <li>Analyzers ×œ×©×¤×•×ª ×©×•× ×•×ª</li>
                            <li>Suggesters ×œ-autocomplete</li>
                            <li>Replicas ×œ×‘×™×¦×•×¢×™ ×§×¨×™××”</li>
                        </ul>
                    </div>

                    <h3 style="margin-top: 30px;">Pattern 3: Analytics (Metrics)</h3>
                    <div class="concept-highlight">
                        <ul>
                            <li>Rollup jobs ×œ××’×¨×’×¦×™×” ××¨××©</li>
                            <li>Data streams ×œ×–××Ÿ-×××ª</li>
                            <li>Pre-computed aggregations</li>
                            <li>Cold tier ×œ× ×ª×•× ×™× ×”×™×¡×˜×•×¨×™×™×</li>
                        </ul>
                    </div>

                    <h2>ğŸ“š ××©××‘×™× × ×•×¡×¤×™×</h2>
                    <div class="success-box">
                        <h4>×œ××™×“×”:</h4>
                        <ul>
                            <li><strong>Documentation:</strong> elastic.co/guide/en/elasticsearch</li>
                            <li><strong>Forums:</strong> discuss.elastic.co</li>
                            <li><strong>GitHub:</strong> github.com/elastic/elasticsearch</li>
                            <li><strong>Blog:</strong> elastic.co/blog</li>
                            <li><strong>Elastic Stack:</strong> YouTube channel</li>
                            <li><strong>Certification:</strong> Elastic Certified Engineer</li>
                        </ul>
                    </div>
                </div>

            </main>
        </div>
    </div>

    <!-- === SIMULATOR VIEW === -->
    <div id="view-simulator" class="view-section active">
        <div style="max-width: 1200px; margin: 0 auto;">

            <!-- Pipeline Card -->
            <div class="content-card">
                <div class="card-header">
                    <h2><span style="color:var(--elastic-green)">â—</span> ×¦×™× ×•×¨ ×¢×™×‘×•×“ × ×ª×•× ×™× (Data Pipeline)</h2>
                </div>
                <div class="card-body">
                    <p style="margin-bottom: 20px; color: var(--text-secondary); text-align: center;">
                        ×”×–×Ÿ ×œ×•×’ ×•×¦×¤×” ×‘×ª×”×œ×™×š: <strong>Beats</strong> â†’ <strong>Logstash</strong> â†’ <strong>Elasticsearch</strong> â†’ <strong>Kibana</strong>
                    </p>

                    <div style="display: flex; gap: 15px; margin-bottom: 40px;">
                        <input type="text" id="rawLogInput" class="input-field"
                               value="2024-03-15 INFO User login successful ip=192.168.1.1"
                               placeholder="×”×–×Ÿ ×œ×•×’...">
                        <button class="btn btn-primary" id="runBtn" onclick="runPipeline()">ğŸ“¦ ×©×œ×— ×œ×•×’</button>
                    </div>

                    <div class="pipeline-track" id="pipelineTrack">
                        <div class="pipeline-line"></div>

                        <div class="pipeline-stage" id="stage-beats" style="border-color: var(--elastic-green);">
                            <span class="stage-icon">ğŸ“¦</span>
                            <span class="stage-title">Beats</span>
                            <span class="stage-desc">××™×¡×•×£ × ×ª×•× ×™×</span>
                        </div>

                        <div class="pipeline-stage" id="stage-logstash" style="border-color: var(--elastic-yellow);">
                            <span class="stage-icon">âš™ï¸</span>
                            <span class="stage-title">Logstash</span>
                            <span class="stage-desc">×¢×™×‘×•×“ ×•×©×™× ×•×™</span>
                        </div>

                        <div class="pipeline-stage" id="stage-es" style="border-color: var(--elastic-blue);">
                            <span class="stage-icon">ğŸ—„ï¸</span>
                            <span class="stage-title">Elasticsearch</span>
                            <span class="stage-desc">××—×¡×•×Ÿ ×•×—×™×¤×•×©</span>
                        </div>

                        <div id="packet" class="packet"></div>
                    </div>

                    <div class="output-box">
                        <div style="margin-bottom: 8px; font-weight: 700; font-size: 0.75rem; text-transform: uppercase; color: var(--elastic-yellow);">âš™ï¸ Logstash Output:</div>
                        <div id="logstash-out">// Waiting for data...</div>
                    </div>
                </div>
            </div>

            <!-- Cluster Card -->
            <div class="content-card">
                <div class="card-header">
                    <h2><span style="color:var(--elastic-blue)">â—</span> ×˜×•×¤×•×œ×•×’×™×™×ª Cluster</h2>
                    <div style="display: flex; gap: 10px;">
                        <button class="btn btn-secondary" onclick="addNode()">â• ×”×•×¡×£ Node</button>
                        <button class="btn btn-secondary" onclick="resetCluster()">ğŸ”„ ××ª×—×œ</button>
                    </div>
                </div>
                <div class="card-body">
                    <p style="font-size: 0.95rem; color: var(--text-tertiary); margin-bottom: 25px; text-align: center;">
                        ×”×“××™×” ×©×œ <strong>Primary Shards (P)</strong> ×•-<strong>Replica Shards (R)</strong> ×¢×œ ×¤× ×™ Nodes
                    </p>
                    <div class="cluster-visual" id="clusterGrid">
                        <div class="node-box" id="node-0">
                            <div class="node-header"><span>MASTER</span> <span>Node-0</span></div>
                            <div class="shards-container" id="shards-0"></div>
                        </div>
                        <div class="node-box" id="node-1">
                            <div class="node-header"><span>DATA</span> <span>Node-1</span></div>
                            <div class="shards-container" id="shards-1"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Kibana Card -->
            <div class="content-card" style="border-top: 4px solid var(--elastic-pink);">
                <div class="card-header">
                    <h2><span style="color:var(--elastic-pink)">â—</span> Kibana - × ×™×ª×•×— ×•×•×™×–×•××œ×™×–×¦×™×”</h2>
                </div>
                <div class="card-body">
                    <div class="kibana-panel">
                        <div>
                            <h4 style="margin: 0 0 15px 0; font-size: 0.95rem; color: var(--text-secondary); font-weight: 700;">ğŸ” Discover</h4>
                            <div id="kibana-list" class="kibana-discover">
                                <div style="color: #cbd5e0; text-align: center; padding-top: 60px;">××™×Ÿ ×œ×•×’×™× ×‘××™× ×“×§×¡</div>
                            </div>
                        </div>
                        <div>
                            <h4 style="margin: 0 0 15px 0; font-size: 0.95rem; color: var(--text-secondary); font-weight: 700;">ğŸ“Š Dashboard</h4>
                            <div class="chart-container">
                                <div class="chart-bar" id="bar-info" style="background: var(--elastic-blue);"></div>
                                <div class="chart-bar" id="bar-warn" style="background: var(--elastic-yellow);"></div>
                                <div class="chart-bar" id="bar-error" style="background: var(--elastic-pink);"></div>
                            </div>
                            <div class="chart-label">
                                <span>INFO</span>
                                <span>WARN</span>
                                <span>ERROR</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <!-- === API REFERENCE VIEW === -->
    <div id="view-api" class="view-section">
        <div style="max-width: 900px; margin: 0 auto;">
            <div style="text-align: center; margin-bottom: 50px;">
                <h1 style="font-size: 2.2rem; margin-bottom: 12px; font-weight: 800;">Elasticsearch REST API</h1>
                <p style="color: var(--text-secondary); font-size: 1.05rem;">××™× ×˜×¨××§×¦×™×” ×¢× ×”-Cluster ×‘×××¦×¢×•×ª JSON over HTTP</p>
            </div>

            <div class="api-grid">

                <div class="api-item">
                    <div class="api-item-header">
                        <span class="method-badge badge-put">PUT</span>
                        <span class="endpoint">/{index}</span>
                    </div>
                    <div class="api-item-body">
                        <p style="margin: 0 0 10px 0; color: var(--text-secondary);">×™×¦×™×¨×ª index ×—×“×© ×¢× ×”×’×“×¨×•×ª</p>
                        <div class="code-snippet">PUT /my-index
{
  "settings": {
    "number_of_shards": 3,
    "number_of_replicas": 2
  }
}</div>
                    </div>
                </div>

                <div class="api-item">
                    <div class="api-item-header">
                        <span class="method-badge badge-post">POST</span>
                        <span class="endpoint">/{index}/_doc</span>
                    </div>
                    <div class="api-item-body">
                        <p style="margin: 0 0 10px 0; color: var(--text-secondary);">×”×•×¡×¤×ª document ×—×“×© (ID ××•×˜×•××˜×™)</p>
                        <div class="code-snippet">POST /my-index/_doc
{
  "user": "Lev",
  "message": "Welcome to Elasticsearch",
  "timestamp": "2024-01-01T12:00:00"
}</div>
                    </div>
                </div>

                <div class="api-item">
                    <div class="api-item-header">
                        <span class="method-badge badge-get">GET</span>
                        <span class="endpoint">/{index}/_doc/{id}</span>
                    </div>
                    <div class="api-item-body">
                        <p style="margin: 0 0 10px 0; color: var(--text-secondary);">×§×‘×œ×ª document ×œ×¤×™ ID</p>
                        <div class="code-snippet">GET /my-index/_doc/1</div>
                    </div>
                </div>

                <div class="api-item">
                    <div class="api-item-header">
                        <span class="method-badge badge-post">POST</span>
                        <span class="endpoint">/{index}/_search</span>
                    </div>
                    <div class="api-item-body">
                        <p style="margin: 0 0 10px 0; color: var(--text-secondary);">×—×™×¤×•×© ××•×¨×›×‘ ×¢× Query DSL</p>
                        <div class="code-snippet">POST /my-index/_search
{
  "query": {
    "match": {
      "message": "elasticsearch"
    }
  }
}</div>
                    </div>
                </div>

                <div class="api-item">
                    <div class="api-item-header">
                        <span class="method-badge badge-post">POST</span>
                        <span class="endpoint">/{index}/_update/{id}</span>
                    </div>
                    <div class="api-item-body">
                        <p style="margin: 0 0 10px 0; color: var(--text-secondary);">×¢×“×›×•×Ÿ ×—×œ×§×™ ×©×œ document</p>
                        <div class="code-snippet">POST /my-index/_update/1
{
  "doc": {
    "message": "Updated message"
  }
}</div>
                    </div>
                </div>

                <div class="api-item">
                    <div class="api-item-header">
                        <span class="method-badge badge-delete">DELETE</span>
                        <span class="endpoint">/{index}/_doc/{id}</span>
                    </div>
                    <div class="api-item-body">
                        <p style="margin: 0 0 10px 0; color: var(--text-secondary);">××—×™×§×ª document</p>
                        <div class="code-snippet">DELETE /my-index/_doc/1</div>
                    </div>
                </div>

                <div class="api-item">
                    <div class="api-item-header">
                        <span class="method-badge badge-post">POST</span>
                        <span class="endpoint">/_bulk</span>
                    </div>
                    <div class="api-item-body">
                        <p style="margin: 0 0 10px 0; color: var(--text-secondary);">×¤×¢×•×œ×•×ª ××¨×•×‘×•×ª ×‘×§×¨×™××” ××—×ª</p>
                        <div class="code-snippet">POST /_bulk
{"index":{"_index":"test","_id":"1"}}
{"field1":"value1"}
{"delete":{"_index":"test","_id":"2"}}
{"create":{"_index":"test","_id":"3"}}
{"field1":"value3"}</div>
                    </div>
                </div>

                <div class="api-item">
                    <div class="api-item-header">
                        <span class="method-badge badge-get">GET</span>
                        <span class="endpoint">/_cat/indices?v</span>
                    </div>
                    <div class="api-item-body">
                        <p style="margin: 0 0 10px 0; color: var(--text-secondary);">×¨×©×™××ª ×›×œ ×”-indices</p>
                        <div class="code-snippet">GET /_cat/indices?v</div>
                    </div>
                </div>

                <div class="api-item">
                    <div class="api-item-header">
                        <span class="method-badge badge-get">GET</span>
                        <span class="endpoint">/_cluster/health</span>
                    </div>
                    <div class="api-item-body">
                        <p style="margin: 0 0 10px 0; color: var(--text-secondary);">×‘×“×™×§×ª ×‘×¨×™××•×ª ×”-Cluster</p>
                        <div class="code-snippet">GET /_cluster/health</div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- === PRACTICE LAB VIEW === -->
    <div id="view-lab" class="view-section">
        <div style="max-width: 1100px; margin: 0 auto;">
            <div style="text-align: center; margin-bottom: 50px;">
                <h1 style="font-size: 2.2rem; margin-bottom: 12px; font-weight: 800;">ğŸ’ª ×ª×¨×’×™×œ×™× ××¢×©×™×™×</h1>
                <p style="color: var(--text-secondary); font-size: 1.05rem;">× ×¡×” ×œ×¤×ª×•×¨ ×œ×¤× ×™ ×©×ª×¡×ª×›×œ ×¢×œ ×”×¤×ª×¨×•×Ÿ!</p>
            </div>

            <div class="exercise-list">

                <div class="exercise-card" style="border-right: 5px solid var(--elastic-accent);">
                    <div class="ex-header">
                        <div style="display: flex; align-items: center; gap: 15px; flex: 1;">
                            <span class="ex-number">×”×§××”</span>
                            <span class="ex-title">×™×¦×™×¨×ª Index ×•×”×•×¡×¤×ª × ×ª×•× ×™×</span>
                        </div>
                        <button class="reveal-btn" onclick="toggleSolution('sol-setup')">×”×¦×’ ×¤×ª×¨×•×Ÿ</button>
                    </div>
                    <p style="margin-bottom: 15px;">×¦×•×¨ index ×‘×©× <code>bookdb_index</code> ×¢× 1 shard, ×•×”×•×¡×£ 4 ×¡×¤×¨×™× ×‘×××¦×¢×•×ª <code>_bulk</code> API.</p>
                    <div id="sol-setup" class="solution-box">PUT /bookdb_index
{
  "settings": {
    "number_of_shards": 1
  }
}

POST /bookdb_index/_doc/_bulk
{"index":{"_id":1}}
{"title":"Elasticsearch: The Definitive Guide","authors":["clinton gormley","zachary tong"],"summary":"A distributed real-time search and analytics engine","publish_date":"2015-02-07","num_reviews":20,"publisher":"oreilly"}
{"index":{"_id":2}}
{"title":"Taming Text","authors":["grant ingersoll","thomas morton"],"summary":"organize text using full-text search","publish_date":"2013-01-24","num_reviews":12,"publisher":"manning"}
{"index":{"_id":3}}
{"title":"Elasticsearch in Action","authors":["radu gheorge","matthew lee hinman"],"summary":"build scalable search applications","publish_date":"2015-12-03","num_reviews":18,"publisher":"manning"}
{"index":{"_id":4}}
{"title":"Solr in Action","authors":["trey grainger","timothy potter"],"summary":"Comprehensive guide to Apache Solr","publish_date":"2014-04-05","num_reviews":23,"publisher":"manning"}</div>
                </div>

                <div class="exercise-card">
                    <div class="ex-header">
                        <div style="display: flex; align-items: center; gap: 15px; flex: 1;">
                            <span class="ex-number">01</span>
                            <span class="ex-title">×”×—×–×¨ ××ª ×›×œ ×”-documents</span>
                        </div>
                        <button class="reveal-btn" onclick="toggleSolution('sol-1')">×”×¦×’ ×¤×ª×¨×•×Ÿ</button>
                    </div>
                    <div id="sol-1" class="solution-box">GET /bookdb_index/_search</div>
                </div>

                <div class="exercise-card">
                    <div class="ex-header">
                        <div style="display: flex; align-items: center; gap: 15px; flex: 1;">
                            <span class="ex-number">02</span>
                            <span class="ex-title">×—×™×¤×•×© Multi-Match</span>
                        </div>
                        <button class="reveal-btn" onclick="toggleSolution('sol-2')">×”×¦×’ ×¤×ª×¨×•×Ÿ</button>
                    </div>
                    <p style="margin-bottom: 15px;">×—×¤×© ××ª ×”××™×œ×” "guide" ×‘×›×œ ×”×©×“×•×ª.</p>
                    <div id="sol-2" class="solution-box">POST /bookdb_index/_search
{
  "query": {
    "multi_match": {
      "query": "guide"
    }
  }
}</div>
                </div>

                <div class="exercise-card">
                    <div class="ex-header">
                        <div style="display: flex; align-items: center; gap: 15px; flex: 1;">
                            <span class="ex-number">03</span>
                            <span class="ex-title">×—×™×¤×•×© ×‘×©×“×” ×¡×¤×¦×™×¤×™</span>
                        </div>
                        <button class="reveal-btn" onclick="toggleSolution('sol-3')">×”×¦×’ ×¤×ª×¨×•×Ÿ</button>
                    </div>
                    <p style="margin-bottom: 15px;">×—×¤×© ××ª ×”×‘×™×˜×•×™ "in action" ×‘×©×“×” <strong>title</strong>.</p>
                    <div id="sol-3" class="solution-box">POST /bookdb_index/_search
{
  "query": {
    "match": {
      "title": "in action"
    }
  }
}</div>
                </div>

                <div class="exercise-card">
                    <div class="ex-header">
                        <div style="display: flex; align-items: center; gap: 15px; flex: 1;">
                            <span class="ex-number">04</span>
                            <span class="ex-title">Boosting - ×”×’×‘×¨×ª ×¨×œ×•×•× ×˜×™×•×ª</span>
                        </div>
                        <button class="reveal-btn" onclick="toggleSolution('sol-4')">×”×¦×’ ×¤×ª×¨×•×Ÿ</button>
                    </div>
                    <p style="margin-bottom: 15px;">×—×¤×© "search analytics" ×¢× boost ×©×œ 3.</p>
                    <div id="sol-4" class="solution-box">POST /bookdb_index/_search
{
  "query": {
    "multi_match": {
      "query": "search analytics",
      "boost": 3
    }
  }
}</div>
                </div>

                <div class="exercise-card">
                    <div class="ex-header">
                        <div style="display: flex; align-items: center; gap: 15px; flex: 1;">
                            <span class="ex-number">05</span>
                            <span class="ex-title">×œ×•×’×™×§×” ×‘×•×œ×™×× ×™×ª</span>
                        </div>
                        <button class="reveal-btn" onclick="toggleSolution('sol-5')">×”×¦×’ ×¤×ª×¨×•×Ÿ</button>
                    </div>
                    <p style="margin-bottom: 15px;">××¦× ×¡×¤×¨×™× ×¢× "Elasticsearch" ××• "Solr" ×‘×›×•×ª×¨×ª, ×©× ×›×ª×‘×• ×¢×œ ×™×“×™ "Clinton Gormley", ××‘×œ ×œ× "Radu Gheorge".</p>
                    <div id="sol-5" class="solution-box">POST /bookdb_index/_search
{
  "query": {
    "bool": {
      "must": {
        "bool": {
          "should": [
            {"match": {"title": "Elasticsearch"}},
            {"match": {"title": "Solr"}}
          ],
          "must": {"match": {"authors": "clinton gormley"}}
        }
      },
      "must_not": {"match": {"authors": "radu gheorge"}}
    }
  }
}</div>
                </div>

                <div class="exercise-card">
                    <div class="ex-header">
                        <div style="display: flex; align-items: center; gap: 15px; flex: 1;">
                            <span class="ex-number">06</span>
                            <span class="ex-title">Wildcard & Highlight</span>
                        </div>
                        <button class="reveal-btn" onclick="toggleSolution('sol-6')">×”×¦×’ ×¤×ª×¨×•×Ÿ</button>
                    </div>
                    <p style="margin-bottom: 15px;">××¦× ××—×‘×¨×™× ×©×©×× ××ª×—×™×œ ×‘-'t' ×•×”×“×’×© ××ª ×©×“×” ×”××—×‘×¨×™×.</p>
                    <div id="sol-6" class="solution-box">POST /bookdb_index/_search
{
  "query": {
    "wildcard": {
      "authors": "t*"
    }
  },
  "highlight": {
    "fields": {
      "authors": {}
    }
  }
}</div>
                </div>

                <div class="exercise-card">
                    <div class="ex-header">
                        <div style="display: flex; align-items: center; gap: 15px; flex: 1;">
                            <span class="ex-number">07</span>
                            <span class="ex-title">Regular Expression</span>
                        </div>
                        <button class="reveal-btn" onclick="toggleSolution('sol-7')">×”×¦×’ ×¤×ª×¨×•×Ÿ</button>
                    </div>
                    <p style="margin-bottom: 15px;">××¦× ××—×‘×¨×™× ×©×©×× ××ª×—×™×œ ×‘-'t' ×•××¡×ª×™×™× ×‘-'y'.</p>
                    <div id="sol-7" class="solution-box">POST /bookdb_index/_search
{
  "query": {
    "regexp": {
      "authors": "t[a-z]*y"
    }
  }
}</div>
                </div>

                <div class="exercise-card">
                    <div class="ex-header">
                        <div style="display: flex; align-items: center; gap: 15px; flex: 1;">
                            <span class="ex-number">08</span>
                            <span class="ex-title">Range Query</span>
                        </div>
                        <button class="reveal-btn" onclick="toggleSolution('sol-8')">×”×¦×’ ×¤×ª×¨×•×Ÿ</button>
                    </div>
                    <p style="margin-bottom: 15px;">×—×¤×© ×¡×¤×¨×™× ×©×¤×•×¨×¡××• ×‘-2015 ×‘×œ×‘×“.</p>
                    <div id="sol-8" class="solution-box">POST /bookdb_index/_search
{
  "query": {
    "range": {
      "publish_date": {
        "gte": "2015-01-01",
        "lte": "2015-12-31"
      }
    }
  }
}</div>
                </div>

                <div class="exercise-card">
                    <div class="ex-header">
                        <div style="display: flex; align-items: center; gap: 15px; flex: 1;">
                            <span class="ex-number">09</span>
                            <span class="ex-title">×¡×™× ×•×Ÿ ×ª×•×¦××•×ª</span>
                        </div>
                        <button class="reveal-btn" onclick="toggleSolution('sol-9')">×”×¦×’ ×¤×ª×¨×•×Ÿ</button>
                    </div>
                    <p style="margin-bottom: 15px;">×¡×¤×¨×™× ×¢× "Elasticsearch" ×‘×›×•×ª×¨×ª/×ª×§×¦×™×¨ ×•-20+ ×‘×™×§×•×¨×•×ª.</p>
                    <div id="sol-9" class="solution-box">POST /bookdb_index/_search
{
  "query": {
    "bool": {
      "must": {
        "multi_match": {
          "query": "elasticsearch",
          "fields": ["title", "summary"]
        }
      },
      "filter": {
        "range": {
          "num_reviews": {"gte": 20}
        }
      }
    }
  }
}</div>
                </div>

                <div class="exercise-card">
                    <div class="ex-header">
                        <div style="display: flex; align-items: center; gap: 15px; flex: 1;">
                            <span class="ex-number">10</span>
                            <span class="ex-title">Aggregations - ×¡×¤×™×¨×” ×œ×¤×™ ××•×¦×™× ×œ××•×¨</span>
                        </div>
                        <button class="reveal-btn" onclick="toggleSolution('sol-10')">×”×¦×’ ×¤×ª×¨×•×Ÿ</button>
                    </div>
                    <p style="margin-bottom: 15px;">×§×‘×¥ ××ª ×”×¡×¤×¨×™× ×œ×¤×™ ××•×¦×™× ×œ××•×¨ ×•×—×©×‘ ×××•×¦×¢ ×‘×™×§×•×¨×•×ª ×œ×›×œ ××•×¦×™×.</p>
                    <div id="sol-10" class="solution-box">POST /bookdb_index/_search
{
  "size": 0,
  "aggs": {
    "publishers": {
      "terms": {
        "field": "publisher.keyword"
      },
      "aggs": {
        "avg_reviews": {
          "avg": {
            "field": "num_reviews"
          }
        }
      }
    }
  }
}</div>
                </div>

                <div class="exercise-card">
                    <div class="ex-header">
                        <div style="display: flex; align-items: center; gap: 15px; flex: 1;">
                            <span class="ex-number">11</span>
                            <span class="ex-title">Stats Aggregation</span>
                        </div>
                        <button class="reveal-btn" onclick="toggleSolution('sol-11')">×”×¦×’ ×¤×ª×¨×•×Ÿ</button>
                    </div>
                    <p style="margin-bottom: 15px;">×§×‘×œ ×¡×˜×˜×™×¡×˜×™×§×•×ª ××œ××•×ª (min, max, avg, sum, count) ×¢×œ ××¡×¤×¨ ×”×‘×™×§×•×¨×•×ª.</p>
                    <div id="sol-11" class="solution-box">POST /bookdb_index/_search
{
  "size": 0,
  "aggs": {
    "review_stats": {
      "stats": {
        "field": "num_reviews"
      }
    }
  }
}</div>
                </div>

                <div class="exercise-card">
                    <div class="ex-header">
                        <div style="display: flex; align-items: center; gap: 15px; flex: 1;">
                            <span class="ex-number">12</span>
                            <span class="ex-title">Update by Query</span>
                        </div>
                        <button class="reveal-btn" onclick="toggleSolution('sol-12')">×”×¦×’ ×¤×ª×¨×•×Ÿ</button>
                    </div>
                    <p style="margin-bottom: 15px;">×¢×“×›×Ÿ ××ª ×›×œ ×”×¡×¤×¨×™× ×©×œ "manning" - ×”×•×¡×£ field <code>verified: true</code>.</p>
                    <div id="sol-12" class="solution-box">POST /bookdb_index/_update_by_query
{
  "script": {
    "source": "ctx._source.verified = true"
  },
  "query": {
    "term": {
      "publisher.keyword": "manning"
    }
  }
}</div>
                </div>

                <div class="exercise-card" style="border-right: 5px solid var(--elastic-pink);">
                    <div class="ex-header">
                        <div style="display: flex; align-items: center; gap: 15px; flex: 1;">
                            <span class="ex-number">××ª×’×¨</span>
                            <span class="ex-title">ğŸ“Š Kibana Dashboard ××œ×</span>
                        </div>
                    </div>
                    <p><strong>×¦×•×¨ Dashboard ×‘-Kibana ×¢×:</strong></p>
                    <ul style="padding-right: 25px; margin: 15px 0;">
                        <li>×ª×¨×©×™× Pie ×©×œ ××•×¦×™××™× ×œ××•×¨</li>
                        <li>Bar chart ×©×œ ×××•×¦×¢ ×‘×™×§×•×¨×•×ª ×œ×¤×™ ××•×¦×™×</li>
                        <li>Metric ×©×œ ×¡×š ×›×œ ×”×¡×¤×¨×™×</li>
                        <li>Data Table ×©×œ ×”×¡×¤×¨×™× ×”×¤×•×¤×•×œ×¨×™×™× ×‘×™×•×ª×¨</li>
                        <li>Filter ×œ×¤×™ ××•×¦×™× ×œ××•×¨</li>
                    </ul>

                    <div class="info-card" style="margin-top: 20px;">
                        <h4>ğŸ’¡ ×©×œ×‘×™×:</h4>
                        <ol style="padding-right: 25px;">
                            <li>×¦×•×¨ Index Pattern ×‘-Kibana: Management â†’ Index Patterns â†’ Create</li>
                            <li>×©× Pattern: <code>bookdb_index</code></li>
                            <li>Visualize â†’ Create visualization â†’ ×‘×—×¨ ×¡×•×’</li>
                            <li>×”×’×“×¨ aggregations ×•-buckets</li>
                            <li>×©××•×¨ ×›×œ visualization</li>
                            <li>Dashboard â†’ Create â†’ ×”×•×¡×£ ××ª ×›×œ ×”visualizations</li>
                        </ol>
                    </div>
                </div>

                <div class="success-box" style="margin-top: 40px;">
                    <h3 style="margin-top: 0;">ğŸ“ ×¡×™×™××ª ××ª ×”×ª×¨×’×™×œ×™×!</h3>
                    <p><strong>×¢×›×©×™×• ××ª×” ×™×•×“×¢:</strong></p>
                    <ul>
                        <li>âœ… ×œ×™×¦×•×¨ indices ×¢× settings</li>
                        <li>âœ… ×œ×”×•×¡×™×£ documents (×‘×•×“×“×™× ×•-bulk)</li>
                        <li>âœ… ×œ×‘×¦×¢ ×—×™×¤×•×©×™× ×¤×©×•×˜×™× ×•××•×¨×›×‘×™×</li>
                        <li>âœ… ×œ×”×©×ª××© ×‘-Bool Queries</li>
                        <li>âœ… ×œ×¢×‘×•×“ ×¢× Wildcards ×•-Regex</li>
                        <li>âœ… ×œ×‘×¦×¢ Range queries</li>
                        <li>âœ… ×œ×¡× ×Ÿ ×¢× Filter Context</li>
                        <li>âœ… ×œ×¢×‘×•×“ ×¢× Aggregations</li>
                        <li>âœ… ×œ×¢×“×›×Ÿ documents</li>
                        <li>âœ… ×œ×™×¦×•×¨ Kibana Dashboard!</li>
                    </ul>
                    <p style="margin-top: 20px; font-weight: 600; font-size: 1.1rem;">
                        ğŸš€ ×”××©×š ×œ-CLI & cURL ×œ××“×¨×™×š ××¢×©×™ × ×•×¡×£!
                    </p>
                </div>

            </div>
        </div>
    </div>

    <!-- === CLI VIEW === -->
    <div id="view-cli" class="view-section">
        <div style="padding: 60px; max-width: 1400px; margin: 0 auto;">
            <h1 style="font-size: 2.5rem; margin-bottom: 20px; text-align: center;">âŒ¨ï¸ CLI & cURL - ××“×¨×™×š ××¢×©×™</h1>
            <p style="text-align: center; font-size: 1.1rem; color: var(--text-secondary); margin-bottom: 50px;">
                ×¤×§×•×“×•×ª ×—×™×•× ×™×•×ª ×œ× ×™×”×•×œ Elasticsearch ×“×¨×š ×©×•×¨×ª ×”×¤×§×•×“×”
            </p>

            <!-- Cluster Commands -->
            <div class="comparison-card" style="margin-bottom: 30px;">
                <h2 style="margin-top: 0; color: var(--elastic-blue);">ğŸ¥ Cluster Health & Info</h2>

                <table class="reference-table">
                    <thead>
                        <tr>
                            <th style="text-align: left; direction: ltr;">×¤×§×•×“×”</th>
                            <th>×ª×™××•×¨</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>GET /_cluster/health</code></td>
                            <td>×‘×¨×™××•×ª ×›×œ×œ×™×ª ×©×œ ×”-cluster (green/yellow/red)</td>
                        </tr>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>GET /_cluster/stats</code></td>
                            <td>×¡×˜×˜×™×¡×˜×™×§×•×ª ××¤×•×¨×˜×•×ª ×¢×œ ×”-cluster</td>
                        </tr>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>GET /_nodes</code></td>
                            <td>××™×“×¢ ×¢×œ ×›×œ ×”-nodes ×‘-cluster</td>
                        </tr>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>GET /_nodes/stats</code></td>
                            <td>×¡×˜×˜×™×¡×˜×™×§×•×ª ×©×œ nodes (CPU, RAM, Disk)</td>
                        </tr>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>GET /_cat/nodes?v</code></td>
                            <td>×ª×¦×•×’×” ×˜×‘×œ××™×ª ×©×œ nodes</td>
                        </tr>
                    </tbody>
                </table>

                <h3 style="margin-top: 25px;">×“×•×’×××•×ª cURL:</h3>
                <div class="code-snippet"># Check cluster health
curl -X GET "localhost:9200/_cluster/health?pretty"

# List all nodes
curl -X GET "localhost:9200/_cat/nodes?v"

# Cluster stats
curl -X GET "localhost:9200/_cluster/stats?pretty"</div>
            </div>

            <!-- Index Management -->
            <div class="comparison-card" style="margin-bottom: 30px;">
                <h2 style="margin-top: 0; color: var(--elastic-green);">ğŸ“‚ × ×™×”×•×œ Indices</h2>

                <table class="reference-table">
                    <thead>
                        <tr>
                            <th style="text-align: left; direction: ltr;">×¤×§×•×“×”</th>
                            <th>×ª×™××•×¨</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>GET /_cat/indices?v</code></td>
                            <td>×¨×©×™××ª ×›×œ ×”-indices</td>
                        </tr>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>PUT /my-index</code></td>
                            <td>×™×¦×™×¨×ª index ×—×“×©</td>
                        </tr>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>DELETE /my-index</code></td>
                            <td>××—×™×§×ª index</td>
                        </tr>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>GET /my-index</code></td>
                            <td>××™×“×¢ ×¢×œ index (settings, mappings)</td>
                        </tr>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>GET /my-index/_mapping</code></td>
                            <td>×”×¦×’×ª mapping ×©×œ index</td>
                        </tr>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>GET /my-index/_settings</code></td>
                            <td>×”×¦×’×ª settings ×©×œ index</td>
                        </tr>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>POST /my-index/_close</code></td>
                            <td>×¡×’×™×¨×ª index (××™ ××¤×©×¨ ×œ×§×¨×•×/×œ×›×ª×•×‘)</td>
                        </tr>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>POST /my-index/_open</code></td>
                            <td>×¤×ª×™×—×ª index</td>
                        </tr>
                    </tbody>
                </table>

                <h3 style="margin-top: 25px;">×“×•×’×××•×ª cURL:</h3>
                <div class="code-snippet"># Create index with settings
curl -X PUT "localhost:9200/my-index" -H 'Content-Type: application/json' -d'
{
  "settings": {
    "number_of_shards": 3,
    "number_of_replicas": 2
  }
}'

# List all indices
curl -X GET "localhost:9200/_cat/indices?v"

# Delete index
curl -X DELETE "localhost:9200/my-index"

# Get mapping
curl -X GET "localhost:9200/my-index/_mapping?pretty"</div>
            </div>

            <!-- Document Operations -->
            <div class="comparison-card" style="margin-bottom: 30px;">
                <h2 style="margin-top: 0; color: var(--elastic-yellow);">ğŸ“„ CRUD ×¢×œ Documents</h2>

                <h3>Create / Index:</h3>
                <div class="code-snippet"># Index with auto-generated ID
curl -X POST "localhost:9200/my-index/_doc" -H 'Content-Type: application/json' -d'
{
  "user": "John",
  "message": "Hello Elasticsearch",
  "timestamp": "2024-01-15T12:00:00"
}'

# Index with specific ID
curl -X PUT "localhost:9200/my-index/_doc/1" -H 'Content-Type: application/json' -d'
{
  "user": "Jane",
  "message": "Welcome"
}'</div>

                <h3 style="margin-top: 25px;">Read:</h3>
                <div class="code-snippet"># Get document by ID
curl -X GET "localhost:9200/my-index/_doc/1?pretty"

# Get only _source
curl -X GET "localhost:9200/my-index/_source/1?pretty"

# Get specific fields
curl -X GET "localhost:9200/my-index/_doc/1?_source=user,message"</div>

                <h3 style="margin-top: 25px;">Update:</h3>
                <div class="code-snippet"># Partial update
curl -X POST "localhost:9200/my-index/_update/1" -H 'Content-Type: application/json' -d'
{
  "doc": {
    "message": "Updated message"
  }
}'

# Update with script
curl -X POST "localhost:9200/my-index/_update/1" -H 'Content-Type: application/json' -d'
{
  "script": {
    "source": "ctx._source.counter += params.count",
    "params": {
      "count": 1
    }
  }
}'</div>

                <h3 style="margin-top: 25px;">Delete:</h3>
                <div class="code-snippet"># Delete document
curl -X DELETE "localhost:9200/my-index/_doc/1"

# Delete by query
curl -X POST "localhost:9200/my-index/_delete_by_query" -H 'Content-Type: application/json' -d'
{
  "query": {
    "match": {
      "user": "John"
    }
  }
}'</div>
            </div>

            <!-- Search Queries -->
            <div class="comparison-card" style="margin-bottom: 30px;">
                <h2 style="margin-top: 0; color: var(--elastic-pink);">ğŸ” Search Queries × ×¤×•×¦×•×ª</h2>

                <h3>Match All:</h3>
                <div class="code-snippet">curl -X GET "localhost:9200/my-index/_search?pretty" -H 'Content-Type: application/json' -d'
{
  "query": {
    "match_all": {}
  }
}'</div>

                <h3 style="margin-top: 25px;">Match Query:</h3>
                <div class="code-snippet">curl -X POST "localhost:9200/my-index/_search?pretty" -H 'Content-Type: application/json' -d'
{
  "query": {
    "match": {
      "message": "elasticsearch guide"
    }
  }
}'</div>

                <h3 style="margin-top: 25px;">Bool Query (××•×¨×›×‘):</h3>
                <div class="code-snippet">curl -X POST "localhost:9200/my-index/_search?pretty" -H 'Content-Type: application/json' -d'
{
  "query": {
    "bool": {
      "must": [
        { "match": { "title": "elasticsearch" }}
      ],
      "filter": [
        { "range": { "num_reviews": { "gte": 20 }}}
      ],
      "must_not": [
        { "match": { "publisher": "manning" }}
      ],
      "should": [
        { "match": { "summary": "distributed" }}
      ]
    }
  }
}'</div>

                <h3 style="margin-top: 25px;">Aggregations:</h3>
                <div class="code-snippet">curl -X POST "localhost:9200/my-index/_search?pretty" -H 'Content-Type: application/json' -d'
{
  "size": 0,
  "aggs": {
    "publishers": {
      "terms": {
        "field": "publisher.keyword"
      }
    },
    "avg_reviews": {
      "avg": {
        "field": "num_reviews"
      }
    }
  }
}'</div>
            </div>

            <!-- Bulk Operations -->
            <div class="comparison-card" style="margin-bottom: 30px;">
                <h2 style="margin-top: 0; color: var(--elastic-blue);">ğŸ“¦ Bulk Operations</h2>

                <div class="code-snippet"># Bulk API - multiple operations in one call
curl -X POST "localhost:9200/_bulk" -H 'Content-Type: application/json' -d'
{ "index": { "_index": "test", "_id": "1" }}
{ "field1": "value1" }
{ "delete": { "_index": "test", "_id": "2" }}
{ "create": { "_index": "test", "_id": "3" }}
{ "field1": "value3" }
{ "update": { "_index": "test", "_id": "1" }}
{ "doc": { "field2": "value2" }}
'

# From file
curl -X POST "localhost:9200/_bulk" -H 'Content-Type: application/json' --data-binary "@requests.json"</div>

                <div class="success-box" style="margin-top: 25px;">
                    <h4>ğŸ’¡ ×˜×™×¤:</h4>
                    <p>Bulk API ×”×¨×‘×” ×™×•×ª×¨ ×™×¢×™×œ ××‘×™×¦×•×¢ operations ×‘×•×“×“×•×ª - ×”×©×ª××© ×‘×• ×œ×›××•×™×•×ª ×’×“×•×œ×•×ª!</p>
                </div>
            </div>

            <!-- Useful Commands -->
            <div class="success-box">
                <h3 style="margin-top: 0;">ğŸ’¡ ×¤×§×•×“×•×ª ×©×™××•×©×™×•×ª</h3>

                <h4>××—×™×§×” ××”×™×¨×” ×©×œ ×›×œ ×”-Indices:</h4>
                <div class="code-snippet"># âš ï¸ ×–×”×™×¨×•×ª! ××•×—×§ ×”×›×œ
curl -X DELETE "localhost:9200/*"

# ××—×™×§×ª indices ×¡×¤×¦×™×¤×™×™×
curl -X DELETE "localhost:9200/logs-*"</div>

                <h4 style="margin-top: 20px;">Reindex:</h4>
                <div class="code-snippet"># ×”×¢×ª×§×ª × ×ª×•× ×™× ×-index ××—×“ ×œ××—×¨
curl -X POST "localhost:9200/_reindex" -H 'Content-Type: application/json' -d'
{
  "source": {
    "index": "old-index"
  },
  "dest": {
    "index": "new-index"
  }
}'</div>

                <h4 style="margin-top: 20px;">Count:</h4>
                <div class="code-snippet"># ×¡×¤×™×¨×ª documents
curl -X GET "localhost:9200/my-index/_count?pretty"

# ×¡×¤×™×¨×” ×¢× query
curl -X POST "localhost:9200/my-index/_count" -H 'Content-Type: application/json' -d'
{
  "query": {
    "match": { "status": "active" }
  }
}'</div>
            </div>
        </div>
    </div>

    <!-- === TROUBLESHOOTING VIEW === -->
    <div id="view-troubleshooting" class="view-section">
        <div style="padding: 60px; max-width: 1400px; margin: 0 auto;">
            <h1 style="font-size: 2.5rem; margin-bottom: 20px; text-align: center;">ğŸ”§ ××“×¨×™×š ×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª</h1>
            <p style="text-align: center; font-size: 1.1rem; color: var(--text-secondary); margin-bottom: 50px;">
                ×¤×ª×¨×•× ×•×ª ×œ×‘×¢×™×•×ª ×”× ×¤×•×¦×•×ª ×‘×™×•×ª×¨ ×‘-Elasticsearch
            </p>

            <!-- Issue 1: Cluster Health Red/Yellow -->
            <div class="warning-box" style="margin-bottom: 30px;">
                <h2 style="margin-top: 0; color: #dc2626;">ğŸ”´ Cluster Status: Red/Yellow</h2>

                <h3>Red = ××•×‘×“×Ÿ × ×ª×•× ×™×!</h3>
                <ul>
                    <li>×œ×¤×—×•×ª shard ××—×“ primary ×—×¡×¨</li>
                    <li>×—×œ×§ ××”× ×ª×•× ×™× ×œ× ×–××™× ×™×</li>
                    <li><strong>×“×—×•×£!</strong> ×¦×¨×™×š ×œ×˜×¤×œ ××™×“</li>
                </ul>

                <h3 style="margin-top: 25px;">Yellow = ×œ× ××•×¤×˜×™××œ×™</h3>
                <ul>
                    <li>×›×œ ×”-primary shards ×–××™× ×™×</li>
                    <li>××‘×œ ×œ×¤×—×•×ª replica shard ××—×“ ×—×¡×¨</li>
                    <li>×¤×—×•×ª high availability</li>
                </ul>

                <h3 style="margin-top: 25px;">âœ… ×¤×ª×¨×•× ×•×ª:</h3>

                <h4>1. ×‘×“×•×§ ××” ×”×‘×¢×™×”:</h4>
                <div class="code-snippet">curl -X GET "localhost:9200/_cluster/health?pretty"

curl -X GET "localhost:9200/_cat/shards?v"

# ×—×¤×© shards ×¢× state UNASSIGNED
curl -X GET "localhost:9200/_cat/shards?v&h=index,shard,prirep,state,node" | grep UNASSIGNED</div>

                <h4>2. ×‘×“×•×§ Allocation Explain:</h4>
                <div class="code-snippet">curl -X GET "localhost:9200/_cluster/allocation/explain?pretty"

# ××¡×‘×™×¨ ×œ××” shard ×œ× ××•×§×¦×”</div>

                <h4>3. ×¤×ª×¨×•× ×•×ª × ×¤×•×¦×™×:</h4>
                <div class="code-snippet"># ×”×§×˜× ×ª ××¡×¤×¨ Replicas (×× ××™×Ÿ ××¡×¤×™×§ nodes)
curl -X PUT "localhost:9200/my-index/_settings" -H 'Content-Type: application/json' -d'
{
  "index": {
    "number_of_replicas": 0
  }
}'

# Retry allocation ×©×œ failed shards
curl -X POST "localhost:9200/_cluster/reroute?retry_failed=true"

# ×”×’×“×œ×ª timeout
curl -X PUT "localhost:9200/_cluster/settings" -H 'Content-Type: application/json' -d'
{
  "persistent": {
    "cluster.routing.allocation.node_initial_primaries_recoveries": 4
  }
}'</div>
            </div>

            <!-- Issue 2: Out of Disk Space -->
            <div class="warning-box" style="margin-bottom: 30px;">
                <h2 style="margin-top: 0; color: #dc2626;">ğŸ’¾ Out of Disk Space</h2>

                <h3>×¡×™××¤×˜×•××™×:</h3>
                <ul>
                    <li>Read-only indices</li>
                    <li>×œ× ××¦×œ×™×— ×œ×”×•×¡×™×£ documents</li>
                    <li>×”×•×“×¢×ª ×©×’×™××”: "disk usage exceeded flood-stage watermark"</li>
                </ul>

                <h3 style="margin-top: 25px;">âœ… ×¤×ª×¨×•× ×•×ª:</h3>

                <h4>1. ×‘×“×•×§ ×©×™××•×© ×‘×“×™×¡×§:</h4>
                <div class="code-snippet">curl -X GET "localhost:9200/_cat/allocation?v"

curl -X GET "localhost:9200/_nodes/stats/fs?pretty"</div>

                <h4>2. ××—×§ indices ×™×©× ×™×:</h4>
                <div class="code-snippet"># ××—×§ indices ×™×©× ×™× ××ª××¨×™×š ××¡×•×™×
curl -X DELETE "localhost:9200/logs-2023-*"

# Curator ×œ× ×™×”×•×œ ××•×˜×•××˜×™ ×©×œ indices
# pip install elasticsearch-curator</div>

                <h4>3. ×”×¡×¨ Read-Only Mode:</h4>
                <div class="code-snippet"># ×”×¡×¨×ª read-only mode ××›×œ ×”-indices
curl -X PUT "localhost:9200/*/_settings" -H 'Content-Type: application/json' -d'
{
  "index.blocks.read_only_allow_delete": null
}'</div>

                <h4>4. ×”×’×“×œ Disk Watermarks:</h4>
                <div class="code-snippet">curl -X PUT "localhost:9200/_cluster/settings" -H 'Content-Type: application/json' -d'
{
  "persistent": {
    "cluster.routing.allocation.disk.watermark.low": "90%",
    "cluster.routing.allocation.disk.watermark.high": "95%",
    "cluster.routing.allocation.disk.watermark.flood_stage": "97%"
  }
}'</div>
            </div>

            <!-- Issue 3: Slow Queries -->
            <div class="warning-box" style="margin-bottom: 30px;">
                <h2 style="margin-top: 0; color: #f59e0b;">ğŸŒ Queries ××™×˜×™×•×ª</h2>

                <h3>âœ… Debug Steps:</h3>

                <h4>1. Profile Query:</h4>
                <div class="code-snippet">curl -X POST "localhost:9200/my-index/_search?pretty" -H 'Content-Type: application/json' -d'
{
  "profile": true,
  "query": {
    "match": { "message": "search term" }
  }
}'

# ×™×¦×™×’ breakdown ××¤×•×¨×˜ ×©×œ ×–×× ×™ ×‘×™×¦×•×¢</div>

                <h4>2. ×‘×“×•×§ Slow Logs:</h4>
                <div class="code-snippet"># ×”×¤×¢×œ×ª slow query logging
curl -X PUT "localhost:9200/my-index/_settings" -H 'Content-Type: application/json' -d'
{
  "index.search.slowlog.threshold.query.warn": "10s",
  "index.search.slowlog.threshold.query.info": "5s",
  "index.search.slowlog.threshold.fetch.warn": "1s"
}'

# Logs ×‘:
# /var/log/elasticsearch/my-cluster_index_search_slowlog.log</div>

                <h4>3. ××•×¤×˜×™××™×–×¦×™×•×ª:</h4>
                <div class="code-snippet"># ×”×©×ª××© ×‘-Filter Context (cacheable!)
{
  "query": {
    "bool": {
      "filter": [  # ×‘××§×•× "must"
        { "term": { "status": "active" }}
      ]
    }
  }
}

# ×”×’×‘×œ ×ª×•×¦××•×ª
{
  "size": 10,  # ×œ× 10000!
  "query": {...}
}

# _source filtering - ×¨×§ ×©×“×•×ª × ×“×¨×©×™×
{
  "_source": ["title", "author"],
  "query": {...}
}</div>

                <h4>4. Force Merge (indices ×™×©× ×™× ×‘×œ×‘×“!):</h4>
                <div class="code-snippet"># ×œ× ×œ×¢×©×•×ª ×¢×œ indices ×¤×¢×™×œ×™×!
curl -X POST "localhost:9200/old-index/_forcemerge?max_num_segments=1"</div>
            </div>

            <!-- Issue 4: Memory Issues -->
            <div class="warning-box" style="margin-bottom: 30px;">
                <h2 style="margin-top: 0; color: #dc2626;">ğŸ’¥ OutOfMemory Errors</h2>

                <h3>âœ… ×¤×ª×¨×•× ×•×ª:</h3>

                <h4>1. ×”×’×“×¨ Heap Size × ×›×•×Ÿ:</h4>
                <div class="code-snippet"># jvm.options
# ×›×œ×œ ××¦×‘×¢: 50% ××”-RAM, ××§×¡×™××•× 32GB

-Xms4g
-Xmx4g  # ×—×™×™×‘ ×œ×”×™×•×ª ×–×”×” ×œ-Xms!</div>

                <h4>2. ×‘×“×•×§ ×©×™××•×© ×‘×–×™×›×¨×•×Ÿ:</h4>
                <div class="code-snippet">curl -X GET "localhost:9200/_nodes/stats/jvm?pretty"

# ×‘×“×•×§ heap_used_percent - ×œ× ×¦×¨×™×š ×œ×¢×‘×•×¨ 75%</div>

                <h4>3. × ×§×” Caches:</h4>
                <div class="code-snippet"># × ×™×§×•×™ cache
curl -X POST "localhost:9200/_cache/clear"

# × ×™×§×•×™ fielddata
curl -X POST "localhost:9200/my-index/_cache/clear?fielddata=true"</div>

                <h4>4. ×”×’×‘×œ Aggregations:</h4>
                <div class="code-snippet"># ×”×’×‘×œ cardinality aggregations
{
  "aggs": {
    "unique_users": {
      "cardinality": {
        "field": "user_id",
        "precision_threshold": 3000  # default: 3000
      }
    }
  }
}</div>
            </div>

            <!-- Issue 5: Connection Refused -->
            <div class="warning-box" style="margin-bottom: 30px;">
                <h2 style="margin-top: 0; color: #dc2626;">ğŸ”Œ Connection Refused</h2>

                <h3>âœ… ×‘×“×™×§×•×ª:</h3>

                <h4>1. ×‘×“×•×§ ×©-Elasticsearch ×¨×¥:</h4>
                <div class="code-snippet"># Check process
ps aux | grep elasticsearch

# Check port
netstat -tlnp | grep 9200

# With Docker
docker ps | grep elasticsearch</div>

                <h4>2. ×‘×“×•×§ Logs:</h4>
                <div class="code-snippet"># Logs location (depends on installation)
tail -f /var/log/elasticsearch/my-cluster.log

# Docker logs
docker logs elasticsearch</div>

                <h4>3. ×‘×“×•×§ network.host:</h4>
                <div class="code-snippet"># elasticsearch.yml
network.host: 0.0.0.0  # Listen on all interfaces

# ××•
network.host: localhost  # Only local connections</div>
            </div>

            <!-- Debug Checklist -->
            <div class="success-box">
                <h3 style="margin-top: 0;">âœ… Debug Checklist</h3>
                <ol style="font-size: 1.05rem; line-height: 2;">
                    <li>âœ… <strong>Cluster Health:</strong> <code>GET /_cluster/health</code></li>
                    <li>âœ… <strong>Check Nodes:</strong> <code>GET /_cat/nodes?v</code></li>
                    <li>âœ… <strong>Check Indices:</strong> <code>GET /_cat/indices?v</code></li>
                    <li>âœ… <strong>Check Shards:</strong> <code>GET /_cat/shards?v</code></li>
                    <li>âœ… <strong>Disk Space:</strong> <code>GET /_cat/allocation?v</code></li>
                    <li>âœ… <strong>Logs:</strong> tail -f elasticsearch.log</li>
                    <li>âœ… <strong>Profile Slow Query:</strong> profile: true</li>
                </ol>
            </div>
        </div>
    </div>

    <!-- === QUICK REFERENCE VIEW === -->
    <div id="view-quickref" class="view-section">
        <div style="padding: 60px; max-width: 1400px; margin: 0 auto;">
            <h1 style="font-size: 2.5rem; margin-bottom: 20px; text-align: center;">ğŸ“‹ Quick Reference</h1>
            <p style="text-align: center; font-size: 1.1rem; color: var(--text-secondary); margin-bottom: 50px;">
                ×›×œ ××” ×©×¦×¨×™×š ×‘××§×•× ××—×“
            </p>

            <!-- Query Types -->
            <div class="comparison-card" style="margin-bottom: 30px;">
                <h2 style="margin-top: 0; color: var(--elastic-blue);">ğŸ” Query Types</h2>

                <table class="reference-table">
                    <thead>
                        <tr>
                            <th style="text-align: left; direction: ltr;">Query Type</th>
                            <th>×ª×™××•×¨</th>
                            <th>Use Case</th>
                            <th style="text-align: left; direction: ltr;">×“×•×’××”</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>match</code></td>
                            <td>Full-text search (×¢× analysis)</td>
                            <td>×—×™×¤×•×© ×˜×§×¡×˜ ×¨×’×™×œ</td>
                            <td style="direction: ltr; text-align: left;"><code>{"match": {"field": "text"}}</code></td>
                        </tr>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>match_phrase</code></td>
                            <td>×‘×™×˜×•×™ ××“×•×™×§ (×‘×¡×“×¨)</td>
                            <td>×—×™×¤×•×© ×¦×™×¨×•×£ ××™×œ×™×</td>
                            <td style="direction: ltr; text-align: left;"><code>{"match_phrase": {"field": "quick brown"}}</code></td>
                        </tr>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>multi_match</code></td>
                            <td>×—×™×¤×•×© ×‘××¡×¤×¨ fields</td>
                            <td>×—×™×¤×•×© ×’×œ×•×‘×œ×™</td>
                            <td style="direction: ltr; text-align: left;"><code>{"multi_match": {"query": "x", "fields": ["*"]}}</code></td>
                        </tr>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>term</code></td>
                            <td>×¢×¨×š ××“×•×™×§ (×œ×œ× analysis)</td>
                            <td>IDs, statuses, keywords</td>
                            <td style="direction: ltr; text-align: left;"><code>{"term": {"status": "active"}}</code></td>
                        </tr>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>terms</code></td>
                            <td>××¡×¤×¨ ×¢×¨×›×™× (OR)</td>
                            <td>×—×™×¤×•×© ×‘×¨×©×™××”</td>
                            <td style="direction: ltr; text-align: left;"><code>{"terms": {"tag": ["a", "b"]}}</code></td>
                        </tr>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>range</code></td>
                            <td>×˜×•×•×— (×ª××¨×™×›×™×, ××¡×¤×¨×™×)</td>
                            <td>×¡×™× ×•×Ÿ ×œ×¤×™ ×˜×•×•×—</td>
                            <td style="direction: ltr; text-align: left;"><code>{"range": {"age": {"gte": 18}}}</code></td>
                        </tr>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>exists</code></td>
                            <td>field ×§×™×™× (not null)</td>
                            <td>×‘×“×™×§×ª ×©×“×•×ª ×—×¡×¨×™×</td>
                            <td style="direction: ltr; text-align: left;"><code>{"exists": {"field": "email"}}</code></td>
                        </tr>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>wildcard</code></td>
                            <td>×ª×•×•×™× ×›×œ×œ×™×™× (* ?)</td>
                            <td>pattern matching</td>
                            <td style="direction: ltr; text-align: left;"><code>{"wildcard": {"name": "john*"}}</code></td>
                        </tr>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>regexp</code></td>
                            <td>Regular expressions</td>
                            <td>×—×™×¤×•×© ××•×¨×›×‘</td>
                            <td style="direction: ltr; text-align: left;"><code>{"regexp": {"name": "j.*n"}}</code></td>
                        </tr>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>bool</code></td>
                            <td>×©×™×œ×•×‘ queries (must/should/must_not)</td>
                            <td>×œ×•×’×™×§×” ××•×¨×›×‘×ª</td>
                            <td style="direction: ltr; text-align: left;"><code>{"bool": {"must": [...], "filter": [...]}}</code></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Aggregations Reference -->
            <div class="comparison-card" style="margin-bottom: 30px;">
                <h2 style="margin-top: 0; color: var(--elastic-green);">ğŸ“Š Aggregations Reference</h2>

                <h3>Metric Aggregations:</h3>
                <table class="reference-table">
                    <thead>
                        <tr>
                            <th style="text-align: left; direction: ltr;">Type</th>
                            <th>×ª×™××•×¨</th>
                            <th style="text-align: left; direction: ltr;">×“×•×’××”</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>avg</code></td>
                            <td>×××•×¦×¢</td>
                            <td style="direction: ltr; text-align: left;"><code>{"avg": {"field": "price"}}</code></td>
                        </tr>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>sum</code></td>
                            <td>×¡×›×•×</td>
                            <td style="direction: ltr; text-align: left;"><code>{"sum": {"field": "amount"}}</code></td>
                        </tr>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>min / max</code></td>
                            <td>××™× ×™××•× / ××§×¡×™××•×</td>
                            <td style="direction: ltr; text-align: left;"><code>{"max": {"field": "age"}}</code></td>
                        </tr>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>stats</code></td>
                            <td>×›×œ ×”× "×œ (count, min, max, avg, sum)</td>
                            <td style="direction: ltr; text-align: left;"><code>{"stats": {"field": "price"}}</code></td>
                        </tr>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>cardinality</code></td>
                            <td>×¡×¤×™×¨×ª ×¢×¨×›×™× ×™×™×—×•×“×™×™× (distinct)</td>
                            <td style="direction: ltr; text-align: left;"><code>{"cardinality": {"field": "user_id"}}</code></td>
                        </tr>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>percentiles</code></td>
                            <td>××—×•×–×•× ×™× (50th, 95th, 99th)</td>
                            <td style="direction: ltr; text-align: left;"><code>{"percentiles": {"field": "response_time"}}</code></td>
                        </tr>
                    </tbody>
                </table>

                <h3 style="margin-top: 30px;">Bucket Aggregations:</h3>
                <table class="reference-table">
                    <thead>
                        <tr>
                            <th style="text-align: left; direction: ltr;">Type</th>
                            <th>×ª×™××•×¨</th>
                            <th style="text-align: left; direction: ltr;">×“×•×’××”</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>terms</code></td>
                            <td>×§×™×‘×•×¥ ×œ×¤×™ ×¢×¨×›×™× (top N)</td>
                            <td style="direction: ltr; text-align: left;"><code>{"terms": {"field": "category.keyword", "size": 10}}</code></td>
                        </tr>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>date_histogram</code></td>
                            <td>×§×™×‘×•×¥ ×œ×¤×™ ×ª××¨×™×›×™×</td>
                            <td style="direction: ltr; text-align: left;"><code>{"date_histogram": {"field": "date", "interval": "1d"}}</code></td>
                        </tr>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>histogram</code></td>
                            <td>×§×™×‘×•×¥ ×œ×¤×™ ××¡×¤×¨×™×</td>
                            <td style="direction: ltr; text-align: left;"><code>{"histogram": {"field": "price", "interval": 50}}</code></td>
                        </tr>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>range</code></td>
                            <td>×§×™×‘×•×¥ ×œ×¤×™ ×˜×•×•×—×™× ××•×ª×××™×</td>
                            <td style="direction: ltr; text-align: left;"><code>{"range": {"field": "age", "ranges": [...]}}</code></td>
                        </tr>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>filter</code></td>
                            <td>bucket ××—×“ ×¢× filter</td>
                            <td style="direction: ltr; text-align: left;"><code>{"filter": {"term": {"status": "active"}}}</code></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Field Data Types -->
            <div class="comparison-card" style="margin-bottom: 30px;">
                <h2 style="margin-top: 0; color: var(--elastic-yellow);">ğŸ“ Field Data Types</h2>

                <table class="reference-table">
                    <thead>
                        <tr>
                            <th style="text-align: left; direction: ltr;">Type</th>
                            <th>×ª×™××•×¨</th>
                            <th>Use Case</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>text</code></td>
                            <td>Full-text search (analyzed)</td>
                            <td>×ª×™××•×¨×™×, ×ª×•×›×Ÿ, ×”×•×“×¢×•×ª</td>
                        </tr>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>keyword</code></td>
                            <td>Exact values (not analyzed)</td>
                            <td>IDs, statuses, tags, emails</td>
                        </tr>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>long / integer / short</code></td>
                            <td>××¡×¤×¨×™× ×©×œ××™×</td>
                            <td>age, count, IDs</td>
                        </tr>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>float / double</code></td>
                            <td>××¡×¤×¨×™× ×¢×©×¨×•× ×™×™×</td>
                            <td>price, coordinates</td>
                        </tr>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>date</code></td>
                            <td>×ª××¨×™×›×™× ×•×©×¢×•×ª</td>
                            <td>timestamps, created_at</td>
                        </tr>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>boolean</code></td>
                            <td>true / false</td>
                            <td>flags, states</td>
                        </tr>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>ip</code></td>
                            <td>×›×ª×•×‘×•×ª IP</td>
                            <td>source_ip, client_ip</td>
                        </tr>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>geo_point</code></td>
                            <td>× ×§×•×“×” ×’×™××•×’×¨×¤×™×ª (lat/lon)</td>
                            <td>××™×§×•××™×, GPS</td>
                        </tr>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>object</code></td>
                            <td>JSON object ××§×•× ×Ÿ</td>
                            <td>××‘× ×™× ××•×¨×›×‘×™×</td>
                        </tr>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>nested</code></td>
                            <td>Array of objects (× ×™×ª×Ÿ ×œquery × ×¤×¨×“)</td>
                            <td>×¨×©×™××•×ª ×©×œ ××•×‘×™×™×§×˜×™×</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Common API Endpoints -->
            <div class="comparison-card" style="margin-bottom: 30px;">
                <h2 style="margin-top: 0; color: var(--elastic-pink);">ğŸŒ Common API Endpoints</h2>

                <h3>Cluster APIs:</h3>
                <div class="code-snippet">GET /_cluster/health
GET /_cluster/stats
GET /_cluster/state
GET /_nodes
GET /_nodes/stats
PUT /_cluster/settings</div>

                <h3 style="margin-top: 25px;">Index APIs:</h3>
                <div class="code-snippet">GET /_cat/indices?v
PUT /my-index
DELETE /my-index
GET /my-index
GET /my-index/_mapping
GET /my-index/_settings
POST /my-index/_refresh
POST /my-index/_flush
POST /my-index/_forcemerge</div>

                <h3 style="margin-top: 25px;">Document APIs:</h3>
                <div class="code-snippet">POST /my-index/_doc
PUT /my-index/_doc/1
GET /my-index/_doc/1
DELETE /my-index/_doc/1
POST /my-index/_update/1
POST /my-index/_search
POST /_bulk
POST /my-index/_delete_by_query</div>

                <h3 style="margin-top: 25px;">Search & Aggregation:</h3>
                <div class="code-snippet">POST /my-index/_search
POST /my-index/_count
POST /my-index/_validate/query
POST /my-index/_explain/1</div>
            </div>

            <!-- Bool Query Structure -->
            <div class="comparison-card" style="margin-bottom: 30px;">
                <h2 style="margin-top: 0; color: var(--elastic-blue);">ğŸ”€ Bool Query - ××‘× ×”</h2>

                <table class="reference-table">
                    <thead>
                        <tr>
                            <th style="text-align: left; direction: ltr;">Clause</th>
                            <th>××©××¢×•×ª</th>
                            <th>Score?</th>
                            <th>Use Case</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>must</code></td>
                            <td>×—×™×™×‘ ×œ×”×ª××™× (AND)</td>
                            <td>âœ… ×›×Ÿ</td>
                            <td>×ª× ××™ ×—×•×‘×” ×©××©×¤×™×¢ ×¢×œ ×¨×œ×•×•× ×˜×™×•×ª</td>
                        </tr>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>filter</code></td>
                            <td>×—×™×™×‘ ×œ×”×ª××™× (AND)</td>
                            <td>âŒ ×œ×</td>
                            <td>×¡×™× ×•×Ÿ ×œ×œ× ×”×©×¤×¢×” ×¢×œ score (××”×™×¨, cacheable!)</td>
                        </tr>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>should</code></td>
                            <td>×¨×¦×•×™ ×©×™×ª××™× (OR)</td>
                            <td>âœ… ×›×Ÿ</td>
                            <td>×ª× ××™ ××•×¤×¦×™×•× ×œ×™ ×©××©×¤×¨ ××ª ×”-score</td>
                        </tr>
                        <tr>
                            <td style="direction: ltr; text-align: left;"><code>must_not</code></td>
                            <td>×œ× ×¦×¨×™×š ×œ×”×ª××™× (NOT)</td>
                            <td>âŒ ×œ×</td>
                            <td>×”×—×¨×’×”</td>
                        </tr>
                    </tbody>
                </table>

                <div class="success-box" style="margin-top: 25px;">
                    <h4>ğŸ’¡ Best Practice:</h4>
                    <p>×”×©×ª××© ×‘-<strong>filter</strong> ×‘××§×•× <strong>must</strong> ×›××©×¨ ××™×Ÿ ×¦×•×¨×š ×‘-scoring!</p>
                    <p>filter = cacheable = ×”×¨×‘×” ×™×•×ª×¨ ××”×™×¨! âš¡</p>
                </div>
            </div>

            <!-- Mapping Example -->
            <div class="comparison-card" style="margin-bottom: 30px;">
                <h2 style="margin-top: 0; color: var(--elastic-green);">ğŸ—ºï¸ Mapping Template</h2>
                <div class="code-snippet">PUT /my-index
{
  "settings": {
    "number_of_shards": 3,
    "number_of_replicas": 2,
    "refresh_interval": "1s"
  },
  "mappings": {
    "properties": {
      "title": {
        "type": "text",
        "fields": {
          "keyword": {  # Multi-field
            "type": "keyword"
          }
        }
      },
      "author": {
        "type": "keyword"
      },
      "published_date": {
        "type": "date",
        "format": "yyyy-MM-dd"
      },
      "pages": {
        "type": "integer"
      },
      "price": {
        "type": "float"
      },
      "available": {
        "type": "boolean"
      },
      "description": {
        "type": "text",
        "analyzer": "english"
      },
      "location": {
        "type": "geo_point"
      },
      "tags": {
        "type": "keyword"  # Array of keywords
      }
    }
  }
}</div>
            </div>

            <!-- Useful Patterns -->
            <div class="success-box">
                <h3 style="margin-top: 0;">ğŸ¯ Patterns ×©×™××•×©×™×™×</h3>

                <h4>Pagination:</h4>
                <div class="code-snippet"># from + size
{
  "from": 0,
  "size": 10,
  "query": {...}
}

# Search After (××•××œ×¥ ×œ×›××•×™×•×ª ×’×“×•×œ×•×ª)
{
  "size": 10,
  "query": {...},
  "search_after": [1463538857, "654323"],
  "sort": [
    {"timestamp": "asc"},
    {"_id": "asc"}
  ]
}</div>

                <h4 style="margin-top: 20px;">Highlighting:</h4>
                <div class="code-snippet">{
  "query": {...},
  "highlight": {
    "fields": {
      "message": {}
    },
    "pre_tags": ["<em>"],
    "post_tags": ["</em>"]
  }
}</div>

                <h4 style="margin-top: 20px;">Sorting:</h4>
                <div class="code-snippet">{
  "query": {...},
  "sort": [
    { "publish_date": "desc" },
    { "title.keyword": "asc" },
    "_score"
  ]
}</div>
            </div>
        </div>
    </div>

</div>

<!-- Copy Notification -->
<div class="copy-notification" id="copyNotification">
    âœ… ×”×•×¢×ª×§ ×œ×œ×•×—!
</div>

<script>
    /* === NAVIGATION === */
    function switchView(viewId, btn) {
        document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
        document.getElementById('view-' + viewId).classList.add('active');

        document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
        btn.classList.add('active');
    }

    function showTheorySection(sectionId, btn) {
        document.querySelectorAll('.theory-section').forEach(el => el.classList.remove('active'));
        document.getElementById('theory-' + sectionId).classList.add('active');

        document.querySelectorAll('.theory-nav-item').forEach(el => el.classList.remove('active'));
        btn.classList.add('active');
    }

    function toggleSolution(id) {
        const el = document.getElementById(id);
        const btn = event.target;
        if(el.style.display === 'block') {
            el.style.display = 'none';
            btn.innerText = '×”×¦×’ ×¤×ª×¨×•×Ÿ';
        } else {
            el.style.display = 'block';
            btn.innerText = '×”×¡×ª×¨ ×¤×ª×¨×•×Ÿ';
        }
    }

    /* === SIMULATOR === */
    let isProcessing = false;
    let nodes = [0, 1];
    let docId = 1;
    let stats = { info: 0, warn: 0, error: 0 };

    function runPipeline() {
        if(isProcessing) return;
        isProcessing = true;

        const btn = document.getElementById('runBtn');
        btn.innerText = "â³ ××¢×‘×“...";
        btn.disabled = true;

        const rawLog = document.getElementById('rawLogInput').value;
        const packet = document.getElementById('packet');
        const track = document.getElementById('pipelineTrack').getBoundingClientRect();

        packet.style.display = 'block';
        const startPos = track.width * 0.85;
        packet.style.right = startPos + 'px';

        // Beats -> Logstash
        packet.animate([
            { right: startPos + 'px' },
            { right: (track.width / 2) + 'px' }
        ], { duration: 1000, fill: 'forwards' }).onfinish = () => {

            const parsed = parseLog(rawLog);
            document.getElementById('logstash-out').innerHTML =
                `<span style="color:#10b981;">âœ“ Parsed:</span>\n${JSON.stringify(parsed, null, 2)}`;

            setTimeout(() => {
                // Logstash -> ES
                packet.animate([
                    { right: (track.width / 2) + 'px' },
                    { right: '80px' }
                ], { duration: 1000, fill: 'forwards' }).onfinish = () => {
                    packet.style.display = 'none';
                    indexData(parsed);
                    isProcessing = false;
                    btn.innerText = "ğŸ“¦ ×©×œ×— ×œ×•×’";
                    btn.disabled = false;
                };
            }, 600);
        };
    }

    function parseLog(log) {
        const parts = log.split(" ");
        let level = "INFO";
        if(log.toLowerCase().includes("warn")) level = "WARN";
        if(log.toLowerCase().includes("error")) level = "ERROR";

        return {
            "@timestamp": new Date().toISOString(),
            "level": level,
            "message": parts.slice(2).join(" "),
            "source_ip": parts.find(p => p.includes("="))?.split("=")[1] || "unknown"
        };
    }

    function indexData(data) {
        docId++;
        const primaryNode = nodes[Math.floor(Math.random() * nodes.length)];
        let replicaNode = nodes.find(n => n !== primaryNode);
        if(replicaNode === undefined) replicaNode = primaryNode;

        addShardUI(primaryNode, 'P'+docId, 'primary');
        if(nodes.length > 1) {
            setTimeout(() => addShardUI(replicaNode, 'R'+docId, 'replica'), 300);
        }

        updateKibana(data);
    }

    function addShardUI(nodeId, text, type) {
        const container = document.getElementById('shards-' + nodeId);
        if(!container) return;

        const el = document.createElement('div');
        el.className = `shard ${type}`;
        el.innerText = text;
        el.title = "Index: logs-2024";
        container.appendChild(el);
    }

    function updateKibana(data) {
        const list = document.getElementById('kibana-list');
        if(list.innerText.includes("××™×Ÿ ×œ×•×’×™×")) list.innerHTML = "";

        const row = document.createElement('div');
        row.className = 'log-entry';
        row.innerHTML = `<span style="color:#0077cc; font-weight:600;">${data['@timestamp'].split('T')[1].substring(0,8)}</span> [<span style="font-weight:700;">${data.level}</span>] ${data.message}`;
        list.prepend(row);

        if(data.level === 'INFO') stats.info++;
        if(data.level === 'WARN') stats.warn++;
        if(data.level === 'ERROR') stats.error++;

        const total = Math.max(stats.info, stats.warn, stats.error, 1);
        document.getElementById('bar-info').style.height = (stats.info / total * 100) + '%';
        document.getElementById('bar-warn').style.height = (stats.warn / total * 100) + '%';
        document.getElementById('bar-error').style.height = (stats.error / total * 100) + '%';
    }

    function addNode() {
        const id = nodes.length;
        nodes.push(id);

        const container = document.getElementById('clusterGrid');
        const node = document.createElement('div');
        node.className = 'node-box';
        node.id = 'node-' + id;
        node.innerHTML = `
            <div class="node-header"><span>DATA</span> <span>Node-${id}</span></div>
            <div class="shards-container" id="shards-${id}"></div>
        `;
        container.appendChild(node);
    }

    function resetCluster() {
        nodes = [0, 1];
        docId = 0;
        stats = { info: 0, warn: 0, error: 0 };

        document.getElementById('clusterGrid').innerHTML = `
            <div class="node-box" id="node-0">
                <div class="node-header"><span>MASTER</span> <span>Node-0</span></div>
                <div class="shards-container" id="shards-0"></div>
            </div>
            <div class="node-box" id="node-1">
                <div class="node-header"><span>DATA</span> <span>Node-1</span></div>
                <div class="shards-container" id="shards-1"></div>
            </div>
        `;

        document.getElementById('kibana-list').innerHTML =
            '<div style="color: #cbd5e0; text-align: center; padding-top: 60px;">××™×Ÿ ×œ×•×’×™× ×‘××™× ×“×§×¡</div>';

        ['info','warn','error'].forEach(k =>
            document.getElementById('bar-'+k).style.height = '0%'
        );

        document.getElementById('logstash-out').innerText = '// Waiting for data...';
    }

    /* === DARK MODE === */
    function toggleDarkMode() {
        document.body.classList.toggle('dark-mode');
        const isDark = document.body.classList.contains('dark-mode');
        const btn = document.getElementById('darkModeToggle');
        btn.textContent = isDark ? 'â˜€ï¸ ××¦×‘ ×™×•×' : 'ğŸŒ™ ××¦×‘ ×œ×™×œ×”';
        localStorage.setItem('darkMode', isDark);
    }

    // Load dark mode preference
    document.addEventListener('DOMContentLoaded', function() {
        if (localStorage.getItem('darkMode') === 'true') {
            document.body.classList.add('dark-mode');
            document.getElementById('darkModeToggle').textContent = 'â˜€ï¸ ××¦×‘ ×™×•×';
        }

        // Copy code blocks
        document.querySelectorAll('.code-snippet, .solution-box, .output-box').forEach(code => {
            code.style.cursor = 'pointer';
            code.addEventListener('click', () => {
                const text = code.textContent.trim();
                navigator.clipboard.writeText(text).then(() => {
                    const notification = document.getElementById('copyNotification');
                    notification.classList.add('show');
                    setTimeout(() => notification.classList.remove('show'), 2000);
                }).catch(err => {
                    console.error('Failed to copy:', err);
                });
            });
        });
    });

    /* === SEARCH === */
    function toggleSearch() {
        const searchBar = document.getElementById('searchBar');
        const isVisible = searchBar.style.display !== 'none';
        searchBar.style.display = isVisible ? 'none' : 'block';
        if (!isVisible) {
            document.getElementById('searchInput').focus();
        } else {
            document.getElementById('searchResults').innerHTML = '';
        }
    }

    // Search database
    const searchDatabase = [
        { term: 'match', type: 'Query', description: 'Full-text search', example: '{"match": {"field": "text"}}', section: 'queries' },
        { term: 'term', type: 'Query', description: '×¢×¨×š ××“×•×™×§', example: '{"term": {"status": "active"}}', section: 'queries' },
        { term: 'bool', type: 'Query', description: '×œ×•×’×™×§×” ×‘×•×œ×™×× ×™×ª', example: '{"bool": {"must": [...], "filter": [...]}}', section: 'queries' },
        { term: 'range', type: 'Query', description: '×˜×•×•×— ×¢×¨×›×™×', example: '{"range": {"age": {"gte": 18}}}', section: 'queries' },
        { term: 'wildcard', type: 'Query', description: '×ª×•×•×™× ×›×œ×œ×™×™×', example: '{"wildcard": {"name": "john*"}}', section: 'queries' },
        { term: 'match_phrase', type: 'Query', description: '×‘×™×˜×•×™ ××“×•×™×§', example: '{"match_phrase": {"text": "exact phrase"}}', section: 'queries' },
        { term: 'multi_match', type: 'Query', description: '×—×™×¤×•×© ×‘××¡×¤×¨ fields', example: '{"multi_match": {"query": "x", "fields": ["*"]}}', section: 'queries' },

        { term: 'avg', type: 'Aggregation', description: '×××•×¦×¢', example: '{"avg": {"field": "price"}}', section: 'aggregations' },
        { term: 'sum', type: 'Aggregation', description: '×¡×›×•×', example: '{"sum": {"field": "amount"}}', section: 'aggregations' },
        { term: 'terms', type: 'Aggregation', description: '×§×™×‘×•×¥ ×œ×¤×™ ×¢×¨×›×™×', example: '{"terms": {"field": "category.keyword"}}', section: 'aggregations' },
        { term: 'date_histogram', type: 'Aggregation', description: '×§×™×‘×•×¥ ×œ×¤×™ ×ª××¨×™×›×™×', example: '{"date_histogram": {"field": "date", "interval": "1d"}}', section: 'aggregations' },
        { term: 'cardinality', type: 'Aggregation', description: '×¡×¤×™×¨×” ×™×™×—×•×“×™×ª', example: '{"cardinality": {"field": "user_id"}}', section: 'aggregations' },

        { term: 'Sharding', type: 'Concept', description: '×¤×™×¦×•×œ index ×œ××¡×¤×¨ ×—×œ×§×™×', example: 'number_of_shards: 3', section: 'sharding' },
        { term: 'Replica', type: 'Concept', description: '×¢×•×ª×§ ×©×œ primary shard', example: 'number_of_replicas: 2', section: 'sharding' },
        { term: 'Inverted Index', type: 'Concept', description: '××‘× ×” × ×ª×•× ×™× ×œ×—×™×¤×•×© ××”×™×¨', example: 'word â†’ [doc1, doc2]', section: 'inverted-index' },
        { term: 'Mapping', type: 'Concept', description: '×”×’×“×¨×ª schema', example: '{"type": "text"}', section: 'mappings' },

        { term: 'Filebeat', type: 'Beat', description: '×©×œ×™×—×ª logs ××§×‘×¦×™×', example: 'filebeat.yml', section: 'beats-types' },
        { term: 'Metricbeat', type: 'Beat', description: '×©×œ×™×—×ª metrics', example: 'metricbeat.yml', section: 'beats-types' },
        { term: 'Packetbeat', type: 'Beat', description: '× ×™×ª×•×— traffic', example: 'network monitoring', section: 'beats-types' },

        { term: 'Kibana', type: 'Tool', description: '×•×™×–×•××œ×™×–×¦×™×” ×•× ×™×ª×•×—', example: 'Discover, Visualize, Dashboard', section: 'elk-stack' },
        { term: 'Logstash', type: 'Tool', description: '×¢×™×‘×•×“ data pipeline', example: 'Input â†’ Filter â†’ Output', section: 'elk-stack' },

        { term: '_bulk', type: 'API', description: '×¤×¢×•×œ×•×ª ××¨×•×‘×•×ª', example: 'POST /_bulk', section: 'api' },
        { term: '_search', type: 'API', description: '×—×™×¤×•×©', example: 'POST /index/_search', section: 'api' },
        { term: '_cluster/health', type: 'API', description: '×‘×¨×™××•×ª cluster', example: 'GET /_cluster/health', section: 'cli' },

        { term: 'red status', type: 'Troubleshooting', description: 'cluster ××“×•×', example: '××•×‘×“×Ÿ × ×ª×•× ×™×', section: 'troubleshooting' },
        { term: 'yellow status', type: 'Troubleshooting', description: 'cluster ×¦×”×•×‘', example: 'replica ×—×¡×¨', section: 'troubleshooting' },
        { term: 'out of memory', type: 'Troubleshooting', description: '×‘×¢×™×•×ª ×–×™×›×¨×•×Ÿ', example: '×”×’×“×œ heap size', section: 'troubleshooting' },
        { term: 'slow query', type: 'Troubleshooting', description: 'queries ××™×˜×™×•×ª', example: 'profile: true', section: 'troubleshooting' },
    ];

    function performSearch(query) {
        const resultsDiv = document.getElementById('searchResults');

        if (!query || query.length < 2) {
            resultsDiv.innerHTML = '';
            return;
        }

        const results = searchDatabase.filter(item =>
            item.term.toLowerCase().includes(query.toLowerCase()) ||
            item.description.includes(query) ||
            item.example.toLowerCase().includes(query.toLowerCase())
        );

        if (results.length === 0) {
            resultsDiv.innerHTML = '<div style="padding: 20px; text-align: center; color: var(--text-secondary);">×œ× × ××¦××• ×ª×•×¦××•×ª</div>';
            return;
        }

        resultsDiv.innerHTML = results.map(item => `
            <div class="search-result-item" onclick="navigateToSection('${item.section}')">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                    <strong style="color: var(--elastic-blue); font-size: 1.1rem; font-family: 'JetBrains Mono', monospace;">${highlightText(item.term, query)}</strong>
                    <span style="background: var(--elastic-green); color: white; padding: 4px 12px; border-radius: 12px; font-size: 0.75rem;">${item.type}</span>
                </div>
                <div style="color: var(--text-secondary); margin-bottom: 8px;">${item.description}</div>
                <code style="background: var(--code-bg); color: var(--code-text); padding: 8px 12px; border-radius: 4px; display: block; font-family: 'JetBrains Mono', monospace; font-size: 0.85rem; direction: ltr; text-align: left;">${item.example}</code>
            </div>
        `).join('');
    }

    function highlightText(text, query) {
        const regex = new RegExp(`(${query})`, 'gi');
        return text.replace(regex, '<span class="search-highlight">$1</span>');
    }

    function navigateToSection(sectionId) {
        toggleSearch(); // Close search

        // Map sections to views
        const sectionToView = {
            'intro': 'theory',
            'what-is': 'theory',
            'elk-stack': 'theory',
            'architecture': 'theory',
            'sharding': 'theory',
            'inverted-index': 'theory',
            'documents': 'theory',
            'mappings': 'theory',
            'queries': 'theory',
            'aggregations': 'theory',
            'kibana-deep': 'theory',
            'beats-types': 'theory',
            'best-practices': 'theory',
            'api': 'api',
            'cli': 'cli',
            'troubleshooting': 'troubleshooting',
            'quickref': 'quickref',
        };

        const targetView = sectionToView[sectionId] || 'theory';

        // Switch to correct view
        const navItem = document.querySelector(`.nav-item[onclick*="${targetView}"]`);
        if (navItem) {
            navItem.click();
        }

        // If theory section, navigate to specific section
        if (targetView === 'theory') {
            setTimeout(() => {
                const sidebarItem = document.querySelector(`.theory-nav-item[onclick*="${sectionId}"]`);
                if (sidebarItem) {
                    sidebarItem.click();
                }
            }, 100);
        }
    }
</script>

</body>
</html>
